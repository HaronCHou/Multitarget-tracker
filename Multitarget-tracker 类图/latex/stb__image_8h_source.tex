\hypertarget{stb__image_8h_source}{}\doxysection{stb\+\_\+image.\+h}
\label{stb__image_8h_source}\index{D:/zhr\_files/Multitarget-\/tracker-\/master/src/Detector/darknet/3rdparty/stb/include/stb\_image.h@{D:/zhr\_files/Multitarget-\/tracker-\/master/src/Detector/darknet/3rdparty/stb/include/stb\_image.h}}
\mbox{\hyperlink{stb__image_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/* stb\_image -\/ v2.16 -\/ public domain image loader -\/ http://nothings.org/stb\_image.h}}
\DoxyCodeLine{2 \textcolor{comment}{                                     no warranty implied; use at your own risk}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{   Do this:}}
\DoxyCodeLine{5 \textcolor{comment}{      \#define STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{6 \textcolor{comment}{   before you include this file in *one* C or C++ file to create the implementation.}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   // i.e. it should look like this:}}
\DoxyCodeLine{9 \textcolor{comment}{   \#include ...}}
\DoxyCodeLine{10 \textcolor{comment}{   \#include ...}}
\DoxyCodeLine{11 \textcolor{comment}{   \#include ...}}
\DoxyCodeLine{12 \textcolor{comment}{   \#define STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{13 \textcolor{comment}{   \#include "{}stb\_image.h"{}}}
\DoxyCodeLine{14 \textcolor{comment}{}}
\DoxyCodeLine{15 \textcolor{comment}{   You can \#define STBI\_ASSERT(x) before the \#include to avoid using assert.h.}}
\DoxyCodeLine{16 \textcolor{comment}{   And \#define STBI\_MALLOC, STBI\_REALLOC, and STBI\_FREE to avoid using malloc,realloc,free}}
\DoxyCodeLine{17 \textcolor{comment}{}}
\DoxyCodeLine{18 \textcolor{comment}{}}
\DoxyCodeLine{19 \textcolor{comment}{   QUICK NOTES:}}
\DoxyCodeLine{20 \textcolor{comment}{      Primarily of interest to game developers and other people who can}}
\DoxyCodeLine{21 \textcolor{comment}{          avoid problematic images and only need the trivial interface}}
\DoxyCodeLine{22 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{comment}{      JPEG baseline \& progressive (12 bpc/arithmetic not supported, same as stock IJG lib)}}
\DoxyCodeLine{24 \textcolor{comment}{      PNG 1/2/4/8/16-\/bit-\/per-\/channel}}
\DoxyCodeLine{25 \textcolor{comment}{}}
\DoxyCodeLine{26 \textcolor{comment}{      TGA (not sure what subset, if a subset)}}
\DoxyCodeLine{27 \textcolor{comment}{      BMP non-\/1bpp, non-\/RLE}}
\DoxyCodeLine{28 \textcolor{comment}{      PSD (composited view only, no extra channels, 8/16 bit-\/per-\/channel)}}
\DoxyCodeLine{29 \textcolor{comment}{}}
\DoxyCodeLine{30 \textcolor{comment}{      GIF (*comp always reports as 4-\/channel)}}
\DoxyCodeLine{31 \textcolor{comment}{      HDR (radiance rgbE format)}}
\DoxyCodeLine{32 \textcolor{comment}{      PIC (Softimage PIC)}}
\DoxyCodeLine{33 \textcolor{comment}{      PNM (PPM and PGM binary only)}}
\DoxyCodeLine{34 \textcolor{comment}{}}
\DoxyCodeLine{35 \textcolor{comment}{      Animated GIF still needs a proper API, but here's one way to do it:}}
\DoxyCodeLine{36 \textcolor{comment}{          http://gist.github.com/urraka/685d9a6340b26b830d49}}
\DoxyCodeLine{37 \textcolor{comment}{}}
\DoxyCodeLine{38 \textcolor{comment}{      -\/ decode from memory or through FILE (define STBI\_NO\_STDIO to remove code)}}
\DoxyCodeLine{39 \textcolor{comment}{      -\/ decode from arbitrary I/O callbacks}}
\DoxyCodeLine{40 \textcolor{comment}{      -\/ SIMD acceleration on x86/x64 (SSE2) and ARM (NEON)}}
\DoxyCodeLine{41 \textcolor{comment}{}}
\DoxyCodeLine{42 \textcolor{comment}{   Full documentation under "{}DOCUMENTATION"{} below.}}
\DoxyCodeLine{43 \textcolor{comment}{}}
\DoxyCodeLine{44 \textcolor{comment}{}}
\DoxyCodeLine{45 \textcolor{comment}{LICENSE}}
\DoxyCodeLine{46 \textcolor{comment}{}}
\DoxyCodeLine{47 \textcolor{comment}{  See end of file for license information.}}
\DoxyCodeLine{48 \textcolor{comment}{}}
\DoxyCodeLine{49 \textcolor{comment}{RECENT REVISION HISTORY:}}
\DoxyCodeLine{50 \textcolor{comment}{}}
\DoxyCodeLine{51 \textcolor{comment}{      2.16  (2017-\/07-\/23) all functions have 16-\/bit variants; optimizations; bugfixes}}
\DoxyCodeLine{52 \textcolor{comment}{      2.15  (2017-\/03-\/18) fix png-\/1,2,4; all Imagenet JPGs; no runtime SSE detection on GCC}}
\DoxyCodeLine{53 \textcolor{comment}{      2.14  (2017-\/03-\/03) remove deprecated STBI\_JPEG\_OLD; fixes for Imagenet JPGs}}
\DoxyCodeLine{54 \textcolor{comment}{      2.13  (2016-\/12-\/04) experimental 16-\/bit API, only for PNG so far; fixes}}
\DoxyCodeLine{55 \textcolor{comment}{      2.12  (2016-\/04-\/02) fix typo in 2.11 PSD fix that caused crashes}}
\DoxyCodeLine{56 \textcolor{comment}{      2.11  (2016-\/04-\/02) 16-\/bit PNGS; enable SSE2 in non-\/gcc x64}}
\DoxyCodeLine{57 \textcolor{comment}{                         RGB-\/format JPEG; remove white matting in PSD;}}
\DoxyCodeLine{58 \textcolor{comment}{                         allocate large structures on the stack;}}
\DoxyCodeLine{59 \textcolor{comment}{                         correct channel count for PNG \& BMP}}
\DoxyCodeLine{60 \textcolor{comment}{      2.10  (2016-\/01-\/22) avoid warning introduced in 2.09}}
\DoxyCodeLine{61 \textcolor{comment}{      2.09  (2016-\/01-\/16) 16-\/bit TGA; comments in PNM files; STBI\_REALLOC\_SIZED}}
\DoxyCodeLine{62 \textcolor{comment}{}}
\DoxyCodeLine{63 \textcolor{comment}{   See end of file for full revision history.}}
\DoxyCodeLine{64 \textcolor{comment}{}}
\DoxyCodeLine{65 \textcolor{comment}{}}
\DoxyCodeLine{66 \textcolor{comment}{ ============================    Contributors    =========================}}
\DoxyCodeLine{67 \textcolor{comment}{}}
\DoxyCodeLine{68 \textcolor{comment}{ Image formats                          Extensions, features}}
\DoxyCodeLine{69 \textcolor{comment}{    Sean Barrett (jpeg, png, bmp)          Jetro Lauha (stbi\_info)}}
\DoxyCodeLine{70 \textcolor{comment}{    Nicolas Schulz (hdr, psd)              Martin "{}SpartanJ"{} Golini (stbi\_info)}}
\DoxyCodeLine{71 \textcolor{comment}{    Jonathan Dummer (tga)                  James "{}moose2000"{} Brown (iPhone PNG)}}
\DoxyCodeLine{72 \textcolor{comment}{    Jean-\/Marc Lienher (gif)                Ben "{}Disch"{} Wenger (io callbacks)}}
\DoxyCodeLine{73 \textcolor{comment}{    Tom Seddon (pic)                       Omar Cornut (1/2/4-\/bit PNG)}}
\DoxyCodeLine{74 \textcolor{comment}{    Thatcher Ulrich (psd)                  Nicolas Guillemot (vertical flip)}}
\DoxyCodeLine{75 \textcolor{comment}{    Ken Miller (pgm, ppm)                  Richard Mitton (16-\/bit PSD)}}
\DoxyCodeLine{76 \textcolor{comment}{    github:urraka (animated gif)           Junggon Kim (PNM comments)}}
\DoxyCodeLine{77 \textcolor{comment}{                                           Daniel Gibson (16-\/bit TGA)}}
\DoxyCodeLine{78 \textcolor{comment}{                                           socks-\/the-\/fox (16-\/bit PNG)}}
\DoxyCodeLine{79 \textcolor{comment}{                                           Jeremy Sawicki (handle all ImageNet JPGs)}}
\DoxyCodeLine{80 \textcolor{comment}{ Optimizations \& bugfixes}}
\DoxyCodeLine{81 \textcolor{comment}{    Fabian "{}ryg"{} Giesen}}
\DoxyCodeLine{82 \textcolor{comment}{    Arseny Kapoulkine}}
\DoxyCodeLine{83 \textcolor{comment}{    John-\/Mark Allen}}
\DoxyCodeLine{84 \textcolor{comment}{}}
\DoxyCodeLine{85 \textcolor{comment}{ Bug \& warning fixes}}
\DoxyCodeLine{86 \textcolor{comment}{    Marc LeBlanc            David Woo          Guillaume George   Martins Mozeiko}}
\DoxyCodeLine{87 \textcolor{comment}{    Christpher Lloyd        Jerry Jansson      Joseph Thomson     Phil Jordan}}
\DoxyCodeLine{88 \textcolor{comment}{    Dave Moore              Roy Eltham         Hayaki Saito       Nathan Reed}}
\DoxyCodeLine{89 \textcolor{comment}{    Won Chun                Luke Graham        Johan Duparc       Nick Verigakis}}
\DoxyCodeLine{90 \textcolor{comment}{    the Horde3D community   Thomas Ruf         Ronny Chevalier    Baldur Karlsson}}
\DoxyCodeLine{91 \textcolor{comment}{    Janez Zemva             John Bartholomew   Michal Cichon      github:rlyeh}}
\DoxyCodeLine{92 \textcolor{comment}{    Jonathan Blow           Ken Hamada         Tero Hanninen      github:romigrou}}
\DoxyCodeLine{93 \textcolor{comment}{    Laurent Gomila          Cort Stratton      Sergio Gonzalez    github:svdijk}}
\DoxyCodeLine{94 \textcolor{comment}{    Aruelien Pocheville     Thibault Reuille   Cass Everitt       github:snagar}}
\DoxyCodeLine{95 \textcolor{comment}{    Ryamond Barbiero        Paul Du Bois       Engin Manap        github:Zelex}}
\DoxyCodeLine{96 \textcolor{comment}{    Michaelangel007@github  Philipp Wiesemann  Dale Weiler        github:grim210}}
\DoxyCodeLine{97 \textcolor{comment}{    Oriol Ferrer Mesia      Josh Tobin         Matthew Gregan     github:sammyhw}}
\DoxyCodeLine{98 \textcolor{comment}{    Blazej Dariusz Roszkowski                  Gregory Mullen     github:phprus}}
\DoxyCodeLine{99 \textcolor{comment}{    Christian Floisand      Kevin Schmidt                         github:poppolopoppo}}
\DoxyCodeLine{100 \textcolor{comment}{*/}}
\DoxyCodeLine{101 }
\DoxyCodeLine{102 \textcolor{preprocessor}{\#ifndef STBI\_INCLUDE\_STB\_IMAGE\_H}}
\DoxyCodeLine{103 \textcolor{preprocessor}{\#define STBI\_INCLUDE\_STB\_IMAGE\_H}}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \textcolor{comment}{// DOCUMENTATION}}
\DoxyCodeLine{106 \textcolor{comment}{//}}
\DoxyCodeLine{107 \textcolor{comment}{// Limitations:}}
\DoxyCodeLine{108 \textcolor{comment}{//    -\/ no 16-\/bit-\/per-\/channel PNG}}
\DoxyCodeLine{109 \textcolor{comment}{//    -\/ no 12-\/bit-\/per-\/channel JPEG}}
\DoxyCodeLine{110 \textcolor{comment}{//    -\/ no JPEGs with arithmetic coding}}
\DoxyCodeLine{111 \textcolor{comment}{//    -\/ no 1-\/bit BMP}}
\DoxyCodeLine{112 \textcolor{comment}{//    -\/ GIF always returns *comp=4}}
\DoxyCodeLine{113 \textcolor{comment}{//}}
\DoxyCodeLine{114 \textcolor{comment}{// Basic usage (see HDR discussion below for HDR usage):}}
\DoxyCodeLine{115 \textcolor{comment}{//    int x,y,n;}}
\DoxyCodeLine{116 \textcolor{comment}{//    unsigned char *data = stbi\_load(filename, \&x, \&y, \&n, 0);}}
\DoxyCodeLine{117 \textcolor{comment}{//    // ... process data if not NULL ...}}
\DoxyCodeLine{118 \textcolor{comment}{//    // ... x = width, y = height, n = \# 8-\/bit components per pixel ...}}
\DoxyCodeLine{119 \textcolor{comment}{//    // ... replace '0' with '1'..'4' to force that many components per pixel}}
\DoxyCodeLine{120 \textcolor{comment}{//    // ... but 'n' will always be the number that it would have been if you said 0}}
\DoxyCodeLine{121 \textcolor{comment}{//    stbi\_image\_free(data)}}
\DoxyCodeLine{122 \textcolor{comment}{//}}
\DoxyCodeLine{123 \textcolor{comment}{// Standard parameters:}}
\DoxyCodeLine{124 \textcolor{comment}{//    int *x                 -\/-\/ outputs image width in pixels}}
\DoxyCodeLine{125 \textcolor{comment}{//    int *y                 -\/-\/ outputs image height in pixels}}
\DoxyCodeLine{126 \textcolor{comment}{//    int *channels\_in\_file  -\/-\/ outputs \# of image components in image file}}
\DoxyCodeLine{127 \textcolor{comment}{//    int desired\_channels   -\/-\/ if non-\/zero, \# of image components requested in result}}
\DoxyCodeLine{128 \textcolor{comment}{//}}
\DoxyCodeLine{129 \textcolor{comment}{// The return value from an image loader is an 'unsigned char *' which points}}
\DoxyCodeLine{130 \textcolor{comment}{// to the pixel data, or NULL on an allocation failure or if the image is}}
\DoxyCodeLine{131 \textcolor{comment}{// corrupt or invalid. The pixel data consists of *y scanlines of *x pixels,}}
\DoxyCodeLine{132 \textcolor{comment}{// with each pixel consisting of N interleaved 8-\/bit components; the first}}
\DoxyCodeLine{133 \textcolor{comment}{// pixel pointed to is top-\/left-\/most in the image. There is no padding between}}
\DoxyCodeLine{134 \textcolor{comment}{// image scanlines or between pixels, regardless of format. The number of}}
\DoxyCodeLine{135 \textcolor{comment}{// components N is 'desired\_channels' if desired\_channels is non-\/zero, or}}
\DoxyCodeLine{136 \textcolor{comment}{// *channels\_in\_file otherwise. If desired\_channels is non-\/zero,}}
\DoxyCodeLine{137 \textcolor{comment}{// *channels\_in\_file has the number of components that \_would\_ have been}}
\DoxyCodeLine{138 \textcolor{comment}{// output otherwise. E.g. if you set desired\_channels to 4, you will always}}
\DoxyCodeLine{139 \textcolor{comment}{// get RGBA output, but you can check *channels\_in\_file to see if it's trivially}}
\DoxyCodeLine{140 \textcolor{comment}{// opaque because e.g. there were only 3 channels in the source image.}}
\DoxyCodeLine{141 \textcolor{comment}{//}}
\DoxyCodeLine{142 \textcolor{comment}{// An output image with N components has the following components interleaved}}
\DoxyCodeLine{143 \textcolor{comment}{// in this order in each pixel:}}
\DoxyCodeLine{144 \textcolor{comment}{//}}
\DoxyCodeLine{145 \textcolor{comment}{//     N=\#comp     components}}
\DoxyCodeLine{146 \textcolor{comment}{//       1           grey}}
\DoxyCodeLine{147 \textcolor{comment}{//       2           grey, alpha}}
\DoxyCodeLine{148 \textcolor{comment}{//       3           red, green, blue}}
\DoxyCodeLine{149 \textcolor{comment}{//       4           red, green, blue, alpha}}
\DoxyCodeLine{150 \textcolor{comment}{//}}
\DoxyCodeLine{151 \textcolor{comment}{// If image loading fails for any reason, the return value will be NULL,}}
\DoxyCodeLine{152 \textcolor{comment}{// and *x, *y, *channels\_in\_file will be unchanged. The function}}
\DoxyCodeLine{153 \textcolor{comment}{// stbi\_failure\_reason() can be queried for an extremely brief, end-\/user}}
\DoxyCodeLine{154 \textcolor{comment}{// unfriendly explanation of why the load failed. Define STBI\_NO\_FAILURE\_STRINGS}}
\DoxyCodeLine{155 \textcolor{comment}{// to avoid compiling these strings at all, and STBI\_FAILURE\_USERMSG to get slightly}}
\DoxyCodeLine{156 \textcolor{comment}{// more user-\/friendly ones.}}
\DoxyCodeLine{157 \textcolor{comment}{//}}
\DoxyCodeLine{158 \textcolor{comment}{// Paletted PNG, BMP, GIF, and PIC images are automatically depalettized.}}
\DoxyCodeLine{159 \textcolor{comment}{//}}
\DoxyCodeLine{160 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{161 \textcolor{comment}{//}}
\DoxyCodeLine{162 \textcolor{comment}{// Philosophy}}
\DoxyCodeLine{163 \textcolor{comment}{//}}
\DoxyCodeLine{164 \textcolor{comment}{// stb libraries are designed with the following priorities:}}
\DoxyCodeLine{165 \textcolor{comment}{//}}
\DoxyCodeLine{166 \textcolor{comment}{//    1. easy to use}}
\DoxyCodeLine{167 \textcolor{comment}{//    2. easy to maintain}}
\DoxyCodeLine{168 \textcolor{comment}{//    3. good performance}}
\DoxyCodeLine{169 \textcolor{comment}{//}}
\DoxyCodeLine{170 \textcolor{comment}{// Sometimes I let "{}good performance"{} creep up in priority over "{}easy to maintain"{},}}
\DoxyCodeLine{171 \textcolor{comment}{// and for best performance I may provide less-\/easy-\/to-\/use APIs that give higher}}
\DoxyCodeLine{172 \textcolor{comment}{// performance, in addition to the easy to use ones. Nevertheless, it's important}}
\DoxyCodeLine{173 \textcolor{comment}{// to keep in mind that from the standpoint of you, a client of this library,}}
\DoxyCodeLine{174 \textcolor{comment}{// all you care about is \#1 and \#3, and stb libraries DO NOT emphasize \#3 above all.}}
\DoxyCodeLine{175 \textcolor{comment}{//}}
\DoxyCodeLine{176 \textcolor{comment}{// Some secondary priorities arise directly from the first two, some of which}}
\DoxyCodeLine{177 \textcolor{comment}{// make more explicit reasons why performance can't be emphasized.}}
\DoxyCodeLine{178 \textcolor{comment}{//}}
\DoxyCodeLine{179 \textcolor{comment}{//    -\/ Portable ("{}ease of use"{})}}
\DoxyCodeLine{180 \textcolor{comment}{//    -\/ Small source code footprint ("{}easy to maintain"{})}}
\DoxyCodeLine{181 \textcolor{comment}{//    -\/ No dependencies ("{}ease of use"{})}}
\DoxyCodeLine{182 \textcolor{comment}{//}}
\DoxyCodeLine{183 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{184 \textcolor{comment}{//}}
\DoxyCodeLine{185 \textcolor{comment}{// I/O callbacks}}
\DoxyCodeLine{186 \textcolor{comment}{//}}
\DoxyCodeLine{187 \textcolor{comment}{// I/O callbacks allow you to read from arbitrary sources, like packaged}}
\DoxyCodeLine{188 \textcolor{comment}{// files or some other source. Data read from callbacks are processed}}
\DoxyCodeLine{189 \textcolor{comment}{// through a small internal buffer (currently 128 bytes) to try to reduce}}
\DoxyCodeLine{190 \textcolor{comment}{// overhead.}}
\DoxyCodeLine{191 \textcolor{comment}{//}}
\DoxyCodeLine{192 \textcolor{comment}{// The three functions you must define are "{}read"{} (reads some bytes of data),}}
\DoxyCodeLine{193 \textcolor{comment}{// "{}skip"{} (skips some bytes of data), "{}eof"{} (reports if the stream is at the end).}}
\DoxyCodeLine{194 \textcolor{comment}{//}}
\DoxyCodeLine{195 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{196 \textcolor{comment}{//}}
\DoxyCodeLine{197 \textcolor{comment}{// SIMD support}}
\DoxyCodeLine{198 \textcolor{comment}{//}}
\DoxyCodeLine{199 \textcolor{comment}{// The JPEG decoder will try to automatically use SIMD kernels on x86 when}}
\DoxyCodeLine{200 \textcolor{comment}{// supported by the compiler. For ARM Neon support, you must explicitly}}
\DoxyCodeLine{201 \textcolor{comment}{// request it.}}
\DoxyCodeLine{202 \textcolor{comment}{//}}
\DoxyCodeLine{203 \textcolor{comment}{// (The old do-\/it-\/yourself SIMD API is no longer supported in the current}}
\DoxyCodeLine{204 \textcolor{comment}{// code.)}}
\DoxyCodeLine{205 \textcolor{comment}{//}}
\DoxyCodeLine{206 \textcolor{comment}{// On x86, SSE2 will automatically be used when available based on a run-\/time}}
\DoxyCodeLine{207 \textcolor{comment}{// test; if not, the generic C versions are used as a fall-\/back. On ARM targets,}}
\DoxyCodeLine{208 \textcolor{comment}{// the typical path is to have separate builds for NEON and non-\/NEON devices}}
\DoxyCodeLine{209 \textcolor{comment}{// (at least this is true for iOS and Android). Therefore, the NEON support is}}
\DoxyCodeLine{210 \textcolor{comment}{// toggled by a build flag: define STBI\_NEON to get NEON loops.}}
\DoxyCodeLine{211 \textcolor{comment}{//}}
\DoxyCodeLine{212 \textcolor{comment}{// If for some reason you do not want to use any of SIMD code, or if}}
\DoxyCodeLine{213 \textcolor{comment}{// you have issues compiling it, you can disable it entirely by}}
\DoxyCodeLine{214 \textcolor{comment}{// defining STBI\_NO\_SIMD.}}
\DoxyCodeLine{215 \textcolor{comment}{//}}
\DoxyCodeLine{216 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{217 \textcolor{comment}{//}}
\DoxyCodeLine{218 \textcolor{comment}{// HDR image support   (disable by defining STBI\_NO\_HDR)}}
\DoxyCodeLine{219 \textcolor{comment}{//}}
\DoxyCodeLine{220 \textcolor{comment}{// stb\_image now supports loading HDR images in general, and currently}}
\DoxyCodeLine{221 \textcolor{comment}{// the Radiance .HDR file format, although the support is provided}}
\DoxyCodeLine{222 \textcolor{comment}{// generically. You can still load any file through the existing interface;}}
\DoxyCodeLine{223 \textcolor{comment}{// if you attempt to load an HDR file, it will be automatically remapped to}}
\DoxyCodeLine{224 \textcolor{comment}{// LDR, assuming gamma 2.2 and an arbitrary scale factor defaulting to 1;}}
\DoxyCodeLine{225 \textcolor{comment}{// both of these constants can be reconfigured through this interface:}}
\DoxyCodeLine{226 \textcolor{comment}{//}}
\DoxyCodeLine{227 \textcolor{comment}{//     stbi\_hdr\_to\_ldr\_gamma(2.2f);}}
\DoxyCodeLine{228 \textcolor{comment}{//     stbi\_hdr\_to\_ldr\_scale(1.0f);}}
\DoxyCodeLine{229 \textcolor{comment}{//}}
\DoxyCodeLine{230 \textcolor{comment}{// (note, do not use \_inverse\_ constants; stbi\_image will invert them}}
\DoxyCodeLine{231 \textcolor{comment}{// appropriately).}}
\DoxyCodeLine{232 \textcolor{comment}{//}}
\DoxyCodeLine{233 \textcolor{comment}{// Additionally, there is a new, parallel interface for loading files as}}
\DoxyCodeLine{234 \textcolor{comment}{// (linear) floats to preserve the full dynamic range:}}
\DoxyCodeLine{235 \textcolor{comment}{//}}
\DoxyCodeLine{236 \textcolor{comment}{//    float *data = stbi\_loadf(filename, \&x, \&y, \&n, 0);}}
\DoxyCodeLine{237 \textcolor{comment}{//}}
\DoxyCodeLine{238 \textcolor{comment}{// If you load LDR images through this interface, those images will}}
\DoxyCodeLine{239 \textcolor{comment}{// be promoted to floating point values, run through the inverse of}}
\DoxyCodeLine{240 \textcolor{comment}{// constants corresponding to the above:}}
\DoxyCodeLine{241 \textcolor{comment}{//}}
\DoxyCodeLine{242 \textcolor{comment}{//     stbi\_ldr\_to\_hdr\_scale(1.0f);}}
\DoxyCodeLine{243 \textcolor{comment}{//     stbi\_ldr\_to\_hdr\_gamma(2.2f);}}
\DoxyCodeLine{244 \textcolor{comment}{//}}
\DoxyCodeLine{245 \textcolor{comment}{// Finally, given a filename (or an open file or memory block-\/-\/see header}}
\DoxyCodeLine{246 \textcolor{comment}{// file for details) containing image data, you can query for the "{}most}}
\DoxyCodeLine{247 \textcolor{comment}{// appropriate"{} interface to use (that is, whether the image is HDR or}}
\DoxyCodeLine{248 \textcolor{comment}{// not), using:}}
\DoxyCodeLine{249 \textcolor{comment}{//}}
\DoxyCodeLine{250 \textcolor{comment}{//     stbi\_is\_hdr(char *filename);}}
\DoxyCodeLine{251 \textcolor{comment}{//}}
\DoxyCodeLine{252 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{253 \textcolor{comment}{//}}
\DoxyCodeLine{254 \textcolor{comment}{// iPhone PNG support:}}
\DoxyCodeLine{255 \textcolor{comment}{//}}
\DoxyCodeLine{256 \textcolor{comment}{// By default we convert iphone-\/formatted PNGs back to RGB, even though}}
\DoxyCodeLine{257 \textcolor{comment}{// they are internally encoded differently. You can disable this conversion}}
\DoxyCodeLine{258 \textcolor{comment}{// by by calling stbi\_convert\_iphone\_png\_to\_rgb(0), in which case}}
\DoxyCodeLine{259 \textcolor{comment}{// you will always just get the native iphone "{}format"{} through (which}}
\DoxyCodeLine{260 \textcolor{comment}{// is BGR stored in RGB).}}
\DoxyCodeLine{261 \textcolor{comment}{//}}
\DoxyCodeLine{262 \textcolor{comment}{// Call stbi\_set\_unpremultiply\_on\_load(1) as well to force a divide per}}
\DoxyCodeLine{263 \textcolor{comment}{// pixel to remove any premultiplied alpha *only* if the image file explicitly}}
\DoxyCodeLine{264 \textcolor{comment}{// says there's premultiplied data (currently only happens in iPhone images,}}
\DoxyCodeLine{265 \textcolor{comment}{// and only if iPhone convert-\/to-\/rgb processing is on).}}
\DoxyCodeLine{266 \textcolor{comment}{//}}
\DoxyCodeLine{267 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{268 \textcolor{comment}{//}}
\DoxyCodeLine{269 \textcolor{comment}{// ADDITIONAL CONFIGURATION}}
\DoxyCodeLine{270 \textcolor{comment}{//}}
\DoxyCodeLine{271 \textcolor{comment}{//  -\/ You can suppress implementation of any of the decoders to reduce}}
\DoxyCodeLine{272 \textcolor{comment}{//    your code footprint by \#defining one or more of the following}}
\DoxyCodeLine{273 \textcolor{comment}{//    symbols before creating the implementation.}}
\DoxyCodeLine{274 \textcolor{comment}{//}}
\DoxyCodeLine{275 \textcolor{comment}{//        STBI\_NO\_JPEG}}
\DoxyCodeLine{276 \textcolor{comment}{//        STBI\_NO\_PNG}}
\DoxyCodeLine{277 \textcolor{comment}{//        STBI\_NO\_BMP}}
\DoxyCodeLine{278 \textcolor{comment}{//        STBI\_NO\_PSD}}
\DoxyCodeLine{279 \textcolor{comment}{//        STBI\_NO\_TGA}}
\DoxyCodeLine{280 \textcolor{comment}{//        STBI\_NO\_GIF}}
\DoxyCodeLine{281 \textcolor{comment}{//        STBI\_NO\_HDR}}
\DoxyCodeLine{282 \textcolor{comment}{//        STBI\_NO\_PIC}}
\DoxyCodeLine{283 \textcolor{comment}{//        STBI\_NO\_PNM   (.ppm and .pgm)}}
\DoxyCodeLine{284 \textcolor{comment}{//}}
\DoxyCodeLine{285 \textcolor{comment}{//  -\/ You can request *only* certain decoders and suppress all other ones}}
\DoxyCodeLine{286 \textcolor{comment}{//    (this will be more forward-\/compatible, as addition of new decoders}}
\DoxyCodeLine{287 \textcolor{comment}{//    doesn't require you to disable them explicitly):}}
\DoxyCodeLine{288 \textcolor{comment}{//}}
\DoxyCodeLine{289 \textcolor{comment}{//        STBI\_ONLY\_JPEG}}
\DoxyCodeLine{290 \textcolor{comment}{//        STBI\_ONLY\_PNG}}
\DoxyCodeLine{291 \textcolor{comment}{//        STBI\_ONLY\_BMP}}
\DoxyCodeLine{292 \textcolor{comment}{//        STBI\_ONLY\_PSD}}
\DoxyCodeLine{293 \textcolor{comment}{//        STBI\_ONLY\_TGA}}
\DoxyCodeLine{294 \textcolor{comment}{//        STBI\_ONLY\_GIF}}
\DoxyCodeLine{295 \textcolor{comment}{//        STBI\_ONLY\_HDR}}
\DoxyCodeLine{296 \textcolor{comment}{//        STBI\_ONLY\_PIC}}
\DoxyCodeLine{297 \textcolor{comment}{//        STBI\_ONLY\_PNM   (.ppm and .pgm)}}
\DoxyCodeLine{298 \textcolor{comment}{//}}
\DoxyCodeLine{299 \textcolor{comment}{//   -\/ If you use STBI\_NO\_PNG (or \_ONLY\_ without PNG), and you still}}
\DoxyCodeLine{300 \textcolor{comment}{//     want the zlib decoder to be available, \#define STBI\_SUPPORT\_ZLIB}}
\DoxyCodeLine{301 \textcolor{comment}{//}}
\DoxyCodeLine{302 }
\DoxyCodeLine{303 }
\DoxyCodeLine{304 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{305 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{306 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_STDIO}}
\DoxyCodeLine{307 }
\DoxyCodeLine{308 \textcolor{preprocessor}{\#define STBI\_VERSION 1}}
\DoxyCodeLine{309 }
\DoxyCodeLine{310 \textcolor{keyword}{enum}}
\DoxyCodeLine{311 \{}
\DoxyCodeLine{312    \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06ca0177ac2c5002f4f251bb766d41752029}{STBI\_default}} = 0, \textcolor{comment}{// only used for desired\_channels}}
\DoxyCodeLine{313 }
\DoxyCodeLine{314    \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06cad1eb95ca1fa7706bf732bf35a0ed40aa}{STBI\_grey}}       = 1,}
\DoxyCodeLine{315    \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06caf5829d16d4cca6077465c5abd346e2f8}{STBI\_grey\_alpha}} = 2,}
\DoxyCodeLine{316    \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06caa59123e5d0af25f9b1539f5cf1facddf}{STBI\_rgb}}        = 3,}
\DoxyCodeLine{317    \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06caa7b1af0c9f0310c3ada2aa29a32de293}{STBI\_rgb\_alpha}}  = 4}
\DoxyCodeLine{318 \};}
\DoxyCodeLine{319 }
\DoxyCodeLine{320 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}};}
\DoxyCodeLine{321 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}};}
\DoxyCodeLine{322 }
\DoxyCodeLine{323 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{324 \textcolor{keyword}{extern} \textcolor{stringliteral}{"{}C"{}} \{}
\DoxyCodeLine{325 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{326 }
\DoxyCodeLine{327 \textcolor{preprocessor}{\#ifdef STB\_IMAGE\_STATIC}}
\DoxyCodeLine{328 \textcolor{preprocessor}{\#define STBIDEF static}}
\DoxyCodeLine{329 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{330 \textcolor{preprocessor}{\#define STBIDEF extern}}
\DoxyCodeLine{331 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{332 }
\DoxyCodeLine{334 \textcolor{comment}{//}}
\DoxyCodeLine{335 \textcolor{comment}{// PRIMARY API -\/ works on images of any type}}
\DoxyCodeLine{336 \textcolor{comment}{//}}
\DoxyCodeLine{337 }
\DoxyCodeLine{338 \textcolor{comment}{//}}
\DoxyCodeLine{339 \textcolor{comment}{// load image by filename, open file, or memory buffer}}
\DoxyCodeLine{340 \textcolor{comment}{//}}
\DoxyCodeLine{341 }
\DoxyCodeLine{342 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{343 \{}
\DoxyCodeLine{344    int      (*\mbox{\hyperlink{namespacenvinfer1_aba564f1375831c7ba550dadc966101b6}{read}})  (\textcolor{keywordtype}{void} *user,\textcolor{keywordtype}{char} *\mbox{\hyperlink{darknet_8h_a493583f6fc164cf849745e01e4c04ab5}{data}},\textcolor{keywordtype}{int} size);   \textcolor{comment}{// fill 'data' with 'size' bytes.  return number of bytes actually read}}
\DoxyCodeLine{345    void     (*skip)  (\textcolor{keywordtype}{void} *user,\textcolor{keywordtype}{int} n);                 \textcolor{comment}{// skip the next 'n' bytes, or 'unget' the last -\/n bytes if negative}}
\DoxyCodeLine{346    int      (*eof)   (\textcolor{keywordtype}{void} *user);                       \textcolor{comment}{// returns nonzero if we are at end of file/data}}
\DoxyCodeLine{347 \} \mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}};}
\DoxyCodeLine{348 }
\DoxyCodeLine{350 \textcolor{comment}{//}}
\DoxyCodeLine{351 \textcolor{comment}{// 8-\/bits-\/per-\/channel interface}}
\DoxyCodeLine{352 \textcolor{comment}{//}}
\DoxyCodeLine{353 }
\DoxyCodeLine{354 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a5bf9d78a27dc1cb216005798fb704bdf}{stbi\_load\_from\_memory}}   (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}           \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}   , \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{355 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a354f2a6f7939cf1792db087ad3b2220a}{stbi\_load\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk  , \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{356 }
\DoxyCodeLine{357 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{358 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_ad3fc296ba0778df0a8094e20da82deab}{stbi\_load}}            (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{359 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a093f86b90423ff020846c6d002c3296c}{stbi\_load\_from\_file}}  (FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{360 \textcolor{comment}{// for stbi\_load\_from\_file, file pointer is left pointing immediately after image}}
\DoxyCodeLine{361 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{362 }
\DoxyCodeLine{364 \textcolor{comment}{//}}
\DoxyCodeLine{365 \textcolor{comment}{// 16-\/bits-\/per-\/channel interface}}
\DoxyCodeLine{366 \textcolor{comment}{//}}
\DoxyCodeLine{367 }
\DoxyCodeLine{368 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}} *\mbox{\hyperlink{stb__image_8h_a2ce4a73cca165fd30e0a23d012d8e770}{stbi\_load\_16\_from\_memory}}   (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{369 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}} *\mbox{\hyperlink{stb__image_8h_aa93c0e91f15bf7b1aca8369bf39c5e41}{stbi\_load\_16\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{370 }
\DoxyCodeLine{371 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{372 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}} *\mbox{\hyperlink{stb__image_8h_a2202a8c0f947dd555c286f7fee1fc39d}{stbi\_load\_16}}          (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{373 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}} *\mbox{\hyperlink{stb__image_8h_a077867644e156572eaf54d118f65e5a1}{stbi\_load\_from\_file\_16}}(FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{374 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{375 }
\DoxyCodeLine{377 \textcolor{comment}{//}}
\DoxyCodeLine{378 \textcolor{comment}{// float-\/per-\/channel interface}}
\DoxyCodeLine{379 \textcolor{comment}{//}}
\DoxyCodeLine{380 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{381    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a09c9f8ddfda96cc62461b86daccf0f77}{stbi\_loadf\_from\_memory}}     (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{382    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a7573a229fe25afc452dffddbded8e5a8}{stbi\_loadf\_from\_callbacks}}  (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},  \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{383 }
\DoxyCodeLine{384 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{385    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a4fe9e7c92b7f8e8df8939b776a49cfa8}{stbi\_loadf}}            (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{386    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a9099e31f34506c8630d58b737aa5a049}{stbi\_loadf\_from\_file}}  (FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels);}
\DoxyCodeLine{387 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{388 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{389 }
\DoxyCodeLine{390 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{391    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_ab18889e43518d6b4421b705782bb1b5e}{stbi\_hdr\_to\_ldr\_gamma}}(\textcolor{keywordtype}{float} gamma);}
\DoxyCodeLine{392    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_ae21cc1184eeb5cc814699f1ed62c5258}{stbi\_hdr\_to\_ldr\_scale}}(\textcolor{keywordtype}{float} scale);}
\DoxyCodeLine{393 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_HDR}}
\DoxyCodeLine{394 }
\DoxyCodeLine{395 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{396    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_a1feccdcf726dcc6b5502e3efa85b7dbb}{stbi\_ldr\_to\_hdr\_gamma}}(\textcolor{keywordtype}{float} gamma);}
\DoxyCodeLine{397    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_af946583656a362a316b40c0421c20561}{stbi\_ldr\_to\_hdr\_scale}}(\textcolor{keywordtype}{float} scale);}
\DoxyCodeLine{398 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_LINEAR}}
\DoxyCodeLine{399 }
\DoxyCodeLine{400 \textcolor{comment}{// stbi\_is\_hdr is always defined, but always returns false if STBI\_NO\_HDR}}
\DoxyCodeLine{401 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}    \mbox{\hyperlink{stb__image_8h_af0e94f316fe1848f632517ca3c11d077}{stbi\_is\_hdr\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user);}
\DoxyCodeLine{402 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}    \mbox{\hyperlink{stb__image_8h_a5cbc6f5cbb3b2d0d87ee959fcee9d23e}{stbi\_is\_hdr\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{403 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{404 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_ae70f9a302f7e87fd971075e7f758d55c}{stbi\_is\_hdr}}          (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename);}
\DoxyCodeLine{405 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_aaf10d41631e1e9214fde1688bdbd8524}{stbi\_is\_hdr\_from\_file}}(FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{406 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_STDIO}}
\DoxyCodeLine{407 }
\DoxyCodeLine{408 }
\DoxyCodeLine{409 \textcolor{comment}{// get a VERY brief reason for failure}}
\DoxyCodeLine{410 \textcolor{comment}{// NOT THREADSAFE}}
\DoxyCodeLine{411 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_ac72f312f610a7df1519ea0f2a2f94be9}{stbi\_failure\_reason}}  (\textcolor{keywordtype}{void});}
\DoxyCodeLine{412 }
\DoxyCodeLine{413 \textcolor{comment}{// free the loaded image -\/-\/ this is just free()}}
\DoxyCodeLine{414 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}     \mbox{\hyperlink{stb__image_8h_ad3e11bb44412a7ba348acfbad09caacb}{stbi\_image\_free}}      (\textcolor{keywordtype}{void} *retval\_from\_stbi\_load);}
\DoxyCodeLine{415 }
\DoxyCodeLine{416 \textcolor{comment}{// get image dimensions \& components without fully decoding}}
\DoxyCodeLine{417 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_acfef077febce3bc3f1f339de478f3315}{stbi\_info\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{418 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_a86291c64cb663f41a34647d5e1abf363}{stbi\_info\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{419 }
\DoxyCodeLine{420 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{421 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_aede708cca1304520b2afcf4d5eb61d70}{stbi\_info}}            (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename,     \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{422 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_a28abedef4a0a93909332080df6be0021}{stbi\_info\_from\_file}}  (FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}},                  \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{423 }
\DoxyCodeLine{424 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{425 }
\DoxyCodeLine{426 }
\DoxyCodeLine{427 }
\DoxyCodeLine{428 \textcolor{comment}{// for image formats that explicitly notate that they have premultiplied alpha,}}
\DoxyCodeLine{429 \textcolor{comment}{// we just return the colors as stored in the file. set this flag to force}}
\DoxyCodeLine{430 \textcolor{comment}{// unpremultiplication. results are undefined if the unpremultiply overflow.}}
\DoxyCodeLine{431 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_a3f02e0053e1c8d08a3ed436e6a82c7c9}{stbi\_set\_unpremultiply\_on\_load}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_unpremultiply);}
\DoxyCodeLine{432 }
\DoxyCodeLine{433 \textcolor{comment}{// indicate whether we should process iphone images back to canonical format,}}
\DoxyCodeLine{434 \textcolor{comment}{// or just pass them through "{}as-\/is"{}}}
\DoxyCodeLine{435 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_a23525ef2b882f3de426b47ecf8d9151b}{stbi\_convert\_iphone\_png\_to\_rgb}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_convert);}
\DoxyCodeLine{436 }
\DoxyCodeLine{437 \textcolor{comment}{// flip the image vertically, so the first pixel in the output array is the bottom left}}
\DoxyCodeLine{438 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_ab89c177fc52f1bb2dc1c05e48129a0a4}{stbi\_set\_flip\_vertically\_on\_load}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_flip);}
\DoxyCodeLine{439 }
\DoxyCodeLine{440 \textcolor{comment}{// ZLIB client -\/ used by PNG, available for other purposes}}
\DoxyCodeLine{441 }
\DoxyCodeLine{442 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_acba137e5310f3c0fe9bb198e4bee3dce}{stbi\_zlib\_decode\_malloc\_guesssize}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} initial\_size, \textcolor{keywordtype}{int} *outlen);}
\DoxyCodeLine{443 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_adc3de199aa29f7370a699ad545155541}{stbi\_zlib\_decode\_malloc\_guesssize\_headerflag}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} initial\_size, \textcolor{keywordtype}{int} *outlen, \textcolor{keywordtype}{int} parse\_header);}
\DoxyCodeLine{444 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_afec644d4e1a3cd858dfe0f9c55a1e55c}{stbi\_zlib\_decode\_malloc}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *outlen);}
\DoxyCodeLine{445 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}   \mbox{\hyperlink{stb__image_8h_ae8447830c49bc17f8491e12c1f0ded48}{stbi\_zlib\_decode\_buffer}}(\textcolor{keywordtype}{char} *obuffer, \textcolor{keywordtype}{int} olen, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ibuffer, \textcolor{keywordtype}{int} ilen);}
\DoxyCodeLine{446 }
\DoxyCodeLine{447 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_ad6b5cd73a89037832ee2b2872a17bd1b}{stbi\_zlib\_decode\_noheader\_malloc}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *outlen);}
\DoxyCodeLine{448 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}   \mbox{\hyperlink{stb__image_8h_a0d12efc011adfff7521f3b924feb0b0e}{stbi\_zlib\_decode\_noheader\_buffer}}(\textcolor{keywordtype}{char} *obuffer, \textcolor{keywordtype}{int} olen, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ibuffer, \textcolor{keywordtype}{int} ilen);}
\DoxyCodeLine{449 }
\DoxyCodeLine{450 }
\DoxyCodeLine{451 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{452 \}}
\DoxyCodeLine{453 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{454 }
\DoxyCodeLine{455 \textcolor{comment}{//}}
\DoxyCodeLine{456 \textcolor{comment}{//}}
\DoxyCodeLine{458 \textcolor{comment}{}\textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_INCLUDE\_STB\_IMAGE\_H}}
\DoxyCodeLine{459 }
\DoxyCodeLine{460 \textcolor{preprocessor}{\#ifdef STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{461 }
\DoxyCodeLine{462 \textcolor{preprocessor}{\#if defined(STBI\_ONLY\_JPEG) || defined(STBI\_ONLY\_PNG) || defined(STBI\_ONLY\_BMP) \(\backslash\)}}
\DoxyCodeLine{463 \textcolor{preprocessor}{  || defined(STBI\_ONLY\_TGA) || defined(STBI\_ONLY\_GIF) || defined(STBI\_ONLY\_PSD) \(\backslash\)}}
\DoxyCodeLine{464 \textcolor{preprocessor}{  || defined(STBI\_ONLY\_HDR) || defined(STBI\_ONLY\_PIC) || defined(STBI\_ONLY\_PNM) \(\backslash\)}}
\DoxyCodeLine{465 \textcolor{preprocessor}{  || defined(STBI\_ONLY\_ZLIB)}}
\DoxyCodeLine{466 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_JPEG}}
\DoxyCodeLine{467 \textcolor{preprocessor}{   \#define STBI\_NO\_JPEG}}
\DoxyCodeLine{468 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{469 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_PNG}}
\DoxyCodeLine{470 \textcolor{preprocessor}{   \#define STBI\_NO\_PNG}}
\DoxyCodeLine{471 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{472 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_BMP}}
\DoxyCodeLine{473 \textcolor{preprocessor}{   \#define STBI\_NO\_BMP}}
\DoxyCodeLine{474 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{475 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_PSD}}
\DoxyCodeLine{476 \textcolor{preprocessor}{   \#define STBI\_NO\_PSD}}
\DoxyCodeLine{477 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{478 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_TGA}}
\DoxyCodeLine{479 \textcolor{preprocessor}{   \#define STBI\_NO\_TGA}}
\DoxyCodeLine{480 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{481 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_GIF}}
\DoxyCodeLine{482 \textcolor{preprocessor}{   \#define STBI\_NO\_GIF}}
\DoxyCodeLine{483 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{484 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_HDR}}
\DoxyCodeLine{485 \textcolor{preprocessor}{   \#define STBI\_NO\_HDR}}
\DoxyCodeLine{486 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{487 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_PIC}}
\DoxyCodeLine{488 \textcolor{preprocessor}{   \#define STBI\_NO\_PIC}}
\DoxyCodeLine{489 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{490 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_PNM}}
\DoxyCodeLine{491 \textcolor{preprocessor}{   \#define STBI\_NO\_PNM}}
\DoxyCodeLine{492 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{493 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{494 }
\DoxyCodeLine{495 \textcolor{preprocessor}{\#if defined(STBI\_NO\_PNG) \&\& !defined(STBI\_SUPPORT\_ZLIB) \&\& !defined(STBI\_NO\_ZLIB)}}
\DoxyCodeLine{496 \textcolor{preprocessor}{\#define STBI\_NO\_ZLIB}}
\DoxyCodeLine{497 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{498 }
\DoxyCodeLine{499 }
\DoxyCodeLine{500 \textcolor{preprocessor}{\#include <stdarg.h>}}
\DoxyCodeLine{501 \textcolor{preprocessor}{\#include <stddef.h>} \textcolor{comment}{// ptrdiff\_t on osx}}
\DoxyCodeLine{502 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{503 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{504 \textcolor{preprocessor}{\#include <limits.h>}}
\DoxyCodeLine{505 }
\DoxyCodeLine{506 \textcolor{preprocessor}{\#if !defined(STBI\_NO\_LINEAR) || !defined(STBI\_NO\_HDR)}}
\DoxyCodeLine{507 \textcolor{preprocessor}{\#include <math.h>}  \textcolor{comment}{// ldexp}}
\DoxyCodeLine{508 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{509 }
\DoxyCodeLine{510 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{511 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{512 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{513 }
\DoxyCodeLine{514 \textcolor{preprocessor}{\#ifndef STBI\_ASSERT}}
\DoxyCodeLine{515 \textcolor{preprocessor}{\#include <assert.h>}}
\DoxyCodeLine{516 \textcolor{preprocessor}{\#define STBI\_ASSERT(x) assert(x)}}
\DoxyCodeLine{517 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{518 }
\DoxyCodeLine{519 }
\DoxyCodeLine{520 \textcolor{preprocessor}{\#ifndef \_MSC\_VER}}
\DoxyCodeLine{521 \textcolor{preprocessor}{   \#ifdef \_\_cplusplus}}
\DoxyCodeLine{522 \textcolor{preprocessor}{   \#define stbi\_inline inline}}
\DoxyCodeLine{523 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{524 \textcolor{preprocessor}{   \#define stbi\_inline}}
\DoxyCodeLine{525 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{526 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{527 \textcolor{preprocessor}{   \#define stbi\_inline \_\_forceinline}}
\DoxyCodeLine{528 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{529 }
\DoxyCodeLine{530 }
\DoxyCodeLine{531 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{532 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} stbi\_\_uint16;}
\DoxyCodeLine{533 \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{short} stbi\_\_int16;}
\DoxyCodeLine{534 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}   stbi\_\_uint32;}
\DoxyCodeLine{535 \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{int}   stbi\_\_int32;}
\DoxyCodeLine{536 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{537 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{538 \textcolor{keyword}{typedef} uint16\_t stbi\_\_uint16;}
\DoxyCodeLine{539 \textcolor{keyword}{typedef} int16\_t  stbi\_\_int16;}
\DoxyCodeLine{540 \textcolor{keyword}{typedef} uint32\_t stbi\_\_uint32;}
\DoxyCodeLine{541 \textcolor{keyword}{typedef} int32\_t  stbi\_\_int32;}
\DoxyCodeLine{542 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{543 }
\DoxyCodeLine{544 \textcolor{comment}{// should produce compiler error if size is wrong}}
\DoxyCodeLine{545 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} validate\_uint32[\textcolor{keyword}{sizeof}(stbi\_\_uint32)==4 ? 1 : -\/1];}
\DoxyCodeLine{546 }
\DoxyCodeLine{547 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{548 \textcolor{preprocessor}{\#define STBI\_NOTUSED(v)  (void)(v)}}
\DoxyCodeLine{549 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{550 \textcolor{preprocessor}{\#define STBI\_NOTUSED(v)  (void)sizeof(v)}}
\DoxyCodeLine{551 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{552 }
\DoxyCodeLine{553 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{554 \textcolor{preprocessor}{\#define STBI\_HAS\_LROTL}}
\DoxyCodeLine{555 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{556 }
\DoxyCodeLine{557 \textcolor{preprocessor}{\#ifdef STBI\_HAS\_LROTL}}
\DoxyCodeLine{558 \textcolor{preprocessor}{   \#define stbi\_lrot(x,y)  \_lrotl(x,y)}}
\DoxyCodeLine{559 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{560 \textcolor{preprocessor}{   \#define stbi\_lrot(x,y)  (((x) << (y)) | ((x) >> (32 -\/ (y))))}}
\DoxyCodeLine{561 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{562 }
\DoxyCodeLine{563 \textcolor{preprocessor}{\#if defined(STBI\_MALLOC) \&\& defined(STBI\_FREE) \&\& (defined(STBI\_REALLOC) || defined(STBI\_REALLOC\_SIZED))}}
\DoxyCodeLine{564 \textcolor{comment}{// ok}}
\DoxyCodeLine{565 \textcolor{preprocessor}{\#elif !defined(STBI\_MALLOC) \&\& !defined(STBI\_FREE) \&\& !defined(STBI\_REALLOC) \&\& !defined(STBI\_REALLOC\_SIZED)}}
\DoxyCodeLine{566 \textcolor{comment}{// ok}}
\DoxyCodeLine{567 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{568 \textcolor{preprocessor}{\#error "{}Must define all or none of STBI\_MALLOC, STBI\_FREE, and STBI\_REALLOC (or STBI\_REALLOC\_SIZED)."{}}}
\DoxyCodeLine{569 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{570 }
\DoxyCodeLine{571 \textcolor{preprocessor}{\#ifndef STBI\_MALLOC}}
\DoxyCodeLine{572 \textcolor{preprocessor}{\#define STBI\_MALLOC(sz)           malloc(sz)}}
\DoxyCodeLine{573 \textcolor{preprocessor}{\#define STBI\_REALLOC(p,newsz)     realloc(p,newsz)}}
\DoxyCodeLine{574 \textcolor{preprocessor}{\#define STBI\_FREE(p)              free(p)}}
\DoxyCodeLine{575 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{576 }
\DoxyCodeLine{577 \textcolor{preprocessor}{\#ifndef STBI\_REALLOC\_SIZED}}
\DoxyCodeLine{578 \textcolor{preprocessor}{\#define STBI\_REALLOC\_SIZED(p,oldsz,newsz) STBI\_REALLOC(p,newsz)}}
\DoxyCodeLine{579 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{580 }
\DoxyCodeLine{581 \textcolor{comment}{// x86/x64 detection}}
\DoxyCodeLine{582 \textcolor{preprocessor}{\#if defined(\_\_x86\_64\_\_) || defined(\_M\_X64)}}
\DoxyCodeLine{583 \textcolor{preprocessor}{\#define STBI\_\_X64\_TARGET}}
\DoxyCodeLine{584 \textcolor{preprocessor}{\#elif defined(\_\_i386) || defined(\_M\_IX86)}}
\DoxyCodeLine{585 \textcolor{preprocessor}{\#define STBI\_\_X86\_TARGET}}
\DoxyCodeLine{586 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{587 }
\DoxyCodeLine{588 \textcolor{preprocessor}{\#if defined(\_\_GNUC\_\_) \&\& defined(STBI\_\_X86\_TARGET) \&\& !defined(\_\_SSE2\_\_) \&\& !defined(STBI\_NO\_SIMD)}}
\DoxyCodeLine{589 \textcolor{comment}{// gcc doesn't support sse2 intrinsics unless you compile with -\/msse2,}}
\DoxyCodeLine{590 \textcolor{comment}{// which in turn means it gets to use SSE2 everywhere. This is unfortunate,}}
\DoxyCodeLine{591 \textcolor{comment}{// but previous attempts to provide the SSE2 functions with runtime}}
\DoxyCodeLine{592 \textcolor{comment}{// detection caused numerous issues. The way architecture extensions are}}
\DoxyCodeLine{593 \textcolor{comment}{// exposed in GCC/Clang is, sadly, not really suited for one-\/file libs.}}
\DoxyCodeLine{594 \textcolor{comment}{// New behavior: if compiled with -\/msse2, we use SSE2 without any}}
\DoxyCodeLine{595 \textcolor{comment}{// detection; if not, we don't use it at all.}}
\DoxyCodeLine{596 \textcolor{preprocessor}{\#define STBI\_NO\_SIMD}}
\DoxyCodeLine{597 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{598 }
\DoxyCodeLine{599 \textcolor{preprocessor}{\#if defined(\_\_MINGW32\_\_) \&\& defined(STBI\_\_X86\_TARGET) \&\& !defined(STBI\_MINGW\_ENABLE\_SSE2) \&\& !defined(STBI\_NO\_SIMD)}}
\DoxyCodeLine{600 \textcolor{comment}{// Note that \_\_MINGW32\_\_ doesn't actually mean 32-\/bit, so we have to avoid STBI\_\_X64\_TARGET}}
\DoxyCodeLine{601 \textcolor{comment}{//}}
\DoxyCodeLine{602 \textcolor{comment}{// 32-\/bit MinGW wants ESP to be 16-\/byte aligned, but this is not in the}}
\DoxyCodeLine{603 \textcolor{comment}{// Windows ABI and VC++ as well as Windows DLLs don't maintain that invariant.}}
\DoxyCodeLine{604 \textcolor{comment}{// As a result, enabling SSE2 on 32-\/bit MinGW is dangerous when not}}
\DoxyCodeLine{605 \textcolor{comment}{// simultaneously enabling "{}-\/mstackrealign"{}.}}
\DoxyCodeLine{606 \textcolor{comment}{//}}
\DoxyCodeLine{607 \textcolor{comment}{// See https://github.com/nothings/stb/issues/81 for more information.}}
\DoxyCodeLine{608 \textcolor{comment}{//}}
\DoxyCodeLine{609 \textcolor{comment}{// So default to no SSE2 on 32-\/bit MinGW. If you've read this far and added}}
\DoxyCodeLine{610 \textcolor{comment}{// -\/mstackrealign to your build settings, feel free to \#define STBI\_MINGW\_ENABLE\_SSE2.}}
\DoxyCodeLine{611 \textcolor{preprocessor}{\#define STBI\_NO\_SIMD}}
\DoxyCodeLine{612 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{613 }
\DoxyCodeLine{614 \textcolor{preprocessor}{\#if !defined(STBI\_NO\_SIMD) \&\& (defined(STBI\_\_X86\_TARGET) || defined(STBI\_\_X64\_TARGET))}}
\DoxyCodeLine{615 \textcolor{preprocessor}{\#define STBI\_SSE2}}
\DoxyCodeLine{616 \textcolor{preprocessor}{\#include <emmintrin.h>}}
\DoxyCodeLine{617 }
\DoxyCodeLine{618 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{619 }
\DoxyCodeLine{620 \textcolor{preprocessor}{\#if \_MSC\_VER >= 1400  }\textcolor{comment}{// not VC6}}
\DoxyCodeLine{621 \textcolor{preprocessor}{\#include <intrin.h>} \textcolor{comment}{// \_\_cpuid}}
\DoxyCodeLine{622 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_cpuid3(\textcolor{keywordtype}{void})}
\DoxyCodeLine{623 \{}
\DoxyCodeLine{624    \textcolor{keywordtype}{int} \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}[4];}
\DoxyCodeLine{625    \_\_cpuid(\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}},1);}
\DoxyCodeLine{626    \textcolor{keywordflow}{return} \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}[3];}
\DoxyCodeLine{627 \}}
\DoxyCodeLine{628 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{629 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_cpuid3(\textcolor{keywordtype}{void})}
\DoxyCodeLine{630 \{}
\DoxyCodeLine{631    \textcolor{keywordtype}{int} res;}
\DoxyCodeLine{632    \_\_asm \{}
\DoxyCodeLine{633       mov  eax,1}
\DoxyCodeLine{634       cpuid}
\DoxyCodeLine{635       mov  res,edx}
\DoxyCodeLine{636    \}}
\DoxyCodeLine{637    \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{638 \}}
\DoxyCodeLine{639 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{640 }
\DoxyCodeLine{641 \textcolor{preprocessor}{\#define STBI\_SIMD\_ALIGN(type, name) \_\_declspec(align(16)) type name}}
\DoxyCodeLine{642 }
\DoxyCodeLine{643 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_sse2\_available(\textcolor{keywordtype}{void})}
\DoxyCodeLine{644 \{}
\DoxyCodeLine{645    \textcolor{keywordtype}{int} info3 = stbi\_\_cpuid3();}
\DoxyCodeLine{646    \textcolor{keywordflow}{return} ((info3 >> 26) \& 1) != 0;}
\DoxyCodeLine{647 \}}
\DoxyCodeLine{648 \textcolor{preprocessor}{\#else }\textcolor{comment}{// assume GCC-\/style if not VC++}}
\DoxyCodeLine{649 \textcolor{preprocessor}{\#define STBI\_SIMD\_ALIGN(type, name) type name \_\_attribute\_\_((aligned(16)))}}
\DoxyCodeLine{650 }
\DoxyCodeLine{651 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_sse2\_available(\textcolor{keywordtype}{void})}
\DoxyCodeLine{652 \{}
\DoxyCodeLine{653    \textcolor{comment}{// If we're even attempting to compile this on GCC/Clang, that means}}
\DoxyCodeLine{654    \textcolor{comment}{// -\/msse2 is on, which means the compiler is allowed to use SSE2}}
\DoxyCodeLine{655    \textcolor{comment}{// instructions at will, and so are we.}}
\DoxyCodeLine{656    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{657 \}}
\DoxyCodeLine{658 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{659 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{660 }
\DoxyCodeLine{661 \textcolor{comment}{// ARM NEON}}
\DoxyCodeLine{662 \textcolor{preprocessor}{\#if defined(STBI\_NO\_SIMD) \&\& defined(STBI\_NEON)}}
\DoxyCodeLine{663 \textcolor{preprocessor}{\#undef STBI\_NEON}}
\DoxyCodeLine{664 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{665 }
\DoxyCodeLine{666 \textcolor{preprocessor}{\#ifdef STBI\_NEON}}
\DoxyCodeLine{667 \textcolor{preprocessor}{\#include <arm\_neon.h>}}
\DoxyCodeLine{668 \textcolor{comment}{// assume GCC or Clang on ARM targets}}
\DoxyCodeLine{669 \textcolor{preprocessor}{\#define STBI\_SIMD\_ALIGN(type, name) type name \_\_attribute\_\_((aligned(16)))}}
\DoxyCodeLine{670 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{671 }
\DoxyCodeLine{672 \textcolor{preprocessor}{\#ifndef STBI\_SIMD\_ALIGN}}
\DoxyCodeLine{673 \textcolor{preprocessor}{\#define STBI\_SIMD\_ALIGN(type, name) type name}}
\DoxyCodeLine{674 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{675 }
\DoxyCodeLine{677 \textcolor{comment}{//}}
\DoxyCodeLine{678 \textcolor{comment}{//  stbi\_\_context struct and start\_xxx functions}}
\DoxyCodeLine{679 }
\DoxyCodeLine{680 \textcolor{comment}{// stbi\_\_context structure is our basic context used by all images, so it}}
\DoxyCodeLine{681 \textcolor{comment}{// contains all the IO context, plus some basic image information}}
\DoxyCodeLine{682 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{683 \{}
\DoxyCodeLine{684    stbi\_\_uint32 img\_x, img\_y;}
\DoxyCodeLine{685    \textcolor{keywordtype}{int} img\_n, img\_out\_n;}
\DoxyCodeLine{686 }
\DoxyCodeLine{687    \mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} io;}
\DoxyCodeLine{688    \textcolor{keywordtype}{void} *io\_user\_data;}
\DoxyCodeLine{689 }
\DoxyCodeLine{690    \textcolor{keywordtype}{int} read\_from\_callbacks;}
\DoxyCodeLine{691    \textcolor{keywordtype}{int} buflen;}
\DoxyCodeLine{692    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} buffer\_start[128];}
\DoxyCodeLine{693 }
\DoxyCodeLine{694    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *img\_buffer, *img\_buffer\_end;}
\DoxyCodeLine{695    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *img\_buffer\_original, *img\_buffer\_original\_end;}
\DoxyCodeLine{696 \} stbi\_\_context;}
\DoxyCodeLine{697 }
\DoxyCodeLine{698 }
\DoxyCodeLine{699 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_refill\_buffer(stbi\_\_context *s);}
\DoxyCodeLine{700 }
\DoxyCodeLine{701 \textcolor{comment}{// initialize a memory-\/decode context}}
\DoxyCodeLine{702 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_start\_mem(stbi\_\_context *s, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}})}
\DoxyCodeLine{703 \{}
\DoxyCodeLine{704    s-\/>io.read = NULL;}
\DoxyCodeLine{705    s-\/>read\_from\_callbacks = 0;}
\DoxyCodeLine{706    s-\/>img\_buffer = s-\/>img\_buffer\_original = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{707    s-\/>img\_buffer\_end = s-\/>img\_buffer\_original\_end = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{classbuffer}{buffer}}+\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{708 \}}
\DoxyCodeLine{709 }
\DoxyCodeLine{710 \textcolor{comment}{// initialize a callback-\/based context}}
\DoxyCodeLine{711 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_start\_callbacks(stbi\_\_context *s, \mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *c, \textcolor{keywordtype}{void} *user)}
\DoxyCodeLine{712 \{}
\DoxyCodeLine{713    s-\/>io = *c;}
\DoxyCodeLine{714    s-\/>io\_user\_data = user;}
\DoxyCodeLine{715    s-\/>buflen = \textcolor{keyword}{sizeof}(s-\/>buffer\_start);}
\DoxyCodeLine{716    s-\/>read\_from\_callbacks = 1;}
\DoxyCodeLine{717    s-\/>img\_buffer\_original = s-\/>buffer\_start;}
\DoxyCodeLine{718    stbi\_\_refill\_buffer(s);}
\DoxyCodeLine{719    s-\/>img\_buffer\_original\_end = s-\/>img\_buffer\_end;}
\DoxyCodeLine{720 \}}
\DoxyCodeLine{721 }
\DoxyCodeLine{722 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{723 }
\DoxyCodeLine{724 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_stdio\_read(\textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{char} *\mbox{\hyperlink{structdata}{data}}, \textcolor{keywordtype}{int} size)}
\DoxyCodeLine{725 \{}
\DoxyCodeLine{726    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) fread(\mbox{\hyperlink{structdata}{data}},1,size,(FILE*) user);}
\DoxyCodeLine{727 \}}
\DoxyCodeLine{728 }
\DoxyCodeLine{729 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_stdio\_skip(\textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{730 \{}
\DoxyCodeLine{731    fseek((FILE*) user, n, SEEK\_CUR);}
\DoxyCodeLine{732 \}}
\DoxyCodeLine{733 }
\DoxyCodeLine{734 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_stdio\_eof(\textcolor{keywordtype}{void} *user)}
\DoxyCodeLine{735 \{}
\DoxyCodeLine{736    \textcolor{keywordflow}{return} feof((FILE*) user);}
\DoxyCodeLine{737 \}}
\DoxyCodeLine{738 }
\DoxyCodeLine{739 \textcolor{keyword}{static} \mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} stbi\_\_stdio\_callbacks =}
\DoxyCodeLine{740 \{}
\DoxyCodeLine{741    stbi\_\_stdio\_read,}
\DoxyCodeLine{742    stbi\_\_stdio\_skip,}
\DoxyCodeLine{743    stbi\_\_stdio\_eof,}
\DoxyCodeLine{744 \};}
\DoxyCodeLine{745 }
\DoxyCodeLine{746 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_start\_file(stbi\_\_context *s, FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}})}
\DoxyCodeLine{747 \{}
\DoxyCodeLine{748    stbi\_\_start\_callbacks(s, \&stbi\_\_stdio\_callbacks, (\textcolor{keywordtype}{void} *) \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{749 \}}
\DoxyCodeLine{750 }
\DoxyCodeLine{751 \textcolor{comment}{//static void stop\_file(stbi\_\_context *s) \{ \}}}
\DoxyCodeLine{752 }
\DoxyCodeLine{753 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_STDIO}}
\DoxyCodeLine{754 }
\DoxyCodeLine{755 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_rewind(stbi\_\_context *s)}
\DoxyCodeLine{756 \{}
\DoxyCodeLine{757    \textcolor{comment}{// conceptually rewind SHOULD rewind to the beginning of the stream,}}
\DoxyCodeLine{758    \textcolor{comment}{// but we just rewind to the beginning of the initial buffer, because}}
\DoxyCodeLine{759    \textcolor{comment}{// we only use it after doing 'test', which only ever looks at at most 92 bytes}}
\DoxyCodeLine{760    s-\/>img\_buffer = s-\/>img\_buffer\_original;}
\DoxyCodeLine{761    s-\/>img\_buffer\_end = s-\/>img\_buffer\_original\_end;}
\DoxyCodeLine{762 \}}
\DoxyCodeLine{763 }
\DoxyCodeLine{764 \textcolor{keyword}{enum}}
\DoxyCodeLine{765 \{}
\DoxyCodeLine{766    STBI\_ORDER\_RGB,}
\DoxyCodeLine{767    STBI\_ORDER\_BGR}
\DoxyCodeLine{768 \};}
\DoxyCodeLine{769 }
\DoxyCodeLine{770 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{771 \{}
\DoxyCodeLine{772    \textcolor{keywordtype}{int} bits\_per\_channel;}
\DoxyCodeLine{773    \textcolor{keywordtype}{int} num\_channels;}
\DoxyCodeLine{774    \textcolor{keywordtype}{int} channel\_order;}
\DoxyCodeLine{775 \} stbi\_\_result\_info;}
\DoxyCodeLine{776 }
\DoxyCodeLine{777 \textcolor{preprocessor}{\#ifndef STBI\_NO\_JPEG}}
\DoxyCodeLine{778 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_jpeg\_test(stbi\_\_context *s);}
\DoxyCodeLine{779 \textcolor{keyword}{static} \textcolor{keywordtype}{void}    *stbi\_\_jpeg\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri);}
\DoxyCodeLine{780 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_jpeg\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{781 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{782 }
\DoxyCodeLine{783 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNG}}
\DoxyCodeLine{784 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_png\_test(stbi\_\_context *s);}
\DoxyCodeLine{785 \textcolor{keyword}{static} \textcolor{keywordtype}{void}    *stbi\_\_png\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri);}
\DoxyCodeLine{786 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_png\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{787 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{788 }
\DoxyCodeLine{789 \textcolor{preprocessor}{\#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{790 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_bmp\_test(stbi\_\_context *s);}
\DoxyCodeLine{791 \textcolor{keyword}{static} \textcolor{keywordtype}{void}    *stbi\_\_bmp\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri);}
\DoxyCodeLine{792 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_bmp\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{793 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{794 }
\DoxyCodeLine{795 \textcolor{preprocessor}{\#ifndef STBI\_NO\_TGA}}
\DoxyCodeLine{796 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_tga\_test(stbi\_\_context *s);}
\DoxyCodeLine{797 \textcolor{keyword}{static} \textcolor{keywordtype}{void}    *stbi\_\_tga\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri);}
\DoxyCodeLine{798 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_tga\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{799 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{800 }
\DoxyCodeLine{801 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{802 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_psd\_test(stbi\_\_context *s);}
\DoxyCodeLine{803 \textcolor{keyword}{static} \textcolor{keywordtype}{void}    *stbi\_\_psd\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri, \textcolor{keywordtype}{int} bpc);}
\DoxyCodeLine{804 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_psd\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{805 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{806 }
\DoxyCodeLine{807 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{808 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_hdr\_test(stbi\_\_context *s);}
\DoxyCodeLine{809 \textcolor{keyword}{static} \textcolor{keywordtype}{float}   *stbi\_\_hdr\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri);}
\DoxyCodeLine{810 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_hdr\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{811 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{812 }
\DoxyCodeLine{813 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{814 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pic\_test(stbi\_\_context *s);}
\DoxyCodeLine{815 \textcolor{keyword}{static} \textcolor{keywordtype}{void}    *stbi\_\_pic\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri);}
\DoxyCodeLine{816 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pic\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{817 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{818 }
\DoxyCodeLine{819 \textcolor{preprocessor}{\#ifndef STBI\_NO\_GIF}}
\DoxyCodeLine{820 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_gif\_test(stbi\_\_context *s);}
\DoxyCodeLine{821 \textcolor{keyword}{static} \textcolor{keywordtype}{void}    *stbi\_\_gif\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri);}
\DoxyCodeLine{822 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_gif\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{823 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{824 }
\DoxyCodeLine{825 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{826 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_test(stbi\_\_context *s);}
\DoxyCodeLine{827 \textcolor{keyword}{static} \textcolor{keywordtype}{void}    *stbi\_\_pnm\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri);}
\DoxyCodeLine{828 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{829 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{830 }
\DoxyCodeLine{831 \textcolor{comment}{// this is not threadsafe}}
\DoxyCodeLine{832 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *stbi\_\_g\_failure\_reason;}
\DoxyCodeLine{833 }
\DoxyCodeLine{834 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_ac72f312f610a7df1519ea0f2a2f94be9}{stbi\_failure\_reason}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{835 \{}
\DoxyCodeLine{836    \textcolor{keywordflow}{return} stbi\_\_g\_failure\_reason;}
\DoxyCodeLine{837 \}}
\DoxyCodeLine{838 }
\DoxyCodeLine{839 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_err(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classstr}{str}})}
\DoxyCodeLine{840 \{}
\DoxyCodeLine{841    stbi\_\_g\_failure\_reason = \mbox{\hyperlink{classstr}{str}};}
\DoxyCodeLine{842    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{843 \}}
\DoxyCodeLine{844 }
\DoxyCodeLine{845 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_malloc(\textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{846 \{}
\DoxyCodeLine{847     \textcolor{keywordflow}{return} STBI\_MALLOC(size);}
\DoxyCodeLine{848 \}}
\DoxyCodeLine{849 }
\DoxyCodeLine{850 \textcolor{comment}{// stb\_image uses ints pervasively, including for offset calculations.}}
\DoxyCodeLine{851 \textcolor{comment}{// therefore the largest decoded image size we can support with the}}
\DoxyCodeLine{852 \textcolor{comment}{// current code, even on 64-\/bit targets, is INT\_MAX. this is not a}}
\DoxyCodeLine{853 \textcolor{comment}{// significant limitation for the intended use case.}}
\DoxyCodeLine{854 \textcolor{comment}{//}}
\DoxyCodeLine{855 \textcolor{comment}{// we do, however, need to make sure our size calculations don't}}
\DoxyCodeLine{856 \textcolor{comment}{// overflow. hence a few helper functions for size calculations that}}
\DoxyCodeLine{857 \textcolor{comment}{// multiply integers together, making sure that they're non-\/negative}}
\DoxyCodeLine{858 \textcolor{comment}{// and no overflow occurs.}}
\DoxyCodeLine{859 }
\DoxyCodeLine{860 \textcolor{comment}{// return 1 if the sum is valid, 0 on overflow.}}
\DoxyCodeLine{861 \textcolor{comment}{// negative terms are considered invalid.}}
\DoxyCodeLine{862 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_addsizes\_valid(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b)}
\DoxyCodeLine{863 \{}
\DoxyCodeLine{864    \textcolor{keywordflow}{if} (b < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{865    \textcolor{comment}{// now 0 <= b <= INT\_MAX, hence also}}
\DoxyCodeLine{866    \textcolor{comment}{// 0 <= INT\_MAX -\/ b <= INTMAX.}}
\DoxyCodeLine{867    \textcolor{comment}{// And "{}a + b <= INT\_MAX"{} (which might overflow) is the}}
\DoxyCodeLine{868    \textcolor{comment}{// same as a <= INT\_MAX -\/ b (no overflow)}}
\DoxyCodeLine{869    \textcolor{keywordflow}{return} a <= INT\_MAX -\/ b;}
\DoxyCodeLine{870 \}}
\DoxyCodeLine{871 }
\DoxyCodeLine{872 \textcolor{comment}{// returns 1 if the product is valid, 0 on overflow.}}
\DoxyCodeLine{873 \textcolor{comment}{// negative factors are considered invalid.}}
\DoxyCodeLine{874 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_mul2sizes\_valid(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b)}
\DoxyCodeLine{875 \{}
\DoxyCodeLine{876    \textcolor{keywordflow}{if} (a < 0 || b < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{877    \textcolor{keywordflow}{if} (b == 0) \textcolor{keywordflow}{return} 1; \textcolor{comment}{// mul-\/by-\/0 is always safe}}
\DoxyCodeLine{878    \textcolor{comment}{// portable way to check for no overflows in a*b}}
\DoxyCodeLine{879    \textcolor{keywordflow}{return} a <= INT\_MAX/b;}
\DoxyCodeLine{880 \}}
\DoxyCodeLine{881 }
\DoxyCodeLine{882 \textcolor{comment}{// returns 1 if "{}a*b + add"{} has no negative terms/factors and doesn't overflow}}
\DoxyCodeLine{883 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_mad2sizes\_valid(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b, \textcolor{keywordtype}{int} add)}
\DoxyCodeLine{884 \{}
\DoxyCodeLine{885    \textcolor{keywordflow}{return} stbi\_\_mul2sizes\_valid(a, b) \&\& stbi\_\_addsizes\_valid(a*b, add);}
\DoxyCodeLine{886 \}}
\DoxyCodeLine{887 }
\DoxyCodeLine{888 \textcolor{comment}{// returns 1 if "{}a*b*c + add"{} has no negative terms/factors and doesn't overflow}}
\DoxyCodeLine{889 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_mad3sizes\_valid(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b, \textcolor{keywordtype}{int} c, \textcolor{keywordtype}{int} add)}
\DoxyCodeLine{890 \{}
\DoxyCodeLine{891    \textcolor{keywordflow}{return} stbi\_\_mul2sizes\_valid(a, b) \&\& stbi\_\_mul2sizes\_valid(a*b, c) \&\&}
\DoxyCodeLine{892       stbi\_\_addsizes\_valid(a*b*c, add);}
\DoxyCodeLine{893 \}}
\DoxyCodeLine{894 }
\DoxyCodeLine{895 \textcolor{comment}{// returns 1 if "{}a*b*c*d + add"{} has no negative terms/factors and doesn't overflow}}
\DoxyCodeLine{896 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_mad4sizes\_valid(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b, \textcolor{keywordtype}{int} c, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}, \textcolor{keywordtype}{int} add)}
\DoxyCodeLine{897 \{}
\DoxyCodeLine{898    \textcolor{keywordflow}{return} stbi\_\_mul2sizes\_valid(a, b) \&\& stbi\_\_mul2sizes\_valid(a*b, c) \&\&}
\DoxyCodeLine{899       stbi\_\_mul2sizes\_valid(a*b*c, \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}) \&\& stbi\_\_addsizes\_valid(a*b*c*\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}, add);}
\DoxyCodeLine{900 \}}
\DoxyCodeLine{901 }
\DoxyCodeLine{902 \textcolor{comment}{// mallocs with size overflow checking}}
\DoxyCodeLine{903 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_malloc\_mad2(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b, \textcolor{keywordtype}{int} add)}
\DoxyCodeLine{904 \{}
\DoxyCodeLine{905    \textcolor{keywordflow}{if} (!stbi\_\_mad2sizes\_valid(a, b, add)) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{906    \textcolor{keywordflow}{return} stbi\_\_malloc(a*b + add);}
\DoxyCodeLine{907 \}}
\DoxyCodeLine{908 }
\DoxyCodeLine{909 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_malloc\_mad3(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b, \textcolor{keywordtype}{int} c, \textcolor{keywordtype}{int} add)}
\DoxyCodeLine{910 \{}
\DoxyCodeLine{911    \textcolor{keywordflow}{if} (!stbi\_\_mad3sizes\_valid(a, b, c, add)) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{912    \textcolor{keywordflow}{return} stbi\_\_malloc(a*b*c + add);}
\DoxyCodeLine{913 \}}
\DoxyCodeLine{914 }
\DoxyCodeLine{915 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_malloc\_mad4(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b, \textcolor{keywordtype}{int} c, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}, \textcolor{keywordtype}{int} add)}
\DoxyCodeLine{916 \{}
\DoxyCodeLine{917    \textcolor{keywordflow}{if} (!stbi\_\_mad4sizes\_valid(a, b, c, \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}, add)) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{918    \textcolor{keywordflow}{return} stbi\_\_malloc(a*b*c*\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}} + add);}
\DoxyCodeLine{919 \}}
\DoxyCodeLine{920 }
\DoxyCodeLine{921 \textcolor{comment}{// stbi\_\_err -\/ error}}
\DoxyCodeLine{922 \textcolor{comment}{// stbi\_\_errpf -\/ error returning pointer to float}}
\DoxyCodeLine{923 \textcolor{comment}{// stbi\_\_errpuc -\/ error returning pointer to unsigned char}}
\DoxyCodeLine{924 }
\DoxyCodeLine{925 \textcolor{preprocessor}{\#ifdef STBI\_NO\_FAILURE\_STRINGS}}
\DoxyCodeLine{926 \textcolor{preprocessor}{   \#define stbi\_\_err(x,y)  0}}
\DoxyCodeLine{927 \textcolor{preprocessor}{\#elif defined(STBI\_FAILURE\_USERMSG)}}
\DoxyCodeLine{928 \textcolor{preprocessor}{   \#define stbi\_\_err(x,y)  stbi\_\_err(y)}}
\DoxyCodeLine{929 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{930 \textcolor{preprocessor}{   \#define stbi\_\_err(x,y)  stbi\_\_err(x)}}
\DoxyCodeLine{931 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{932 }
\DoxyCodeLine{933 \textcolor{preprocessor}{\#define stbi\_\_errpf(x,y)   ((float *)(size\_t) (stbi\_\_err(x,y)?NULL:NULL))}}
\DoxyCodeLine{934 \textcolor{preprocessor}{\#define stbi\_\_errpuc(x,y)  ((unsigned char *)(size\_t) (stbi\_\_err(x,y)?NULL:NULL))}}
\DoxyCodeLine{935 }
\DoxyCodeLine{936 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_ad3e11bb44412a7ba348acfbad09caacb}{stbi\_image\_free}}(\textcolor{keywordtype}{void} *retval\_from\_stbi\_load)}
\DoxyCodeLine{937 \{}
\DoxyCodeLine{938    STBI\_FREE(retval\_from\_stbi\_load);}
\DoxyCodeLine{939 \}}
\DoxyCodeLine{940 }
\DoxyCodeLine{941 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{942 \textcolor{keyword}{static} \textcolor{keywordtype}{float}   *stbi\_\_ldr\_to\_hdr(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structdata}{data}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} comp);}
\DoxyCodeLine{943 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{944 }
\DoxyCodeLine{945 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{946 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_hdr\_to\_ldr(\textcolor{keywordtype}{float}   *\mbox{\hyperlink{structdata}{data}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} comp);}
\DoxyCodeLine{947 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{948 }
\DoxyCodeLine{949 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_vertically\_flip\_on\_load = 0;}
\DoxyCodeLine{950 }
\DoxyCodeLine{951 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_ab89c177fc52f1bb2dc1c05e48129a0a4}{stbi\_set\_flip\_vertically\_on\_load}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_flip)}
\DoxyCodeLine{952 \{}
\DoxyCodeLine{953     stbi\_\_vertically\_flip\_on\_load = flag\_true\_if\_should\_flip;}
\DoxyCodeLine{954 \}}
\DoxyCodeLine{955 }
\DoxyCodeLine{956 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_load\_main(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri, \textcolor{keywordtype}{int} bpc)}
\DoxyCodeLine{957 \{}
\DoxyCodeLine{958    memset(ri, 0, \textcolor{keyword}{sizeof}(*ri)); \textcolor{comment}{// make sure it's initialized if we add new fields}}
\DoxyCodeLine{959    ri-\/>bits\_per\_channel = 8; \textcolor{comment}{// default is 8 so most paths don't have to be changed}}
\DoxyCodeLine{960    ri-\/>channel\_order = STBI\_ORDER\_RGB; \textcolor{comment}{// all current input \& output are this, but this is here so we can add BGR order}}
\DoxyCodeLine{961    ri-\/>num\_channels = 0;}
\DoxyCodeLine{962 }
\DoxyCodeLine{963 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_JPEG}}
\DoxyCodeLine{964    \textcolor{keywordflow}{if} (stbi\_\_jpeg\_test(s)) \textcolor{keywordflow}{return} stbi\_\_jpeg\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{965 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{966 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PNG}}
\DoxyCodeLine{967    \textcolor{keywordflow}{if} (stbi\_\_png\_test(s))  \textcolor{keywordflow}{return} stbi\_\_png\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{968 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{969 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{970    \textcolor{keywordflow}{if} (stbi\_\_bmp\_test(s))  \textcolor{keywordflow}{return} stbi\_\_bmp\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{971 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{972 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_GIF}}
\DoxyCodeLine{973    \textcolor{keywordflow}{if} (stbi\_\_gif\_test(s))  \textcolor{keywordflow}{return} stbi\_\_gif\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{974 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{975 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{976    \textcolor{keywordflow}{if} (stbi\_\_psd\_test(s))  \textcolor{keywordflow}{return} stbi\_\_psd\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri, bpc);}
\DoxyCodeLine{977 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{978 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{979    \textcolor{keywordflow}{if} (stbi\_\_pic\_test(s))  \textcolor{keywordflow}{return} stbi\_\_pic\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{980 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{981 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{982    \textcolor{keywordflow}{if} (stbi\_\_pnm\_test(s))  \textcolor{keywordflow}{return} stbi\_\_pnm\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{983 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{984 }
\DoxyCodeLine{985 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{986    \textcolor{keywordflow}{if} (stbi\_\_hdr\_test(s)) \{}
\DoxyCodeLine{987       \textcolor{keywordtype}{float} *hdr = stbi\_\_hdr\_load(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{988       \textcolor{keywordflow}{return} stbi\_\_hdr\_to\_ldr(hdr, *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, req\_comp ? req\_comp : *comp);}
\DoxyCodeLine{989    \}}
\DoxyCodeLine{990 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{991 }
\DoxyCodeLine{992 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_TGA}}
\DoxyCodeLine{993    \textcolor{comment}{// test tga last because it's a crappy test!}}
\DoxyCodeLine{994    \textcolor{keywordflow}{if} (stbi\_\_tga\_test(s))}
\DoxyCodeLine{995       \textcolor{keywordflow}{return} stbi\_\_tga\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{996 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{997 }
\DoxyCodeLine{998    \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}unknown image type"{}}, \textcolor{stringliteral}{"{}Image not of any known type, or corrupt"{}});}
\DoxyCodeLine{999 \}}
\DoxyCodeLine{1000 }
\DoxyCodeLine{1001 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_convert\_16\_to\_8(stbi\_\_uint16 *orig, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} h, \textcolor{keywordtype}{int} channels)}
\DoxyCodeLine{1002 \{}
\DoxyCodeLine{1003    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1004    \textcolor{keywordtype}{int} img\_len = \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} * h * channels;}
\DoxyCodeLine{1005    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *reduced;}
\DoxyCodeLine{1006 }
\DoxyCodeLine{1007    reduced = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(img\_len);}
\DoxyCodeLine{1008    \textcolor{keywordflow}{if} (reduced == NULL) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{1009 }
\DoxyCodeLine{1010    \textcolor{keywordflow}{for} (i = 0; i < img\_len; ++i)}
\DoxyCodeLine{1011       reduced[i] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})((orig[i] >> 8) \& 0xFF); \textcolor{comment}{// top half of each byte is sufficient approx of 16-\/>8 bit scaling}}
\DoxyCodeLine{1012 }
\DoxyCodeLine{1013    STBI\_FREE(orig);}
\DoxyCodeLine{1014    \textcolor{keywordflow}{return} reduced;}
\DoxyCodeLine{1015 \}}
\DoxyCodeLine{1016 }
\DoxyCodeLine{1017 \textcolor{keyword}{static} stbi\_\_uint16 *stbi\_\_convert\_8\_to\_16(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *orig, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} h, \textcolor{keywordtype}{int} channels)}
\DoxyCodeLine{1018 \{}
\DoxyCodeLine{1019    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1020    \textcolor{keywordtype}{int} img\_len = \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} * h * channels;}
\DoxyCodeLine{1021    stbi\_\_uint16 *enlarged;}
\DoxyCodeLine{1022 }
\DoxyCodeLine{1023    enlarged = (stbi\_\_uint16 *) stbi\_\_malloc(img\_len*2);}
\DoxyCodeLine{1024    \textcolor{keywordflow}{if} (enlarged == NULL) \textcolor{keywordflow}{return} (stbi\_\_uint16 *) stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{1025 }
\DoxyCodeLine{1026    \textcolor{keywordflow}{for} (i = 0; i < img\_len; ++i)}
\DoxyCodeLine{1027       enlarged[i] = (stbi\_\_uint16)((orig[i] << 8) + orig[i]); \textcolor{comment}{// replicate to high and low byte, maps 0-\/>0, 255-\/>0xffff}}
\DoxyCodeLine{1028 }
\DoxyCodeLine{1029    STBI\_FREE(orig);}
\DoxyCodeLine{1030    \textcolor{keywordflow}{return} enlarged;}
\DoxyCodeLine{1031 \}}
\DoxyCodeLine{1032 }
\DoxyCodeLine{1033 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_vertical\_flip(\textcolor{keywordtype}{void} *\mbox{\hyperlink{structimage}{image}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} h, \textcolor{keywordtype}{int} bytes\_per\_pixel)}
\DoxyCodeLine{1034 \{}
\DoxyCodeLine{1035    \textcolor{keywordtype}{int} row;}
\DoxyCodeLine{1036    \textcolor{keywordtype}{size\_t} bytes\_per\_row = (\mbox{\hyperlink{detail_2common_8h_a801d6a451a01953ef8cbae6feb6a3638}{size\_t}})\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} * bytes\_per\_pixel;}
\DoxyCodeLine{1037    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} temp[2048];}
\DoxyCodeLine{1038    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{classbytes}{bytes}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *)\mbox{\hyperlink{structimage}{image}};}
\DoxyCodeLine{1039 }
\DoxyCodeLine{1040    \textcolor{keywordflow}{for} (row = 0; row < (h>>1); row++) \{}
\DoxyCodeLine{1041       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *row0 = \mbox{\hyperlink{classbytes}{bytes}} + row*bytes\_per\_row;}
\DoxyCodeLine{1042       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *row1 = \mbox{\hyperlink{classbytes}{bytes}} + (h -\/ row -\/ 1)*bytes\_per\_row;}
\DoxyCodeLine{1043       \textcolor{comment}{// swap row0 with row1}}
\DoxyCodeLine{1044       \textcolor{keywordtype}{size\_t} bytes\_left = bytes\_per\_row;}
\DoxyCodeLine{1045       \textcolor{keywordflow}{while} (bytes\_left) \{}
\DoxyCodeLine{1046          \textcolor{keywordtype}{size\_t} bytes\_copy = (bytes\_left < \textcolor{keyword}{sizeof}(temp)) ? bytes\_left : \textcolor{keyword}{sizeof}(temp);}
\DoxyCodeLine{1047          memcpy(temp, row0, bytes\_copy);}
\DoxyCodeLine{1048          memcpy(row0, row1, bytes\_copy);}
\DoxyCodeLine{1049          memcpy(row1, temp, bytes\_copy);}
\DoxyCodeLine{1050          row0 += bytes\_copy;}
\DoxyCodeLine{1051          row1 += bytes\_copy;}
\DoxyCodeLine{1052          bytes\_left -\/= bytes\_copy;}
\DoxyCodeLine{1053       \}}
\DoxyCodeLine{1054    \}}
\DoxyCodeLine{1055 \}}
\DoxyCodeLine{1056 }
\DoxyCodeLine{1057 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbi\_\_load\_and\_postprocess\_8bit(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1058 \{}
\DoxyCodeLine{1059    stbi\_\_result\_info ri;}
\DoxyCodeLine{1060    \textcolor{keywordtype}{void} *result = stbi\_\_load\_main(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp, req\_comp, \&ri, 8);}
\DoxyCodeLine{1061 }
\DoxyCodeLine{1062    \textcolor{keywordflow}{if} (result == NULL)}
\DoxyCodeLine{1063       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{1064 }
\DoxyCodeLine{1065    \textcolor{keywordflow}{if} (ri.bits\_per\_channel != 8) \{}
\DoxyCodeLine{1066       STBI\_ASSERT(ri.bits\_per\_channel == 16);}
\DoxyCodeLine{1067       result = stbi\_\_convert\_16\_to\_8((stbi\_\_uint16 *) result, *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, req\_comp == 0 ? *comp : req\_comp);}
\DoxyCodeLine{1068       ri.bits\_per\_channel = 8;}
\DoxyCodeLine{1069    \}}
\DoxyCodeLine{1070 }
\DoxyCodeLine{1071    \textcolor{comment}{// @TODO: move stbi\_\_convert\_format to here}}
\DoxyCodeLine{1072 }
\DoxyCodeLine{1073    \textcolor{keywordflow}{if} (stbi\_\_vertically\_flip\_on\_load) \{}
\DoxyCodeLine{1074       \textcolor{keywordtype}{int} channels = req\_comp ? req\_comp : *comp;}
\DoxyCodeLine{1075       stbi\_\_vertical\_flip(result, *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, channels * \textcolor{keyword}{sizeof}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}));}
\DoxyCodeLine{1076    \}}
\DoxyCodeLine{1077 }
\DoxyCodeLine{1078    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) result;}
\DoxyCodeLine{1079 \}}
\DoxyCodeLine{1080 }
\DoxyCodeLine{1081 \textcolor{keyword}{static} stbi\_\_uint16 *stbi\_\_load\_and\_postprocess\_16bit(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1082 \{}
\DoxyCodeLine{1083    stbi\_\_result\_info ri;}
\DoxyCodeLine{1084    \textcolor{keywordtype}{void} *result = stbi\_\_load\_main(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp, req\_comp, \&ri, 16);}
\DoxyCodeLine{1085 }
\DoxyCodeLine{1086    \textcolor{keywordflow}{if} (result == NULL)}
\DoxyCodeLine{1087       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{1088 }
\DoxyCodeLine{1089    \textcolor{keywordflow}{if} (ri.bits\_per\_channel != 16) \{}
\DoxyCodeLine{1090       STBI\_ASSERT(ri.bits\_per\_channel == 8);}
\DoxyCodeLine{1091       result = stbi\_\_convert\_8\_to\_16((\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) result, *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, req\_comp == 0 ? *comp : req\_comp);}
\DoxyCodeLine{1092       ri.bits\_per\_channel = 16;}
\DoxyCodeLine{1093    \}}
\DoxyCodeLine{1094 }
\DoxyCodeLine{1095    \textcolor{comment}{// @TODO: move stbi\_\_convert\_format16 to here}}
\DoxyCodeLine{1096    \textcolor{comment}{// @TODO: special case RGB-\/to-\/Y (and RGBA-\/to-\/YA) for 8-\/bit-\/to-\/16-\/bit case to keep more precision}}
\DoxyCodeLine{1097 }
\DoxyCodeLine{1098    \textcolor{keywordflow}{if} (stbi\_\_vertically\_flip\_on\_load) \{}
\DoxyCodeLine{1099       \textcolor{keywordtype}{int} channels = req\_comp ? req\_comp : *comp;}
\DoxyCodeLine{1100       stbi\_\_vertical\_flip(result, *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, channels * \textcolor{keyword}{sizeof}(stbi\_\_uint16));}
\DoxyCodeLine{1101    \}}
\DoxyCodeLine{1102 }
\DoxyCodeLine{1103    \textcolor{keywordflow}{return} (stbi\_\_uint16 *) result;}
\DoxyCodeLine{1104 \}}
\DoxyCodeLine{1105 }
\DoxyCodeLine{1106 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1107 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_float\_postprocess(\textcolor{keywordtype}{float} *result, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1108 \{}
\DoxyCodeLine{1109    \textcolor{keywordflow}{if} (stbi\_\_vertically\_flip\_on\_load \&\& result != NULL) \{}
\DoxyCodeLine{1110       \textcolor{keywordtype}{int} channels = req\_comp ? req\_comp : *comp;}
\DoxyCodeLine{1111       stbi\_\_vertical\_flip(result, *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, channels * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}));}
\DoxyCodeLine{1112    \}}
\DoxyCodeLine{1113 \}}
\DoxyCodeLine{1114 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1115 }
\DoxyCodeLine{1116 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{1117 }
\DoxyCodeLine{1118 \textcolor{keyword}{static} FILE *stbi\_\_fopen(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{char} \textcolor{keyword}{const} *mode)}
\DoxyCodeLine{1119 \{}
\DoxyCodeLine{1120    FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}};}
\DoxyCodeLine{1121 \textcolor{preprocessor}{\#if defined(\_MSC\_VER) \&\& \_MSC\_VER >= 1400}}
\DoxyCodeLine{1122    \textcolor{keywordflow}{if} (0 != fopen\_s(\&\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, filename, mode))}
\DoxyCodeLine{1123       \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}=0;}
\DoxyCodeLine{1124 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{1125    \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}} = fopen(filename, mode);}
\DoxyCodeLine{1126 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1127    \textcolor{keywordflow}{return} \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}};}
\DoxyCodeLine{1128 \}}
\DoxyCodeLine{1129 }
\DoxyCodeLine{1130 }
\DoxyCodeLine{1131 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_ad3fc296ba0778df0a8094e20da82deab}{stbi\_load}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1132 \{}
\DoxyCodeLine{1133    FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}} = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{1134    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *result;}
\DoxyCodeLine{1135    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}can't fopen"{}}, \textcolor{stringliteral}{"{}Unable to open file"{}});}
\DoxyCodeLine{1136    result = \mbox{\hyperlink{stb__image_8h_a093f86b90423ff020846c6d002c3296c}{stbi\_load\_from\_file}}(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}},\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1137    fclose(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1138    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1139 \}}
\DoxyCodeLine{1140 }
\DoxyCodeLine{1141 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a093f86b90423ff020846c6d002c3296c}{stbi\_load\_from\_file}}(FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1142 \{}
\DoxyCodeLine{1143    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *result;}
\DoxyCodeLine{1144    stbi\_\_context s;}
\DoxyCodeLine{1145    stbi\_\_start\_file(\&s,\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1146    result = stbi\_\_load\_and\_postprocess\_8bit(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1147    \textcolor{keywordflow}{if} (result) \{}
\DoxyCodeLine{1148       \textcolor{comment}{// need to 'unget' all the characters in the IO buffer}}
\DoxyCodeLine{1149       fseek(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, -\/ (\textcolor{keywordtype}{int}) (s.img\_buffer\_end -\/ s.img\_buffer), SEEK\_CUR);}
\DoxyCodeLine{1150    \}}
\DoxyCodeLine{1151    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1152 \}}
\DoxyCodeLine{1153 }
\DoxyCodeLine{1154 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} stbi\_\_uint16 *\mbox{\hyperlink{stb__image_8h_a077867644e156572eaf54d118f65e5a1}{stbi\_load\_from\_file\_16}}(FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1155 \{}
\DoxyCodeLine{1156    stbi\_\_uint16 *result;}
\DoxyCodeLine{1157    stbi\_\_context s;}
\DoxyCodeLine{1158    stbi\_\_start\_file(\&s,\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1159    result = stbi\_\_load\_and\_postprocess\_16bit(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1160    \textcolor{keywordflow}{if} (result) \{}
\DoxyCodeLine{1161       \textcolor{comment}{// need to 'unget' all the characters in the IO buffer}}
\DoxyCodeLine{1162       fseek(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, -\/ (\textcolor{keywordtype}{int}) (s.img\_buffer\_end -\/ s.img\_buffer), SEEK\_CUR);}
\DoxyCodeLine{1163    \}}
\DoxyCodeLine{1164    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1165 \}}
\DoxyCodeLine{1166 }
\DoxyCodeLine{1167 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}} *\mbox{\hyperlink{stb__image_8h_a2202a8c0f947dd555c286f7fee1fc39d}{stbi\_load\_16}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1168 \{}
\DoxyCodeLine{1169    FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}} = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{1170    stbi\_\_uint16 *result;}
\DoxyCodeLine{1171    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}) \textcolor{keywordflow}{return} (\mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}} *) stbi\_\_errpuc(\textcolor{stringliteral}{"{}can't fopen"{}}, \textcolor{stringliteral}{"{}Unable to open file"{}});}
\DoxyCodeLine{1172    result = \mbox{\hyperlink{stb__image_8h_a077867644e156572eaf54d118f65e5a1}{stbi\_load\_from\_file\_16}}(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}},\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1173    fclose(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1174    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1175 \}}
\DoxyCodeLine{1176 }
\DoxyCodeLine{1177 }
\DoxyCodeLine{1178 \textcolor{preprocessor}{\#endif }}
\DoxyCodeLine{1179 }
\DoxyCodeLine{1180 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}} *\mbox{\hyperlink{stb__image_8h_a2ce4a73cca165fd30e0a23d012d8e770}{stbi\_load\_16\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels)}
\DoxyCodeLine{1181 \{}
\DoxyCodeLine{1182    stbi\_\_context s;}
\DoxyCodeLine{1183    stbi\_\_start\_mem(\&s,\mbox{\hyperlink{classbuffer}{buffer}},\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{1184    \textcolor{keywordflow}{return} stbi\_\_load\_and\_postprocess\_16bit(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},channels\_in\_file,desired\_channels);}
\DoxyCodeLine{1185 \}}
\DoxyCodeLine{1186 }
\DoxyCodeLine{1187 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a648037d4c55689328ba08c8f5d293df2}{stbi\_us}} *\mbox{\hyperlink{stb__image_8h_aa93c0e91f15bf7b1aca8369bf39c5e41}{stbi\_load\_16\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *channels\_in\_file, \textcolor{keywordtype}{int} desired\_channels)}
\DoxyCodeLine{1188 \{}
\DoxyCodeLine{1189    stbi\_\_context s;}
\DoxyCodeLine{1190    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *)clbk, user);}
\DoxyCodeLine{1191    \textcolor{keywordflow}{return} stbi\_\_load\_and\_postprocess\_16bit(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},channels\_in\_file,desired\_channels);}
\DoxyCodeLine{1192 \}}
\DoxyCodeLine{1193 }
\DoxyCodeLine{1194 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a5bf9d78a27dc1cb216005798fb704bdf}{stbi\_load\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1195 \{}
\DoxyCodeLine{1196    stbi\_\_context s;}
\DoxyCodeLine{1197    stbi\_\_start\_mem(\&s,\mbox{\hyperlink{classbuffer}{buffer}},\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{1198    \textcolor{keywordflow}{return} stbi\_\_load\_and\_postprocess\_8bit(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1199 \}}
\DoxyCodeLine{1200 }
\DoxyCodeLine{1201 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a354f2a6f7939cf1792db087ad3b2220a}{stbi\_load\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1202 \{}
\DoxyCodeLine{1203    stbi\_\_context s;}
\DoxyCodeLine{1204    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *) clbk, user);}
\DoxyCodeLine{1205    \textcolor{keywordflow}{return} stbi\_\_load\_and\_postprocess\_8bit(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1206 \}}
\DoxyCodeLine{1207 }
\DoxyCodeLine{1208 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{1209 \textcolor{keyword}{static} \textcolor{keywordtype}{float} *stbi\_\_loadf\_main(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1210 \{}
\DoxyCodeLine{1211    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\mbox{\hyperlink{darknet_8h_a493583f6fc164cf849745e01e4c04ab5}{data}};}
\DoxyCodeLine{1212 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1213    \textcolor{keywordflow}{if} (stbi\_\_hdr\_test(s)) \{}
\DoxyCodeLine{1214       stbi\_\_result\_info ri;}
\DoxyCodeLine{1215       \textcolor{keywordtype}{float} *hdr\_data = stbi\_\_hdr\_load(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, \&ri);}
\DoxyCodeLine{1216       \textcolor{keywordflow}{if} (hdr\_data)}
\DoxyCodeLine{1217          stbi\_\_float\_postprocess(hdr\_data,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1218       \textcolor{keywordflow}{return} hdr\_data;}
\DoxyCodeLine{1219    \}}
\DoxyCodeLine{1220 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1221    \mbox{\hyperlink{structdata}{data}} = stbi\_\_load\_and\_postprocess\_8bit(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp, req\_comp);}
\DoxyCodeLine{1222    \textcolor{keywordflow}{if} (\mbox{\hyperlink{structdata}{data}})}
\DoxyCodeLine{1223       \textcolor{keywordflow}{return} stbi\_\_ldr\_to\_hdr(\mbox{\hyperlink{structdata}{data}}, *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, req\_comp ? req\_comp : *comp);}
\DoxyCodeLine{1224    \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}unknown image type"{}}, \textcolor{stringliteral}{"{}Image not of any known type, or corrupt"{}});}
\DoxyCodeLine{1225 \}}
\DoxyCodeLine{1226 }
\DoxyCodeLine{1227 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a09c9f8ddfda96cc62461b86daccf0f77}{stbi\_loadf\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1228 \{}
\DoxyCodeLine{1229    stbi\_\_context s;}
\DoxyCodeLine{1230    stbi\_\_start\_mem(\&s,\mbox{\hyperlink{classbuffer}{buffer}},\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{1231    \textcolor{keywordflow}{return} stbi\_\_loadf\_main(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1232 \}}
\DoxyCodeLine{1233 }
\DoxyCodeLine{1234 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a7573a229fe25afc452dffddbded8e5a8}{stbi\_loadf\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1235 \{}
\DoxyCodeLine{1236    stbi\_\_context s;}
\DoxyCodeLine{1237    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *) clbk, user);}
\DoxyCodeLine{1238    \textcolor{keywordflow}{return} stbi\_\_loadf\_main(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1239 \}}
\DoxyCodeLine{1240 }
\DoxyCodeLine{1241 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{1242 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a4fe9e7c92b7f8e8df8939b776a49cfa8}{stbi\_loadf}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1243 \{}
\DoxyCodeLine{1244    \textcolor{keywordtype}{float} *result;}
\DoxyCodeLine{1245    FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}} = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{1246    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}) \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}can't fopen"{}}, \textcolor{stringliteral}{"{}Unable to open file"{}});}
\DoxyCodeLine{1247    result = \mbox{\hyperlink{stb__image_8h_a9099e31f34506c8630d58b737aa5a049}{stbi\_loadf\_from\_file}}(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}},\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1248    fclose(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1249    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1250 \}}
\DoxyCodeLine{1251 }
\DoxyCodeLine{1252 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a9099e31f34506c8630d58b737aa5a049}{stbi\_loadf\_from\_file}}(FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1253 \{}
\DoxyCodeLine{1254    stbi\_\_context s;}
\DoxyCodeLine{1255    stbi\_\_start\_file(\&s,\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1256    \textcolor{keywordflow}{return} stbi\_\_loadf\_main(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{1257 \}}
\DoxyCodeLine{1258 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_STDIO}}
\DoxyCodeLine{1259 }
\DoxyCodeLine{1260 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_LINEAR}}
\DoxyCodeLine{1261 }
\DoxyCodeLine{1262 \textcolor{comment}{// these is-\/hdr-\/or-\/not is defined independent of whether STBI\_NO\_LINEAR is}}
\DoxyCodeLine{1263 \textcolor{comment}{// defined, for API simplicity; if STBI\_NO\_LINEAR is defined, it always}}
\DoxyCodeLine{1264 \textcolor{comment}{// reports false!}}
\DoxyCodeLine{1265 }
\DoxyCodeLine{1266 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_a5cbc6f5cbb3b2d0d87ee959fcee9d23e}{stbi\_is\_hdr\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}})}
\DoxyCodeLine{1267 \{}
\DoxyCodeLine{1268 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1269    stbi\_\_context s;}
\DoxyCodeLine{1270    stbi\_\_start\_mem(\&s,\mbox{\hyperlink{classbuffer}{buffer}},\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{1271    \textcolor{keywordflow}{return} stbi\_\_hdr\_test(\&s);}
\DoxyCodeLine{1272 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{1273    STBI\_NOTUSED(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{1274    STBI\_NOTUSED(\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{1275    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1276 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1277 \}}
\DoxyCodeLine{1278 }
\DoxyCodeLine{1279 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{1280 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_ae70f9a302f7e87fd971075e7f758d55c}{stbi\_is\_hdr}}          (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename)}
\DoxyCodeLine{1281 \{}
\DoxyCodeLine{1282    FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}} = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{1283    \textcolor{keywordtype}{int} result=0;}
\DoxyCodeLine{1284    \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}) \{}
\DoxyCodeLine{1285       result = \mbox{\hyperlink{stb__image_8h_aaf10d41631e1e9214fde1688bdbd8524}{stbi\_is\_hdr\_from\_file}}(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1286       fclose(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1287    \}}
\DoxyCodeLine{1288    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1289 \}}
\DoxyCodeLine{1290 }
\DoxyCodeLine{1291 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_aaf10d41631e1e9214fde1688bdbd8524}{stbi\_is\_hdr\_from\_file}}(FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}})}
\DoxyCodeLine{1292 \{}
\DoxyCodeLine{1293 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1294    stbi\_\_context s;}
\DoxyCodeLine{1295    stbi\_\_start\_file(\&s,\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1296    \textcolor{keywordflow}{return} stbi\_\_hdr\_test(\&s);}
\DoxyCodeLine{1297 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{1298    STBI\_NOTUSED(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{1299    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1300 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1301 \}}
\DoxyCodeLine{1302 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_STDIO}}
\DoxyCodeLine{1303 }
\DoxyCodeLine{1304 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_af0e94f316fe1848f632517ca3c11d077}{stbi\_is\_hdr\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user)}
\DoxyCodeLine{1305 \{}
\DoxyCodeLine{1306 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1307    stbi\_\_context s;}
\DoxyCodeLine{1308    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *) clbk, user);}
\DoxyCodeLine{1309    \textcolor{keywordflow}{return} stbi\_\_hdr\_test(\&s);}
\DoxyCodeLine{1310 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{1311    STBI\_NOTUSED(clbk);}
\DoxyCodeLine{1312    STBI\_NOTUSED(user);}
\DoxyCodeLine{1313    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1314 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1315 \}}
\DoxyCodeLine{1316 }
\DoxyCodeLine{1317 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{1318 \textcolor{keyword}{static} \textcolor{keywordtype}{float} stbi\_\_l2h\_gamma=2.2f, stbi\_\_l2h\_scale=1.0f;}
\DoxyCodeLine{1319 }
\DoxyCodeLine{1320 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_a1feccdcf726dcc6b5502e3efa85b7dbb}{stbi\_ldr\_to\_hdr\_gamma}}(\textcolor{keywordtype}{float} gamma) \{ stbi\_\_l2h\_gamma = gamma; \}}
\DoxyCodeLine{1321 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_af946583656a362a316b40c0421c20561}{stbi\_ldr\_to\_hdr\_scale}}(\textcolor{keywordtype}{float} scale) \{ stbi\_\_l2h\_scale = scale; \}}
\DoxyCodeLine{1322 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1323 }
\DoxyCodeLine{1324 \textcolor{keyword}{static} \textcolor{keywordtype}{float} stbi\_\_h2l\_gamma\_i=1.0f/2.2f, stbi\_\_h2l\_scale\_i=1.0f;}
\DoxyCodeLine{1325 }
\DoxyCodeLine{1326 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_ab18889e43518d6b4421b705782bb1b5e}{stbi\_hdr\_to\_ldr\_gamma}}(\textcolor{keywordtype}{float} gamma) \{ stbi\_\_h2l\_gamma\_i = 1/gamma; \}}
\DoxyCodeLine{1327 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_ae21cc1184eeb5cc814699f1ed62c5258}{stbi\_hdr\_to\_ldr\_scale}}(\textcolor{keywordtype}{float} scale) \{ stbi\_\_h2l\_scale\_i = 1/scale; \}}
\DoxyCodeLine{1328 }
\DoxyCodeLine{1329 }
\DoxyCodeLine{1331 \textcolor{comment}{//}}
\DoxyCodeLine{1332 \textcolor{comment}{// Common code used by all image loaders}}
\DoxyCodeLine{1333 \textcolor{comment}{//}}
\DoxyCodeLine{1334 }
\DoxyCodeLine{1335 \textcolor{keyword}{enum}}
\DoxyCodeLine{1336 \{}
\DoxyCodeLine{1337    STBI\_\_SCAN\_load=0,}
\DoxyCodeLine{1338    STBI\_\_SCAN\_type,}
\DoxyCodeLine{1339    STBI\_\_SCAN\_header}
\DoxyCodeLine{1340 \};}
\DoxyCodeLine{1341 }
\DoxyCodeLine{1342 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_refill\_buffer(stbi\_\_context *s)}
\DoxyCodeLine{1343 \{}
\DoxyCodeLine{1344    \textcolor{keywordtype}{int} n = (s-\/>io.read)(s-\/>io\_user\_data,(\textcolor{keywordtype}{char}*)s-\/>buffer\_start,s-\/>buflen);}
\DoxyCodeLine{1345    \textcolor{keywordflow}{if} (n == 0) \{}
\DoxyCodeLine{1346       \textcolor{comment}{// at end of file, treat same as if from memory, but need to handle case}}
\DoxyCodeLine{1347       \textcolor{comment}{// where s-\/>img\_buffer isn't pointing to safe memory, e.g. 0-\/byte file}}
\DoxyCodeLine{1348       s-\/>read\_from\_callbacks = 0;}
\DoxyCodeLine{1349       s-\/>img\_buffer = s-\/>buffer\_start;}
\DoxyCodeLine{1350       s-\/>img\_buffer\_end = s-\/>buffer\_start+1;}
\DoxyCodeLine{1351       *s-\/>img\_buffer = 0;}
\DoxyCodeLine{1352    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1353       s-\/>img\_buffer = s-\/>buffer\_start;}
\DoxyCodeLine{1354       s-\/>img\_buffer\_end = s-\/>buffer\_start + n;}
\DoxyCodeLine{1355    \}}
\DoxyCodeLine{1356 \}}
\DoxyCodeLine{1357 }
\DoxyCodeLine{1358 stbi\_inline \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_get8(stbi\_\_context *s)}
\DoxyCodeLine{1359 \{}
\DoxyCodeLine{1360    \textcolor{keywordflow}{if} (s-\/>img\_buffer < s-\/>img\_buffer\_end)}
\DoxyCodeLine{1361       \textcolor{keywordflow}{return} *s-\/>img\_buffer++;}
\DoxyCodeLine{1362    \textcolor{keywordflow}{if} (s-\/>read\_from\_callbacks) \{}
\DoxyCodeLine{1363       stbi\_\_refill\_buffer(s);}
\DoxyCodeLine{1364       \textcolor{keywordflow}{return} *s-\/>img\_buffer++;}
\DoxyCodeLine{1365    \}}
\DoxyCodeLine{1366    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1367 \}}
\DoxyCodeLine{1368 }
\DoxyCodeLine{1369 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_at\_eof(stbi\_\_context *s)}
\DoxyCodeLine{1370 \{}
\DoxyCodeLine{1371    \textcolor{keywordflow}{if} (s-\/>io.read) \{}
\DoxyCodeLine{1372       \textcolor{keywordflow}{if} (!(s-\/>io.eof)(s-\/>io\_user\_data)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1373       \textcolor{comment}{// if feof() is true, check if buffer = end}}
\DoxyCodeLine{1374       \textcolor{comment}{// special case: we've only got the special 0 character at the end}}
\DoxyCodeLine{1375       \textcolor{keywordflow}{if} (s-\/>read\_from\_callbacks == 0) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1376    \}}
\DoxyCodeLine{1377 }
\DoxyCodeLine{1378    \textcolor{keywordflow}{return} s-\/>img\_buffer >= s-\/>img\_buffer\_end;}
\DoxyCodeLine{1379 \}}
\DoxyCodeLine{1380 }
\DoxyCodeLine{1381 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_skip(stbi\_\_context *s, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1382 \{}
\DoxyCodeLine{1383    \textcolor{keywordflow}{if} (n < 0) \{}
\DoxyCodeLine{1384       s-\/>img\_buffer = s-\/>img\_buffer\_end;}
\DoxyCodeLine{1385       \textcolor{keywordflow}{return};}
\DoxyCodeLine{1386    \}}
\DoxyCodeLine{1387    \textcolor{keywordflow}{if} (s-\/>io.read) \{}
\DoxyCodeLine{1388       \textcolor{keywordtype}{int} blen = (int) (s-\/>img\_buffer\_end -\/ s-\/>img\_buffer);}
\DoxyCodeLine{1389       \textcolor{keywordflow}{if} (blen < n) \{}
\DoxyCodeLine{1390          s-\/>img\_buffer = s-\/>img\_buffer\_end;}
\DoxyCodeLine{1391          (s-\/>io.skip)(s-\/>io\_user\_data, n -\/ blen);}
\DoxyCodeLine{1392          \textcolor{keywordflow}{return};}
\DoxyCodeLine{1393       \}}
\DoxyCodeLine{1394    \}}
\DoxyCodeLine{1395    s-\/>img\_buffer += n;}
\DoxyCodeLine{1396 \}}
\DoxyCodeLine{1397 }
\DoxyCodeLine{1398 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_getn(stbi\_\_context *s, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1399 \{}
\DoxyCodeLine{1400    \textcolor{keywordflow}{if} (s-\/>io.read) \{}
\DoxyCodeLine{1401       \textcolor{keywordtype}{int} blen = (int) (s-\/>img\_buffer\_end -\/ s-\/>img\_buffer);}
\DoxyCodeLine{1402       \textcolor{keywordflow}{if} (blen < n) \{}
\DoxyCodeLine{1403          \textcolor{keywordtype}{int} res, count;}
\DoxyCodeLine{1404 }
\DoxyCodeLine{1405          memcpy(\mbox{\hyperlink{classbuffer}{buffer}}, s-\/>img\_buffer, blen);}
\DoxyCodeLine{1406 }
\DoxyCodeLine{1407          count = (s-\/>io.read)(s-\/>io\_user\_data, (\textcolor{keywordtype}{char}*) \mbox{\hyperlink{classbuffer}{buffer}} + blen, n -\/ blen);}
\DoxyCodeLine{1408          res = (count == (n-\/blen));}
\DoxyCodeLine{1409          s-\/>img\_buffer = s-\/>img\_buffer\_end;}
\DoxyCodeLine{1410          \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{1411       \}}
\DoxyCodeLine{1412    \}}
\DoxyCodeLine{1413 }
\DoxyCodeLine{1414    \textcolor{keywordflow}{if} (s-\/>img\_buffer+n <= s-\/>img\_buffer\_end) \{}
\DoxyCodeLine{1415       memcpy(\mbox{\hyperlink{classbuffer}{buffer}}, s-\/>img\_buffer, n);}
\DoxyCodeLine{1416       s-\/>img\_buffer += n;}
\DoxyCodeLine{1417       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1418    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{1419       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1420 \}}
\DoxyCodeLine{1421 }
\DoxyCodeLine{1422 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_get16be(stbi\_\_context *s)}
\DoxyCodeLine{1423 \{}
\DoxyCodeLine{1424    \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = stbi\_\_get8(s);}
\DoxyCodeLine{1425    \textcolor{keywordflow}{return} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} << 8) + stbi\_\_get8(s);}
\DoxyCodeLine{1426 \}}
\DoxyCodeLine{1427 }
\DoxyCodeLine{1428 \textcolor{keyword}{static} stbi\_\_uint32 stbi\_\_get32be(stbi\_\_context *s)}
\DoxyCodeLine{1429 \{}
\DoxyCodeLine{1430    stbi\_\_uint32 \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = stbi\_\_get16be(s);}
\DoxyCodeLine{1431    \textcolor{keywordflow}{return} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} << 16) + stbi\_\_get16be(s);}
\DoxyCodeLine{1432 \}}
\DoxyCodeLine{1433 }
\DoxyCodeLine{1434 \textcolor{preprocessor}{\#if defined(STBI\_NO\_BMP) \&\& defined(STBI\_NO\_TGA) \&\& defined(STBI\_NO\_GIF)}}
\DoxyCodeLine{1435 \textcolor{comment}{// nothing}}
\DoxyCodeLine{1436 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{1437 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_get16le(stbi\_\_context *s)}
\DoxyCodeLine{1438 \{}
\DoxyCodeLine{1439    \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = stbi\_\_get8(s);}
\DoxyCodeLine{1440    \textcolor{keywordflow}{return} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} + (stbi\_\_get8(s) << 8);}
\DoxyCodeLine{1441 \}}
\DoxyCodeLine{1442 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1443 }
\DoxyCodeLine{1444 \textcolor{preprocessor}{\#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{1445 \textcolor{keyword}{static} stbi\_\_uint32 stbi\_\_get32le(stbi\_\_context *s)}
\DoxyCodeLine{1446 \{}
\DoxyCodeLine{1447    stbi\_\_uint32 \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = stbi\_\_get16le(s);}
\DoxyCodeLine{1448    \textcolor{keywordflow}{return} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} + (stbi\_\_get16le(s) << 16);}
\DoxyCodeLine{1449 \}}
\DoxyCodeLine{1450 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1451 }
\DoxyCodeLine{1452 \textcolor{preprocessor}{\#define STBI\_\_BYTECAST(x)  ((stbi\_uc) ((x) \& 255))  }\textcolor{comment}{// truncate int to byte without warnings}}
\DoxyCodeLine{1453 }
\DoxyCodeLine{1454 }
\DoxyCodeLine{1456 \textcolor{comment}{//}}
\DoxyCodeLine{1457 \textcolor{comment}{//  generic converter from built-\/in img\_n to req\_comp}}
\DoxyCodeLine{1458 \textcolor{comment}{//    individual types do this automatically as much as possible (e.g. jpeg}}
\DoxyCodeLine{1459 \textcolor{comment}{//    does all cases internally since it needs to colorspace convert anyway,}}
\DoxyCodeLine{1460 \textcolor{comment}{//    and it never has alpha, so very few cases ). png can automatically}}
\DoxyCodeLine{1461 \textcolor{comment}{//    interleave an alpha=255 channel, but falls back to this for other cases}}
\DoxyCodeLine{1462 \textcolor{comment}{//}}
\DoxyCodeLine{1463 \textcolor{comment}{//  assume data buffer is malloced, so malloc a new one and free that one}}
\DoxyCodeLine{1464 \textcolor{comment}{//  only failure mode is malloc failing}}
\DoxyCodeLine{1465 }
\DoxyCodeLine{1466 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_compute\_y(\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, \textcolor{keywordtype}{int} b)}
\DoxyCodeLine{1467 \{}
\DoxyCodeLine{1468    \textcolor{keywordflow}{return} (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (((\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}*77) + (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}*150) +  (29*b)) >> 8);}
\DoxyCodeLine{1469 \}}
\DoxyCodeLine{1470 }
\DoxyCodeLine{1471 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbi\_\_convert\_format(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\mbox{\hyperlink{structdata}{data}}, \textcolor{keywordtype}{int} img\_n, \textcolor{keywordtype}{int} req\_comp, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}})}
\DoxyCodeLine{1472 \{}
\DoxyCodeLine{1473    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{1474    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *good;}
\DoxyCodeLine{1475 }
\DoxyCodeLine{1476    \textcolor{keywordflow}{if} (req\_comp == img\_n) \textcolor{keywordflow}{return} \mbox{\hyperlink{darknet_8h_a493583f6fc164cf849745e01e4c04ab5}{data}};}
\DoxyCodeLine{1477    STBI\_ASSERT(req\_comp >= 1 \&\& req\_comp <= 4);}
\DoxyCodeLine{1478 }
\DoxyCodeLine{1479    good = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) stbi\_\_malloc\_mad3(req\_comp, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, 0);}
\DoxyCodeLine{1480    \textcolor{keywordflow}{if} (good == NULL) \{}
\DoxyCodeLine{1481       STBI\_FREE(\mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{1482       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{1483    \}}
\DoxyCodeLine{1484 }
\DoxyCodeLine{1485    \textcolor{keywordflow}{for} (j=0; j < (int) \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}; ++j) \{}
\DoxyCodeLine{1486       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *src  = \mbox{\hyperlink{structdata}{data}} + j * \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} * img\_n   ;}
\DoxyCodeLine{1487       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *dest = good + j * \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} * req\_comp;}
\DoxyCodeLine{1488 }
\DoxyCodeLine{1489 \textcolor{preprocessor}{      \#define STBI\_\_COMBO(a,b)  ((a)*8+(b))}}
\DoxyCodeLine{1490 \textcolor{preprocessor}{      \#define STBI\_\_CASE(a,b)   case STBI\_\_COMBO(a,b): for(i=x-\/1; i >= 0; -\/-\/i, src += a, dest += b)}}
\DoxyCodeLine{1491       \textcolor{comment}{// convert source image with img\_n components to one with req\_comp components;}}
\DoxyCodeLine{1492       \textcolor{comment}{// avoid switch per pixel, so use switch per scanline and massive macros}}
\DoxyCodeLine{1493       \textcolor{keywordflow}{switch} (STBI\_\_COMBO(img\_n, req\_comp)) \{}
\DoxyCodeLine{1494          STBI\_\_CASE(1,2) \{ dest[0]=src[0], dest[1]=255;                                     \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1495          STBI\_\_CASE(1,3) \{ dest[0]=dest[1]=dest[2]=src[0];                                  \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1496          STBI\_\_CASE(1,4) \{ dest[0]=dest[1]=dest[2]=src[0], dest[3]=255;                     \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1497          STBI\_\_CASE(2,1) \{ dest[0]=src[0];                                                  \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1498          STBI\_\_CASE(2,3) \{ dest[0]=dest[1]=dest[2]=src[0];                                  \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1499          STBI\_\_CASE(2,4) \{ dest[0]=dest[1]=dest[2]=src[0], dest[3]=src[1];                  \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1500          STBI\_\_CASE(3,4) \{ dest[0]=src[0],dest[1]=src[1],dest[2]=src[2],dest[3]=255;        \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1501          STBI\_\_CASE(3,1) \{ dest[0]=stbi\_\_compute\_y(src[0],src[1],src[2]);                   \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1502          STBI\_\_CASE(3,2) \{ dest[0]=stbi\_\_compute\_y(src[0],src[1],src[2]), dest[1] = 255;    \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1503          STBI\_\_CASE(4,1) \{ dest[0]=stbi\_\_compute\_y(src[0],src[1],src[2]);                   \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1504          STBI\_\_CASE(4,2) \{ dest[0]=stbi\_\_compute\_y(src[0],src[1],src[2]), dest[1] = src[3]; \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1505          STBI\_\_CASE(4,3) \{ dest[0]=src[0],dest[1]=src[1],dest[2]=src[2];                    \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1506          \textcolor{keywordflow}{default}: STBI\_ASSERT(0);}
\DoxyCodeLine{1507       \}}
\DoxyCodeLine{1508 \textcolor{preprocessor}{      \#undef STBI\_\_CASE}}
\DoxyCodeLine{1509    \}}
\DoxyCodeLine{1510 }
\DoxyCodeLine{1511    STBI\_FREE(\mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{1512    \textcolor{keywordflow}{return} good;}
\DoxyCodeLine{1513 \}}
\DoxyCodeLine{1514 }
\DoxyCodeLine{1515 \textcolor{keyword}{static} stbi\_\_uint16 stbi\_\_compute\_y\_16(\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, \textcolor{keywordtype}{int} b)}
\DoxyCodeLine{1516 \{}
\DoxyCodeLine{1517    \textcolor{keywordflow}{return} (stbi\_\_uint16) (((\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}*77) + (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}*150) +  (29*b)) >> 8);}
\DoxyCodeLine{1518 \}}
\DoxyCodeLine{1519 }
\DoxyCodeLine{1520 \textcolor{keyword}{static} stbi\_\_uint16 *stbi\_\_convert\_format16(stbi\_\_uint16 *\mbox{\hyperlink{structdata}{data}}, \textcolor{keywordtype}{int} img\_n, \textcolor{keywordtype}{int} req\_comp, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}})}
\DoxyCodeLine{1521 \{}
\DoxyCodeLine{1522    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{1523    stbi\_\_uint16 *good;}
\DoxyCodeLine{1524 }
\DoxyCodeLine{1525    \textcolor{keywordflow}{if} (req\_comp == img\_n) \textcolor{keywordflow}{return} \mbox{\hyperlink{darknet_8h_a493583f6fc164cf849745e01e4c04ab5}{data}};}
\DoxyCodeLine{1526    STBI\_ASSERT(req\_comp >= 1 \&\& req\_comp <= 4);}
\DoxyCodeLine{1527 }
\DoxyCodeLine{1528    good = (stbi\_\_uint16 *) stbi\_\_malloc(req\_comp * \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} * \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} * 2);}
\DoxyCodeLine{1529    \textcolor{keywordflow}{if} (good == NULL) \{}
\DoxyCodeLine{1530       STBI\_FREE(\mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{1531       \textcolor{keywordflow}{return} (stbi\_\_uint16 *) stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{1532    \}}
\DoxyCodeLine{1533 }
\DoxyCodeLine{1534    \textcolor{keywordflow}{for} (j=0; j < (int) \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}; ++j) \{}
\DoxyCodeLine{1535       stbi\_\_uint16 *src  = \mbox{\hyperlink{structdata}{data}} + j * \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} * img\_n   ;}
\DoxyCodeLine{1536       stbi\_\_uint16 *dest = good + j * \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} * req\_comp;}
\DoxyCodeLine{1537 }
\DoxyCodeLine{1538 \textcolor{preprocessor}{      \#define STBI\_\_COMBO(a,b)  ((a)*8+(b))}}
\DoxyCodeLine{1539 \textcolor{preprocessor}{      \#define STBI\_\_CASE(a,b)   case STBI\_\_COMBO(a,b): for(i=x-\/1; i >= 0; -\/-\/i, src += a, dest += b)}}
\DoxyCodeLine{1540       \textcolor{comment}{// convert source image with img\_n components to one with req\_comp components;}}
\DoxyCodeLine{1541       \textcolor{comment}{// avoid switch per pixel, so use switch per scanline and massive macros}}
\DoxyCodeLine{1542       \textcolor{keywordflow}{switch} (STBI\_\_COMBO(img\_n, req\_comp)) \{}
\DoxyCodeLine{1543          STBI\_\_CASE(1,2) \{ dest[0]=src[0], dest[1]=0xffff;                                     \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1544          STBI\_\_CASE(1,3) \{ dest[0]=dest[1]=dest[2]=src[0];                                     \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1545          STBI\_\_CASE(1,4) \{ dest[0]=dest[1]=dest[2]=src[0], dest[3]=0xffff;                     \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1546          STBI\_\_CASE(2,1) \{ dest[0]=src[0];                                                     \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1547          STBI\_\_CASE(2,3) \{ dest[0]=dest[1]=dest[2]=src[0];                                     \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1548          STBI\_\_CASE(2,4) \{ dest[0]=dest[1]=dest[2]=src[0], dest[3]=src[1];                     \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1549          STBI\_\_CASE(3,4) \{ dest[0]=src[0],dest[1]=src[1],dest[2]=src[2],dest[3]=0xffff;        \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1550          STBI\_\_CASE(3,1) \{ dest[0]=stbi\_\_compute\_y\_16(src[0],src[1],src[2]);                   \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1551          STBI\_\_CASE(3,2) \{ dest[0]=stbi\_\_compute\_y\_16(src[0],src[1],src[2]), dest[1] = 0xffff; \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1552          STBI\_\_CASE(4,1) \{ dest[0]=stbi\_\_compute\_y\_16(src[0],src[1],src[2]);                   \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1553          STBI\_\_CASE(4,2) \{ dest[0]=stbi\_\_compute\_y\_16(src[0],src[1],src[2]), dest[1] = src[3]; \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1554          STBI\_\_CASE(4,3) \{ dest[0]=src[0],dest[1]=src[1],dest[2]=src[2];                       \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{1555          \textcolor{keywordflow}{default}: STBI\_ASSERT(0);}
\DoxyCodeLine{1556       \}}
\DoxyCodeLine{1557 \textcolor{preprocessor}{      \#undef STBI\_\_CASE}}
\DoxyCodeLine{1558    \}}
\DoxyCodeLine{1559 }
\DoxyCodeLine{1560    STBI\_FREE(\mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{1561    \textcolor{keywordflow}{return} good;}
\DoxyCodeLine{1562 \}}
\DoxyCodeLine{1563 }
\DoxyCodeLine{1564 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{1565 \textcolor{keyword}{static} \textcolor{keywordtype}{float}   *stbi\_\_ldr\_to\_hdr(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structdata}{data}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} comp)}
\DoxyCodeLine{1566 \{}
\DoxyCodeLine{1567    \textcolor{keywordtype}{int} i,k,n;}
\DoxyCodeLine{1568    \textcolor{keywordtype}{float} *output;}
\DoxyCodeLine{1569    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structdata}{data}}) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{1570    output = (\textcolor{keywordtype}{float} *) stbi\_\_malloc\_mad4(\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}), 0);}
\DoxyCodeLine{1571    \textcolor{keywordflow}{if} (output == NULL) \{ STBI\_FREE(\mbox{\hyperlink{structdata}{data}}); \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}); \}}
\DoxyCodeLine{1572    \textcolor{comment}{// compute number of non-\/alpha components}}
\DoxyCodeLine{1573    \textcolor{keywordflow}{if} (comp \& 1) n = comp; \textcolor{keywordflow}{else} n = comp-\/1;}
\DoxyCodeLine{1574    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}; ++i) \{}
\DoxyCodeLine{1575       \textcolor{keywordflow}{for} (k=0; k < n; ++k) \{}
\DoxyCodeLine{1576          output[i*comp + k] = (float) (pow(\mbox{\hyperlink{structdata}{data}}[i*comp+k]/255.0f, stbi\_\_l2h\_gamma) * stbi\_\_l2h\_scale);}
\DoxyCodeLine{1577       \}}
\DoxyCodeLine{1578       \textcolor{keywordflow}{if} (k < comp) output[i*comp + k] = \mbox{\hyperlink{structdata}{data}}[i*comp+k]/255.0f;}
\DoxyCodeLine{1579    \}}
\DoxyCodeLine{1580    STBI\_FREE(\mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{1581    \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{1582 \}}
\DoxyCodeLine{1583 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1584 }
\DoxyCodeLine{1585 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1586 \textcolor{preprocessor}{\#define stbi\_\_float2int(x)   ((int) (x))}}
\DoxyCodeLine{1587 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_hdr\_to\_ldr(\textcolor{keywordtype}{float}   *\mbox{\hyperlink{structdata}{data}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} comp)}
\DoxyCodeLine{1588 \{}
\DoxyCodeLine{1589    \textcolor{keywordtype}{int} i,k,n;}
\DoxyCodeLine{1590    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *output;}
\DoxyCodeLine{1591    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structdata}{data}}) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{1592    output = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp, 0);}
\DoxyCodeLine{1593    \textcolor{keywordflow}{if} (output == NULL) \{ STBI\_FREE(\mbox{\hyperlink{structdata}{data}}); \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}); \}}
\DoxyCodeLine{1594    \textcolor{comment}{// compute number of non-\/alpha components}}
\DoxyCodeLine{1595    \textcolor{keywordflow}{if} (comp \& 1) n = comp; \textcolor{keywordflow}{else} n = comp-\/1;}
\DoxyCodeLine{1596    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}; ++i) \{}
\DoxyCodeLine{1597       \textcolor{keywordflow}{for} (k=0; k < n; ++k) \{}
\DoxyCodeLine{1598          \textcolor{keywordtype}{float} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = (float) pow(\mbox{\hyperlink{structdata}{data}}[i*comp+k]*stbi\_\_h2l\_scale\_i, stbi\_\_h2l\_gamma\_i) * 255 + 0.5f;}
\DoxyCodeLine{1599          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} < 0) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = 0;}
\DoxyCodeLine{1600          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} > 255) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = 255;}
\DoxyCodeLine{1601          output[i*comp + k] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) stbi\_\_float2int(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{1602       \}}
\DoxyCodeLine{1603       \textcolor{keywordflow}{if} (k < comp) \{}
\DoxyCodeLine{1604          \textcolor{keywordtype}{float} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = \mbox{\hyperlink{structdata}{data}}[i*comp+k] * 255 + 0.5f;}
\DoxyCodeLine{1605          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} < 0) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = 0;}
\DoxyCodeLine{1606          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} > 255) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = 255;}
\DoxyCodeLine{1607          output[i*comp + k] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) stbi\_\_float2int(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{1608       \}}
\DoxyCodeLine{1609    \}}
\DoxyCodeLine{1610    STBI\_FREE(\mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{1611    \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{1612 \}}
\DoxyCodeLine{1613 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1614 }
\DoxyCodeLine{1616 \textcolor{comment}{//}}
\DoxyCodeLine{1617 \textcolor{comment}{//  "{}baseline"{} JPEG/JFIF decoder}}
\DoxyCodeLine{1618 \textcolor{comment}{//}}
\DoxyCodeLine{1619 \textcolor{comment}{//    simple implementation}}
\DoxyCodeLine{1620 \textcolor{comment}{//      -\/ doesn't support delayed output of y-\/dimension}}
\DoxyCodeLine{1621 \textcolor{comment}{//      -\/ simple interface (only one output format: 8-\/bit interleaved RGB)}}
\DoxyCodeLine{1622 \textcolor{comment}{//      -\/ doesn't try to recover corrupt jpegs}}
\DoxyCodeLine{1623 \textcolor{comment}{//      -\/ doesn't allow partial loading, loading multiple at once}}
\DoxyCodeLine{1624 \textcolor{comment}{//      -\/ still fast on x86 (copying globals into locals doesn't help x86)}}
\DoxyCodeLine{1625 \textcolor{comment}{//      -\/ allocates lots of intermediate memory (full size of all components)}}
\DoxyCodeLine{1626 \textcolor{comment}{//        -\/ non-\/interleaved case requires this anyway}}
\DoxyCodeLine{1627 \textcolor{comment}{//        -\/ allows good upsampling (see next)}}
\DoxyCodeLine{1628 \textcolor{comment}{//    high-\/quality}}
\DoxyCodeLine{1629 \textcolor{comment}{//      -\/ upsampled channels are bilinearly interpolated, even across blocks}}
\DoxyCodeLine{1630 \textcolor{comment}{//      -\/ quality integer IDCT derived from IJG's 'slow'}}
\DoxyCodeLine{1631 \textcolor{comment}{//    performance}}
\DoxyCodeLine{1632 \textcolor{comment}{//      -\/ fast huffman; reasonable integer IDCT}}
\DoxyCodeLine{1633 \textcolor{comment}{//      -\/ some SIMD kernels for common paths on targets with SSE2/NEON}}
\DoxyCodeLine{1634 \textcolor{comment}{//      -\/ uses a lot of intermediate memory, could cache poorly}}
\DoxyCodeLine{1635 }
\DoxyCodeLine{1636 \textcolor{preprocessor}{\#ifndef STBI\_NO\_JPEG}}
\DoxyCodeLine{1637 }
\DoxyCodeLine{1638 \textcolor{comment}{// huffman decoding acceleration}}
\DoxyCodeLine{1639 \textcolor{preprocessor}{\#define FAST\_BITS   9  }\textcolor{comment}{// larger handles more cases; smaller stomps less cache}}
\DoxyCodeLine{1640 }
\DoxyCodeLine{1641 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{1642 \{}
\DoxyCodeLine{1643    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  fast[1 << FAST\_BITS];}
\DoxyCodeLine{1644    \textcolor{comment}{// weirdly, repacking this into AoS is a 10\% speed loss, instead of a win}}
\DoxyCodeLine{1645    stbi\_\_uint16 code[256];}
\DoxyCodeLine{1646    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  values[256];}
\DoxyCodeLine{1647    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  size[257];}
\DoxyCodeLine{1648    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} maxcode[18];}
\DoxyCodeLine{1649    \textcolor{keywordtype}{int}    delta[17];   \textcolor{comment}{// old 'firstsymbol' -\/ old 'firstcode'}}
\DoxyCodeLine{1650 \} stbi\_\_huffman;}
\DoxyCodeLine{1651 }
\DoxyCodeLine{1652 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{1653 \{}
\DoxyCodeLine{1654    stbi\_\_context *s;}
\DoxyCodeLine{1655    stbi\_\_huffman huff\_dc[4];}
\DoxyCodeLine{1656    stbi\_\_huffman huff\_ac[4];}
\DoxyCodeLine{1657    stbi\_\_uint16 dequant[4][64];}
\DoxyCodeLine{1658    stbi\_\_int16 fast\_ac[4][1 << FAST\_BITS];}
\DoxyCodeLine{1659 }
\DoxyCodeLine{1660 \textcolor{comment}{// sizes for components, interleaved MCUs}}
\DoxyCodeLine{1661    \textcolor{keywordtype}{int} img\_h\_max, img\_v\_max;}
\DoxyCodeLine{1662    \textcolor{keywordtype}{int} img\_mcu\_x, img\_mcu\_y;}
\DoxyCodeLine{1663    \textcolor{keywordtype}{int} img\_mcu\_w, img\_mcu\_h;}
\DoxyCodeLine{1664 }
\DoxyCodeLine{1665 \textcolor{comment}{// definition of jpeg image component}}
\DoxyCodeLine{1666    \textcolor{keyword}{struct}}
\DoxyCodeLine{1667    \{}
\DoxyCodeLine{1668       \textcolor{keywordtype}{int} id;}
\DoxyCodeLine{1669       \textcolor{keywordtype}{int} h,v;}
\DoxyCodeLine{1670       \textcolor{keywordtype}{int} tq;}
\DoxyCodeLine{1671       \textcolor{keywordtype}{int} hd,ha;}
\DoxyCodeLine{1672       \textcolor{keywordtype}{int} dc\_pred;}
\DoxyCodeLine{1673 }
\DoxyCodeLine{1674       \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},w2,h2;}
\DoxyCodeLine{1675       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{darknet_8h_a493583f6fc164cf849745e01e4c04ab5}{data}};}
\DoxyCodeLine{1676       \textcolor{keywordtype}{void} *raw\_data, *raw\_coeff;}
\DoxyCodeLine{1677       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *linebuf;}
\DoxyCodeLine{1678       \textcolor{keywordtype}{short}   *coeff;   \textcolor{comment}{// progressive only}}
\DoxyCodeLine{1679       \textcolor{keywordtype}{int}      coeff\_w, coeff\_h; \textcolor{comment}{// number of 8x8 coefficient blocks}}
\DoxyCodeLine{1680    \} img\_comp[4];}
\DoxyCodeLine{1681 }
\DoxyCodeLine{1682    stbi\_\_uint32   code\_buffer; \textcolor{comment}{// jpeg entropy-\/coded buffer}}
\DoxyCodeLine{1683    \textcolor{keywordtype}{int}            code\_bits;   \textcolor{comment}{// number of valid bits}}
\DoxyCodeLine{1684    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}  marker;      \textcolor{comment}{// marker seen while filling entropy buffer}}
\DoxyCodeLine{1685    \textcolor{keywordtype}{int}            nomore;      \textcolor{comment}{// flag if we saw a marker so must stop}}
\DoxyCodeLine{1686 }
\DoxyCodeLine{1687    \textcolor{keywordtype}{int}            progressive;}
\DoxyCodeLine{1688    \textcolor{keywordtype}{int}            spec\_start;}
\DoxyCodeLine{1689    \textcolor{keywordtype}{int}            spec\_end;}
\DoxyCodeLine{1690    \textcolor{keywordtype}{int}            succ\_high;}
\DoxyCodeLine{1691    \textcolor{keywordtype}{int}            succ\_low;}
\DoxyCodeLine{1692    \textcolor{keywordtype}{int}            eob\_run;}
\DoxyCodeLine{1693    \textcolor{keywordtype}{int}            jfif;}
\DoxyCodeLine{1694    \textcolor{keywordtype}{int}            app14\_color\_transform; \textcolor{comment}{// Adobe APP14 tag}}
\DoxyCodeLine{1695    \textcolor{keywordtype}{int}            rgb;}
\DoxyCodeLine{1696 }
\DoxyCodeLine{1697    \textcolor{keywordtype}{int} scan\_n, order[4];}
\DoxyCodeLine{1698    \textcolor{keywordtype}{int} restart\_interval, todo;}
\DoxyCodeLine{1699 }
\DoxyCodeLine{1700 \textcolor{comment}{// kernels}}
\DoxyCodeLine{1701    void (*idct\_block\_kernel)(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{short} \mbox{\hyperlink{structdata}{data}}[64]);}
\DoxyCodeLine{1702    void (*YCbCr\_to\_RGB\_kernel)(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcb, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcr, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} step);}
\DoxyCodeLine{1703    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *(*resample\_row\_hv\_2\_kernel)(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} hs);}
\DoxyCodeLine{1704 \} stbi\_\_jpeg;}
\DoxyCodeLine{1705 }
\DoxyCodeLine{1706 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_build\_huffman(stbi\_\_huffman *h, \textcolor{keywordtype}{int} *count)}
\DoxyCodeLine{1707 \{}
\DoxyCodeLine{1708    \textcolor{keywordtype}{int} i,j,k=0,code;}
\DoxyCodeLine{1709    \textcolor{comment}{// build size list for each symbol (from JPEG spec)}}
\DoxyCodeLine{1710    \textcolor{keywordflow}{for} (i=0; i < 16; ++i)}
\DoxyCodeLine{1711       \textcolor{keywordflow}{for} (j=0; j < count[i]; ++j)}
\DoxyCodeLine{1712          h-\/>size[k++] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (i+1);}
\DoxyCodeLine{1713    h-\/>size[k] = 0;}
\DoxyCodeLine{1714 }
\DoxyCodeLine{1715    \textcolor{comment}{// compute actual symbols (from jpeg spec)}}
\DoxyCodeLine{1716    code = 0;}
\DoxyCodeLine{1717    k = 0;}
\DoxyCodeLine{1718    \textcolor{keywordflow}{for}(j=1; j <= 16; ++j) \{}
\DoxyCodeLine{1719       \textcolor{comment}{// compute delta to add to code to compute symbol id}}
\DoxyCodeLine{1720       h-\/>delta[j] = k -\/ code;}
\DoxyCodeLine{1721       \textcolor{keywordflow}{if} (h-\/>size[k] == j) \{}
\DoxyCodeLine{1722          \textcolor{keywordflow}{while} (h-\/>size[k] == j)}
\DoxyCodeLine{1723             h-\/>code[k++] = (stbi\_\_uint16) (code++);}
\DoxyCodeLine{1724          \textcolor{keywordflow}{if} (code-\/1 >= (1 << j)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad code lengths"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1725       \}}
\DoxyCodeLine{1726       \textcolor{comment}{// compute largest code + 1 for this size, preshifted as needed later}}
\DoxyCodeLine{1727       h-\/>maxcode[j] = code << (16-\/j);}
\DoxyCodeLine{1728       code <<= 1;}
\DoxyCodeLine{1729    \}}
\DoxyCodeLine{1730    h-\/>maxcode[j] = 0xffffffff;}
\DoxyCodeLine{1731 }
\DoxyCodeLine{1732    \textcolor{comment}{// build non-\/spec acceleration table; 255 is flag for not-\/accelerated}}
\DoxyCodeLine{1733    memset(h-\/>fast, 255, 1 << FAST\_BITS);}
\DoxyCodeLine{1734    \textcolor{keywordflow}{for} (i=0; i < k; ++i) \{}
\DoxyCodeLine{1735       \textcolor{keywordtype}{int} s = h-\/>size[i];}
\DoxyCodeLine{1736       \textcolor{keywordflow}{if} (s <= FAST\_BITS) \{}
\DoxyCodeLine{1737          \textcolor{keywordtype}{int} c = h-\/>code[i] << (FAST\_BITS-\/s);}
\DoxyCodeLine{1738          \textcolor{keywordtype}{int} m = 1 << (FAST\_BITS-\/s);}
\DoxyCodeLine{1739          \textcolor{keywordflow}{for} (j=0; j < m; ++j) \{}
\DoxyCodeLine{1740             h-\/>fast[c+j] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) i;}
\DoxyCodeLine{1741          \}}
\DoxyCodeLine{1742       \}}
\DoxyCodeLine{1743    \}}
\DoxyCodeLine{1744    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1745 \}}
\DoxyCodeLine{1746 }
\DoxyCodeLine{1747 \textcolor{comment}{// build a table that decodes both magnitude and value of small ACs in}}
\DoxyCodeLine{1748 \textcolor{comment}{// one go.}}
\DoxyCodeLine{1749 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_build\_fast\_ac(stbi\_\_int16 *fast\_ac, stbi\_\_huffman *h)}
\DoxyCodeLine{1750 \{}
\DoxyCodeLine{1751    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1752    \textcolor{keywordflow}{for} (i=0; i < (1 << FAST\_BITS); ++i) \{}
\DoxyCodeLine{1753       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} fast = h-\/>fast[i];}
\DoxyCodeLine{1754       fast\_ac[i] = 0;}
\DoxyCodeLine{1755       \textcolor{keywordflow}{if} (fast < 255) \{}
\DoxyCodeLine{1756          \textcolor{keywordtype}{int} rs = h-\/>values[fast];}
\DoxyCodeLine{1757          \textcolor{keywordtype}{int} run = (rs >> 4) \& 15;}
\DoxyCodeLine{1758          \textcolor{keywordtype}{int} magbits = rs \& 15;}
\DoxyCodeLine{1759          \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = h-\/>size[fast];}
\DoxyCodeLine{1760 }
\DoxyCodeLine{1761          \textcolor{keywordflow}{if} (magbits \&\& \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} + magbits <= FAST\_BITS) \{}
\DoxyCodeLine{1762             \textcolor{comment}{// magnitude code followed by receive\_extend code}}
\DoxyCodeLine{1763             \textcolor{keywordtype}{int} k = ((i << \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}) \& ((1 << FAST\_BITS) -\/ 1)) >> (FAST\_BITS -\/ magbits);}
\DoxyCodeLine{1764             \textcolor{keywordtype}{int} m = 1 << (magbits -\/ 1);}
\DoxyCodeLine{1765             \textcolor{keywordflow}{if} (k < m) k += (\string~0U << magbits) + 1;}
\DoxyCodeLine{1766             \textcolor{comment}{// if the result is small enough, we can fit it in fast\_ac table}}
\DoxyCodeLine{1767             \textcolor{keywordflow}{if} (k >= -\/128 \&\& k <= 127)}
\DoxyCodeLine{1768                fast\_ac[i] = (stbi\_\_int16) ((k << 8) + (run << 4) + (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} + magbits));}
\DoxyCodeLine{1769          \}}
\DoxyCodeLine{1770       \}}
\DoxyCodeLine{1771    \}}
\DoxyCodeLine{1772 \}}
\DoxyCodeLine{1773 }
\DoxyCodeLine{1774 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_grow\_buffer\_unsafe(stbi\_\_jpeg *j)}
\DoxyCodeLine{1775 \{}
\DoxyCodeLine{1776    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{1777       \textcolor{keywordtype}{int} b = j-\/>nomore ? 0 : stbi\_\_get8(j-\/>s);}
\DoxyCodeLine{1778       \textcolor{keywordflow}{if} (b == 0xff) \{}
\DoxyCodeLine{1779          \textcolor{keywordtype}{int} c = stbi\_\_get8(j-\/>s);}
\DoxyCodeLine{1780          \textcolor{keywordflow}{while} (c == 0xff) c = stbi\_\_get8(j-\/>s); \textcolor{comment}{// consume fill bytes}}
\DoxyCodeLine{1781          \textcolor{keywordflow}{if} (c != 0) \{}
\DoxyCodeLine{1782             j-\/>marker = (\textcolor{keywordtype}{unsigned} char) c;}
\DoxyCodeLine{1783             j-\/>nomore = 1;}
\DoxyCodeLine{1784             \textcolor{keywordflow}{return};}
\DoxyCodeLine{1785          \}}
\DoxyCodeLine{1786       \}}
\DoxyCodeLine{1787       j-\/>code\_buffer |= b << (24 -\/ j-\/>code\_bits);}
\DoxyCodeLine{1788       j-\/>code\_bits += 8;}
\DoxyCodeLine{1789    \} \textcolor{keywordflow}{while} (j-\/>code\_bits <= 24);}
\DoxyCodeLine{1790 \}}
\DoxyCodeLine{1791 }
\DoxyCodeLine{1792 \textcolor{comment}{// (1 << n) -\/ 1}}
\DoxyCodeLine{1793 \textcolor{keyword}{static} stbi\_\_uint32 stbi\_\_bmask[17]=\{0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535\};}
\DoxyCodeLine{1794 }
\DoxyCodeLine{1795 \textcolor{comment}{// decode a jpeg huffman value from the bitstream}}
\DoxyCodeLine{1796 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_huff\_decode(stbi\_\_jpeg *j, stbi\_\_huffman *h)}
\DoxyCodeLine{1797 \{}
\DoxyCodeLine{1798    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} temp;}
\DoxyCodeLine{1799    \textcolor{keywordtype}{int} c,k;}
\DoxyCodeLine{1800 }
\DoxyCodeLine{1801    \textcolor{keywordflow}{if} (j-\/>code\_bits < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1802 }
\DoxyCodeLine{1803    \textcolor{comment}{// look at the top FAST\_BITS and determine what symbol ID it is,}}
\DoxyCodeLine{1804    \textcolor{comment}{// if the code is <= FAST\_BITS}}
\DoxyCodeLine{1805    c = (j-\/>code\_buffer >> (32 -\/ FAST\_BITS)) \& ((1 << FAST\_BITS)-\/1);}
\DoxyCodeLine{1806    k = h-\/>fast[c];}
\DoxyCodeLine{1807    \textcolor{keywordflow}{if} (k < 255) \{}
\DoxyCodeLine{1808       \textcolor{keywordtype}{int} s = h-\/>size[k];}
\DoxyCodeLine{1809       \textcolor{keywordflow}{if} (s > j-\/>code\_bits)}
\DoxyCodeLine{1810          \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1811       j-\/>code\_buffer <<= s;}
\DoxyCodeLine{1812       j-\/>code\_bits -\/= s;}
\DoxyCodeLine{1813       \textcolor{keywordflow}{return} h-\/>values[k];}
\DoxyCodeLine{1814    \}}
\DoxyCodeLine{1815 }
\DoxyCodeLine{1816    \textcolor{comment}{// naive test is to shift the code\_buffer down so k bits are}}
\DoxyCodeLine{1817    \textcolor{comment}{// valid, then test against maxcode. To speed this up, we've}}
\DoxyCodeLine{1818    \textcolor{comment}{// preshifted maxcode left so that it has (16-\/k) 0s at the}}
\DoxyCodeLine{1819    \textcolor{comment}{// end; in other words, regardless of the number of bits, it}}
\DoxyCodeLine{1820    \textcolor{comment}{// wants to be compared against something shifted to have 16;}}
\DoxyCodeLine{1821    \textcolor{comment}{// that way we don't need to shift inside the loop.}}
\DoxyCodeLine{1822    temp = j-\/>code\_buffer >> 16;}
\DoxyCodeLine{1823    \textcolor{keywordflow}{for} (k=FAST\_BITS+1 ; ; ++k)}
\DoxyCodeLine{1824       \textcolor{keywordflow}{if} (temp < h-\/>maxcode[k])}
\DoxyCodeLine{1825          \textcolor{keywordflow}{break};}
\DoxyCodeLine{1826    \textcolor{keywordflow}{if} (k == 17) \{}
\DoxyCodeLine{1827       \textcolor{comment}{// error! code not found}}
\DoxyCodeLine{1828       j-\/>code\_bits -\/= 16;}
\DoxyCodeLine{1829       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1830    \}}
\DoxyCodeLine{1831 }
\DoxyCodeLine{1832    \textcolor{keywordflow}{if} (k > j-\/>code\_bits)}
\DoxyCodeLine{1833       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1834 }
\DoxyCodeLine{1835    \textcolor{comment}{// convert the huffman code to the symbol id}}
\DoxyCodeLine{1836    c = ((j-\/>code\_buffer >> (32 -\/ k)) \& stbi\_\_bmask[k]) + h-\/>delta[k];}
\DoxyCodeLine{1837    STBI\_ASSERT((((j-\/>code\_buffer) >> (32 -\/ h-\/>size[c])) \& stbi\_\_bmask[h-\/>size[c]]) == h-\/>code[c]);}
\DoxyCodeLine{1838 }
\DoxyCodeLine{1839    \textcolor{comment}{// convert the id to a symbol}}
\DoxyCodeLine{1840    j-\/>code\_bits -\/= k;}
\DoxyCodeLine{1841    j-\/>code\_buffer <<= k;}
\DoxyCodeLine{1842    \textcolor{keywordflow}{return} h-\/>values[c];}
\DoxyCodeLine{1843 \}}
\DoxyCodeLine{1844 }
\DoxyCodeLine{1845 \textcolor{comment}{// bias[n] = (-\/1<<n) + 1}}
\DoxyCodeLine{1846 \textcolor{keyword}{static} \textcolor{keywordtype}{int} \textcolor{keyword}{const} stbi\_\_jbias[16] = \{0,-\/1,-\/3,-\/7,-\/15,-\/31,-\/63,-\/127,-\/255,-\/511,-\/1023,-\/2047,-\/4095,-\/8191,-\/16383,-\/32767\};}
\DoxyCodeLine{1847 }
\DoxyCodeLine{1848 \textcolor{comment}{// combined JPEG 'receive' and JPEG 'extend', since baseline}}
\DoxyCodeLine{1849 \textcolor{comment}{// always extends everything it receives.}}
\DoxyCodeLine{1850 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_extend\_receive(stbi\_\_jpeg *j, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1851 \{}
\DoxyCodeLine{1852    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1853    \textcolor{keywordtype}{int} sgn;}
\DoxyCodeLine{1854    \textcolor{keywordflow}{if} (j-\/>code\_bits < n) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1855 }
\DoxyCodeLine{1856    sgn = (stbi\_\_int32)j-\/>code\_buffer >> 31; \textcolor{comment}{// sign bit is always in MSB}}
\DoxyCodeLine{1857    k = stbi\_lrot(j-\/>code\_buffer, n);}
\DoxyCodeLine{1858    STBI\_ASSERT(n >= 0 \&\& n < (\textcolor{keywordtype}{int}) (\textcolor{keyword}{sizeof}(stbi\_\_bmask)/\textcolor{keyword}{sizeof}(*stbi\_\_bmask)));}
\DoxyCodeLine{1859    j-\/>code\_buffer = k \& \string~stbi\_\_bmask[n];}
\DoxyCodeLine{1860    k \&= stbi\_\_bmask[n];}
\DoxyCodeLine{1861    j-\/>code\_bits -\/= n;}
\DoxyCodeLine{1862    \textcolor{keywordflow}{return} k + (stbi\_\_jbias[n] \& \string~sgn);}
\DoxyCodeLine{1863 \}}
\DoxyCodeLine{1864 }
\DoxyCodeLine{1865 \textcolor{comment}{// get some unsigned bits}}
\DoxyCodeLine{1866 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_get\_bits(stbi\_\_jpeg *j, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1867 \{}
\DoxyCodeLine{1868    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1869    \textcolor{keywordflow}{if} (j-\/>code\_bits < n) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1870    k = stbi\_lrot(j-\/>code\_buffer, n);}
\DoxyCodeLine{1871    j-\/>code\_buffer = k \& \string~stbi\_\_bmask[n];}
\DoxyCodeLine{1872    k \&= stbi\_\_bmask[n];}
\DoxyCodeLine{1873    j-\/>code\_bits -\/= n;}
\DoxyCodeLine{1874    \textcolor{keywordflow}{return} k;}
\DoxyCodeLine{1875 \}}
\DoxyCodeLine{1876 }
\DoxyCodeLine{1877 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_get\_bit(stbi\_\_jpeg *j)}
\DoxyCodeLine{1878 \{}
\DoxyCodeLine{1879    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1880    \textcolor{keywordflow}{if} (j-\/>code\_bits < 1) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1881    k = j-\/>code\_buffer;}
\DoxyCodeLine{1882    j-\/>code\_buffer <<= 1;}
\DoxyCodeLine{1883    -\/-\/j-\/>code\_bits;}
\DoxyCodeLine{1884    \textcolor{keywordflow}{return} k \& 0x80000000;}
\DoxyCodeLine{1885 \}}
\DoxyCodeLine{1886 }
\DoxyCodeLine{1887 \textcolor{comment}{// given a value that's at position X in the zigzag stream,}}
\DoxyCodeLine{1888 \textcolor{comment}{// where does it appear in the 8x8 matrix coded as row-\/major?}}
\DoxyCodeLine{1889 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_jpeg\_dezigzag[64+15] =}
\DoxyCodeLine{1890 \{}
\DoxyCodeLine{1891     0,  1,  8, 16,  9,  2,  3, 10,}
\DoxyCodeLine{1892    17, 24, 32, 25, 18, 11,  4,  5,}
\DoxyCodeLine{1893    12, 19, 26, 33, 40, 48, 41, 34,}
\DoxyCodeLine{1894    27, 20, 13,  6,  7, 14, 21, 28,}
\DoxyCodeLine{1895    35, 42, 49, 56, 57, 50, 43, 36,}
\DoxyCodeLine{1896    29, 22, 15, 23, 30, 37, 44, 51,}
\DoxyCodeLine{1897    58, 59, 52, 45, 38, 31, 39, 46,}
\DoxyCodeLine{1898    53, 60, 61, 54, 47, 55, 62, 63,}
\DoxyCodeLine{1899    \textcolor{comment}{// let corrupt input sample past end}}
\DoxyCodeLine{1900    63, 63, 63, 63, 63, 63, 63, 63,}
\DoxyCodeLine{1901    63, 63, 63, 63, 63, 63, 63}
\DoxyCodeLine{1902 \};}
\DoxyCodeLine{1903 }
\DoxyCodeLine{1904 \textcolor{comment}{// decode one 64-\/entry block-\/-\/}}
\DoxyCodeLine{1905 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_decode\_block(stbi\_\_jpeg *j, \textcolor{keywordtype}{short} \mbox{\hyperlink{structdata}{data}}[64], stbi\_\_huffman *hdc, stbi\_\_huffman *hac, stbi\_\_int16 *fac, \textcolor{keywordtype}{int} b, stbi\_\_uint16 *dequant)}
\DoxyCodeLine{1906 \{}
\DoxyCodeLine{1907    \textcolor{keywordtype}{int} diff,dc,k;}
\DoxyCodeLine{1908    \textcolor{keywordtype}{int} t;}
\DoxyCodeLine{1909 }
\DoxyCodeLine{1910    \textcolor{keywordflow}{if} (j-\/>code\_bits < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1911    t = stbi\_\_jpeg\_huff\_decode(j, hdc);}
\DoxyCodeLine{1912    \textcolor{keywordflow}{if} (t < 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1913 }
\DoxyCodeLine{1914    \textcolor{comment}{// 0 all the ac values now so we can do it 32-\/bits at a time}}
\DoxyCodeLine{1915    memset(\mbox{\hyperlink{structdata}{data}},0,64*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdata}{data}}[0]));}
\DoxyCodeLine{1916 }
\DoxyCodeLine{1917    diff = t ? stbi\_\_extend\_receive(j, t) : 0;}
\DoxyCodeLine{1918    dc = j-\/>img\_comp[b].dc\_pred + diff;}
\DoxyCodeLine{1919    j-\/>img\_comp[b].dc\_pred = dc;}
\DoxyCodeLine{1920    \mbox{\hyperlink{structdata}{data}}[0] = (short) (dc * dequant[0]);}
\DoxyCodeLine{1921 }
\DoxyCodeLine{1922    \textcolor{comment}{// decode AC components, see JPEG spec}}
\DoxyCodeLine{1923    k = 1;}
\DoxyCodeLine{1924    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{1925       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} zig;}
\DoxyCodeLine{1926       \textcolor{keywordtype}{int} c,\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}},s;}
\DoxyCodeLine{1927       \textcolor{keywordflow}{if} (j-\/>code\_bits < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1928       c = (j-\/>code\_buffer >> (32 -\/ FAST\_BITS)) \& ((1 << FAST\_BITS)-\/1);}
\DoxyCodeLine{1929       \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = fac[c];}
\DoxyCodeLine{1930       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}) \{ \textcolor{comment}{// fast-\/AC path}}
\DoxyCodeLine{1931          k += (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} >> 4) \& 15; \textcolor{comment}{// run}}
\DoxyCodeLine{1932          s = \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} \& 15; \textcolor{comment}{// combined length}}
\DoxyCodeLine{1933          j-\/>code\_buffer <<= s;}
\DoxyCodeLine{1934          j-\/>code\_bits -\/= s;}
\DoxyCodeLine{1935          \textcolor{comment}{// decode into unzigzag'd location}}
\DoxyCodeLine{1936          zig = stbi\_\_jpeg\_dezigzag[k++];}
\DoxyCodeLine{1937          \mbox{\hyperlink{structdata}{data}}[zig] = (short) ((\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} >> 8) * dequant[zig]);}
\DoxyCodeLine{1938       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1939          \textcolor{keywordtype}{int} rs = stbi\_\_jpeg\_huff\_decode(j, hac);}
\DoxyCodeLine{1940          \textcolor{keywordflow}{if} (rs < 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1941          s = rs \& 15;}
\DoxyCodeLine{1942          \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = rs >> 4;}
\DoxyCodeLine{1943          \textcolor{keywordflow}{if} (s == 0) \{}
\DoxyCodeLine{1944             \textcolor{keywordflow}{if} (rs != 0xf0) \textcolor{keywordflow}{break}; \textcolor{comment}{// end block}}
\DoxyCodeLine{1945             k += 16;}
\DoxyCodeLine{1946          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1947             k += \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{1948             \textcolor{comment}{// decode into unzigzag'd location}}
\DoxyCodeLine{1949             zig = stbi\_\_jpeg\_dezigzag[k++];}
\DoxyCodeLine{1950             \mbox{\hyperlink{structdata}{data}}[zig] = (short) (stbi\_\_extend\_receive(j,s) * dequant[zig]);}
\DoxyCodeLine{1951          \}}
\DoxyCodeLine{1952       \}}
\DoxyCodeLine{1953    \} \textcolor{keywordflow}{while} (k < 64);}
\DoxyCodeLine{1954    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1955 \}}
\DoxyCodeLine{1956 }
\DoxyCodeLine{1957 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_decode\_block\_prog\_dc(stbi\_\_jpeg *j, \textcolor{keywordtype}{short} \mbox{\hyperlink{structdata}{data}}[64], stbi\_\_huffman *hdc, \textcolor{keywordtype}{int} b)}
\DoxyCodeLine{1958 \{}
\DoxyCodeLine{1959    \textcolor{keywordtype}{int} diff,dc;}
\DoxyCodeLine{1960    \textcolor{keywordtype}{int} t;}
\DoxyCodeLine{1961    \textcolor{keywordflow}{if} (j-\/>spec\_end != 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}can't merge dc and ac"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1962 }
\DoxyCodeLine{1963    \textcolor{keywordflow}{if} (j-\/>code\_bits < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1964 }
\DoxyCodeLine{1965    \textcolor{keywordflow}{if} (j-\/>succ\_high == 0) \{}
\DoxyCodeLine{1966       \textcolor{comment}{// first scan for DC coefficient, must be first}}
\DoxyCodeLine{1967       memset(\mbox{\hyperlink{structdata}{data}},0,64*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdata}{data}}[0])); \textcolor{comment}{// 0 all the ac values now}}
\DoxyCodeLine{1968       t = stbi\_\_jpeg\_huff\_decode(j, hdc);}
\DoxyCodeLine{1969       diff = t ? stbi\_\_extend\_receive(j, t) : 0;}
\DoxyCodeLine{1970 }
\DoxyCodeLine{1971       dc = j-\/>img\_comp[b].dc\_pred + diff;}
\DoxyCodeLine{1972       j-\/>img\_comp[b].dc\_pred = dc;}
\DoxyCodeLine{1973       \mbox{\hyperlink{structdata}{data}}[0] = (short) (dc << j-\/>succ\_low);}
\DoxyCodeLine{1974    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1975       \textcolor{comment}{// refinement scan for DC coefficient}}
\DoxyCodeLine{1976       \textcolor{keywordflow}{if} (stbi\_\_jpeg\_get\_bit(j))}
\DoxyCodeLine{1977          \mbox{\hyperlink{structdata}{data}}[0] += (\textcolor{keywordtype}{short}) (1 << j-\/>succ\_low);}
\DoxyCodeLine{1978    \}}
\DoxyCodeLine{1979    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1980 \}}
\DoxyCodeLine{1981 }
\DoxyCodeLine{1982 \textcolor{comment}{// @OPTIMIZE: store non-\/zigzagged during the decode passes,}}
\DoxyCodeLine{1983 \textcolor{comment}{// and only de-\/zigzag when dequantizing}}
\DoxyCodeLine{1984 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_decode\_block\_prog\_ac(stbi\_\_jpeg *j, \textcolor{keywordtype}{short} \mbox{\hyperlink{structdata}{data}}[64], stbi\_\_huffman *hac, stbi\_\_int16 *fac)}
\DoxyCodeLine{1985 \{}
\DoxyCodeLine{1986    \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1987    \textcolor{keywordflow}{if} (j-\/>spec\_start == 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}can't merge dc and ac"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1988 }
\DoxyCodeLine{1989    \textcolor{keywordflow}{if} (j-\/>succ\_high == 0) \{}
\DoxyCodeLine{1990       \textcolor{keywordtype}{int} shift = j-\/>succ\_low;}
\DoxyCodeLine{1991 }
\DoxyCodeLine{1992       \textcolor{keywordflow}{if} (j-\/>eob\_run) \{}
\DoxyCodeLine{1993          -\/-\/j-\/>eob\_run;}
\DoxyCodeLine{1994          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1995       \}}
\DoxyCodeLine{1996 }
\DoxyCodeLine{1997       k = j-\/>spec\_start;}
\DoxyCodeLine{1998       \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{1999          \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} zig;}
\DoxyCodeLine{2000          \textcolor{keywordtype}{int} c,\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}},s;}
\DoxyCodeLine{2001          \textcolor{keywordflow}{if} (j-\/>code\_bits < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{2002          c = (j-\/>code\_buffer >> (32 -\/ FAST\_BITS)) \& ((1 << FAST\_BITS)-\/1);}
\DoxyCodeLine{2003          \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = fac[c];}
\DoxyCodeLine{2004          \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}) \{ \textcolor{comment}{// fast-\/AC path}}
\DoxyCodeLine{2005             k += (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} >> 4) \& 15; \textcolor{comment}{// run}}
\DoxyCodeLine{2006             s = \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} \& 15; \textcolor{comment}{// combined length}}
\DoxyCodeLine{2007             j-\/>code\_buffer <<= s;}
\DoxyCodeLine{2008             j-\/>code\_bits -\/= s;}
\DoxyCodeLine{2009             zig = stbi\_\_jpeg\_dezigzag[k++];}
\DoxyCodeLine{2010             \mbox{\hyperlink{structdata}{data}}[zig] = (short) ((\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} >> 8) << shift);}
\DoxyCodeLine{2011          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2012             \textcolor{keywordtype}{int} rs = stbi\_\_jpeg\_huff\_decode(j, hac);}
\DoxyCodeLine{2013             \textcolor{keywordflow}{if} (rs < 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2014             s = rs \& 15;}
\DoxyCodeLine{2015             \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = rs >> 4;}
\DoxyCodeLine{2016             \textcolor{keywordflow}{if} (s == 0) \{}
\DoxyCodeLine{2017                \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} < 15) \{}
\DoxyCodeLine{2018                   j-\/>eob\_run = (1 << \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}});}
\DoxyCodeLine{2019                   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}})}
\DoxyCodeLine{2020                      j-\/>eob\_run += stbi\_\_jpeg\_get\_bits(j, \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}});}
\DoxyCodeLine{2021                   -\/-\/j-\/>eob\_run;}
\DoxyCodeLine{2022                   \textcolor{keywordflow}{break};}
\DoxyCodeLine{2023                \}}
\DoxyCodeLine{2024                k += 16;}
\DoxyCodeLine{2025             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2026                k += \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{2027                zig = stbi\_\_jpeg\_dezigzag[k++];}
\DoxyCodeLine{2028                \mbox{\hyperlink{structdata}{data}}[zig] = (short) (stbi\_\_extend\_receive(j,s) << shift);}
\DoxyCodeLine{2029             \}}
\DoxyCodeLine{2030          \}}
\DoxyCodeLine{2031       \} \textcolor{keywordflow}{while} (k <= j-\/>spec\_end);}
\DoxyCodeLine{2032    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2033       \textcolor{comment}{// refinement scan for these AC coefficients}}
\DoxyCodeLine{2034 }
\DoxyCodeLine{2035       \textcolor{keywordtype}{short} bit = (short) (1 << j-\/>succ\_low);}
\DoxyCodeLine{2036 }
\DoxyCodeLine{2037       \textcolor{keywordflow}{if} (j-\/>eob\_run) \{}
\DoxyCodeLine{2038          -\/-\/j-\/>eob\_run;}
\DoxyCodeLine{2039          \textcolor{keywordflow}{for} (k = j-\/>spec\_start; k <= j-\/>spec\_end; ++k) \{}
\DoxyCodeLine{2040             \textcolor{keywordtype}{short} *p = \&\mbox{\hyperlink{structdata}{data}}[stbi\_\_jpeg\_dezigzag[k]];}
\DoxyCodeLine{2041             \textcolor{keywordflow}{if} (*p != 0)}
\DoxyCodeLine{2042                \textcolor{keywordflow}{if} (stbi\_\_jpeg\_get\_bit(j))}
\DoxyCodeLine{2043                   \textcolor{keywordflow}{if} ((*p \& bit)==0) \{}
\DoxyCodeLine{2044                      \textcolor{keywordflow}{if} (*p > 0)}
\DoxyCodeLine{2045                         *p += bit;}
\DoxyCodeLine{2046                      \textcolor{keywordflow}{else}}
\DoxyCodeLine{2047                         *p -\/= bit;}
\DoxyCodeLine{2048                   \}}
\DoxyCodeLine{2049          \}}
\DoxyCodeLine{2050       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2051          k = j-\/>spec\_start;}
\DoxyCodeLine{2052          \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{2053             \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}},s;}
\DoxyCodeLine{2054             \textcolor{keywordtype}{int} rs = stbi\_\_jpeg\_huff\_decode(j, hac); \textcolor{comment}{// @OPTIMIZE see if we can use the fast path here, advance-\/by-\/r is so slow, eh}}
\DoxyCodeLine{2055             \textcolor{keywordflow}{if} (rs < 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2056             s = rs \& 15;}
\DoxyCodeLine{2057             \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = rs >> 4;}
\DoxyCodeLine{2058             \textcolor{keywordflow}{if} (s == 0) \{}
\DoxyCodeLine{2059                \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} < 15) \{}
\DoxyCodeLine{2060                   j-\/>eob\_run = (1 << \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}) -\/ 1;}
\DoxyCodeLine{2061                   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}})}
\DoxyCodeLine{2062                      j-\/>eob\_run += stbi\_\_jpeg\_get\_bits(j, \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}});}
\DoxyCodeLine{2063                   \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = 64; \textcolor{comment}{// force end of block}}
\DoxyCodeLine{2064                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2065                   \textcolor{comment}{// r=15 s=0 should write 16 0s, so we just do}}
\DoxyCodeLine{2066                   \textcolor{comment}{// a run of 15 0s and then write s (which is 0),}}
\DoxyCodeLine{2067                   \textcolor{comment}{// so we don't have to do anything special here}}
\DoxyCodeLine{2068                \}}
\DoxyCodeLine{2069             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2070                \textcolor{keywordflow}{if} (s != 1) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad huffman code"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2071                \textcolor{comment}{// sign bit}}
\DoxyCodeLine{2072                \textcolor{keywordflow}{if} (stbi\_\_jpeg\_get\_bit(j))}
\DoxyCodeLine{2073                   s = bit;}
\DoxyCodeLine{2074                \textcolor{keywordflow}{else}}
\DoxyCodeLine{2075                   s = -\/bit;}
\DoxyCodeLine{2076             \}}
\DoxyCodeLine{2077 }
\DoxyCodeLine{2078             \textcolor{comment}{// advance by r}}
\DoxyCodeLine{2079             \textcolor{keywordflow}{while} (k <= j-\/>spec\_end) \{}
\DoxyCodeLine{2080                \textcolor{keywordtype}{short} *p = \&\mbox{\hyperlink{structdata}{data}}[stbi\_\_jpeg\_dezigzag[k++]];}
\DoxyCodeLine{2081                \textcolor{keywordflow}{if} (*p != 0) \{}
\DoxyCodeLine{2082                   \textcolor{keywordflow}{if} (stbi\_\_jpeg\_get\_bit(j))}
\DoxyCodeLine{2083                      \textcolor{keywordflow}{if} ((*p \& bit)==0) \{}
\DoxyCodeLine{2084                         \textcolor{keywordflow}{if} (*p > 0)}
\DoxyCodeLine{2085                            *p += bit;}
\DoxyCodeLine{2086                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{2087                            *p -\/= bit;}
\DoxyCodeLine{2088                      \}}
\DoxyCodeLine{2089                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2090                   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} == 0) \{}
\DoxyCodeLine{2091                      *p = (short) s;}
\DoxyCodeLine{2092                      \textcolor{keywordflow}{break};}
\DoxyCodeLine{2093                   \}}
\DoxyCodeLine{2094                   -\/-\/\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{2095                \}}
\DoxyCodeLine{2096             \}}
\DoxyCodeLine{2097          \} \textcolor{keywordflow}{while} (k <= j-\/>spec\_end);}
\DoxyCodeLine{2098       \}}
\DoxyCodeLine{2099    \}}
\DoxyCodeLine{2100    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2101 \}}
\DoxyCodeLine{2102 }
\DoxyCodeLine{2103 \textcolor{comment}{// take a -\/128..127 value and stbi\_\_clamp it and convert to 0..255}}
\DoxyCodeLine{2104 stbi\_inline \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_clamp(\textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}})}
\DoxyCodeLine{2105 \{}
\DoxyCodeLine{2106    \textcolor{comment}{// trick to use a single test to catch both cases}}
\DoxyCodeLine{2107    \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} > 255) \{}
\DoxyCodeLine{2108       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2109       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} > 255) \textcolor{keywordflow}{return} 255;}
\DoxyCodeLine{2110    \}}
\DoxyCodeLine{2111    \textcolor{keywordflow}{return} (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}};}
\DoxyCodeLine{2112 \}}
\DoxyCodeLine{2113 }
\DoxyCodeLine{2114 \textcolor{preprocessor}{\#define stbi\_\_f2f(x)  ((int) (((x) * 4096 + 0.5)))}}
\DoxyCodeLine{2115 \textcolor{preprocessor}{\#define stbi\_\_fsh(x)  ((x) << 12)}}
\DoxyCodeLine{2116 }
\DoxyCodeLine{2117 \textcolor{comment}{// derived from jidctint -\/-\/ DCT\_ISLOW}}
\DoxyCodeLine{2118 \textcolor{preprocessor}{\#define STBI\_\_IDCT\_1D(s0,s1,s2,s3,s4,s5,s6,s7) \(\backslash\)}}
\DoxyCodeLine{2119 \textcolor{preprocessor}{   int t0,t1,t2,t3,p1,p2,p3,p4,p5,x0,x1,x2,x3; \(\backslash\)}}
\DoxyCodeLine{2120 \textcolor{preprocessor}{   p2 = s2;                                    \(\backslash\)}}
\DoxyCodeLine{2121 \textcolor{preprocessor}{   p3 = s6;                                    \(\backslash\)}}
\DoxyCodeLine{2122 \textcolor{preprocessor}{   p1 = (p2+p3) * stbi\_\_f2f(0.5411961f);       \(\backslash\)}}
\DoxyCodeLine{2123 \textcolor{preprocessor}{   t2 = p1 + p3*stbi\_\_f2f(-\/1.847759065f);      \(\backslash\)}}
\DoxyCodeLine{2124 \textcolor{preprocessor}{   t3 = p1 + p2*stbi\_\_f2f( 0.765366865f);      \(\backslash\)}}
\DoxyCodeLine{2125 \textcolor{preprocessor}{   p2 = s0;                                    \(\backslash\)}}
\DoxyCodeLine{2126 \textcolor{preprocessor}{   p3 = s4;                                    \(\backslash\)}}
\DoxyCodeLine{2127 \textcolor{preprocessor}{   t0 = stbi\_\_fsh(p2+p3);                      \(\backslash\)}}
\DoxyCodeLine{2128 \textcolor{preprocessor}{   t1 = stbi\_\_fsh(p2-\/p3);                      \(\backslash\)}}
\DoxyCodeLine{2129 \textcolor{preprocessor}{   x0 = t0+t3;                                 \(\backslash\)}}
\DoxyCodeLine{2130 \textcolor{preprocessor}{   x3 = t0-\/t3;                                 \(\backslash\)}}
\DoxyCodeLine{2131 \textcolor{preprocessor}{   x1 = t1+t2;                                 \(\backslash\)}}
\DoxyCodeLine{2132 \textcolor{preprocessor}{   x2 = t1-\/t2;                                 \(\backslash\)}}
\DoxyCodeLine{2133 \textcolor{preprocessor}{   t0 = s7;                                    \(\backslash\)}}
\DoxyCodeLine{2134 \textcolor{preprocessor}{   t1 = s5;                                    \(\backslash\)}}
\DoxyCodeLine{2135 \textcolor{preprocessor}{   t2 = s3;                                    \(\backslash\)}}
\DoxyCodeLine{2136 \textcolor{preprocessor}{   t3 = s1;                                    \(\backslash\)}}
\DoxyCodeLine{2137 \textcolor{preprocessor}{   p3 = t0+t2;                                 \(\backslash\)}}
\DoxyCodeLine{2138 \textcolor{preprocessor}{   p4 = t1+t3;                                 \(\backslash\)}}
\DoxyCodeLine{2139 \textcolor{preprocessor}{   p1 = t0+t3;                                 \(\backslash\)}}
\DoxyCodeLine{2140 \textcolor{preprocessor}{   p2 = t1+t2;                                 \(\backslash\)}}
\DoxyCodeLine{2141 \textcolor{preprocessor}{   p5 = (p3+p4)*stbi\_\_f2f( 1.175875602f);      \(\backslash\)}}
\DoxyCodeLine{2142 \textcolor{preprocessor}{   t0 = t0*stbi\_\_f2f( 0.298631336f);           \(\backslash\)}}
\DoxyCodeLine{2143 \textcolor{preprocessor}{   t1 = t1*stbi\_\_f2f( 2.053119869f);           \(\backslash\)}}
\DoxyCodeLine{2144 \textcolor{preprocessor}{   t2 = t2*stbi\_\_f2f( 3.072711026f);           \(\backslash\)}}
\DoxyCodeLine{2145 \textcolor{preprocessor}{   t3 = t3*stbi\_\_f2f( 1.501321110f);           \(\backslash\)}}
\DoxyCodeLine{2146 \textcolor{preprocessor}{   p1 = p5 + p1*stbi\_\_f2f(-\/0.899976223f);      \(\backslash\)}}
\DoxyCodeLine{2147 \textcolor{preprocessor}{   p2 = p5 + p2*stbi\_\_f2f(-\/2.562915447f);      \(\backslash\)}}
\DoxyCodeLine{2148 \textcolor{preprocessor}{   p3 = p3*stbi\_\_f2f(-\/1.961570560f);           \(\backslash\)}}
\DoxyCodeLine{2149 \textcolor{preprocessor}{   p4 = p4*stbi\_\_f2f(-\/0.390180644f);           \(\backslash\)}}
\DoxyCodeLine{2150 \textcolor{preprocessor}{   t3 += p1+p4;                                \(\backslash\)}}
\DoxyCodeLine{2151 \textcolor{preprocessor}{   t2 += p2+p3;                                \(\backslash\)}}
\DoxyCodeLine{2152 \textcolor{preprocessor}{   t1 += p2+p4;                                \(\backslash\)}}
\DoxyCodeLine{2153 \textcolor{preprocessor}{   t0 += p1+p3;}}
\DoxyCodeLine{2154 }
\DoxyCodeLine{2155 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_idct\_block(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{short} \mbox{\hyperlink{structdata}{data}}[64])}
\DoxyCodeLine{2156 \{}
\DoxyCodeLine{2157    \textcolor{keywordtype}{int} i,val[64],*v=val;}
\DoxyCodeLine{2158    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *o;}
\DoxyCodeLine{2159    \textcolor{keywordtype}{short} *\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}} = \mbox{\hyperlink{darknet_8h_a493583f6fc164cf849745e01e4c04ab5}{data}};}
\DoxyCodeLine{2160 }
\DoxyCodeLine{2161    \textcolor{comment}{// columns}}
\DoxyCodeLine{2162    \textcolor{keywordflow}{for} (i=0; i < 8; ++i,++\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}, ++v) \{}
\DoxyCodeLine{2163       \textcolor{comment}{// if all zeroes, shortcut -\/-\/ this avoids dequantizing 0s and IDCTing}}
\DoxyCodeLine{2164       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[ 8]==0 \&\& \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[16]==0 \&\& \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[24]==0 \&\& \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[32]==0}
\DoxyCodeLine{2165            \&\& \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[40]==0 \&\& \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[48]==0 \&\& \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[56]==0) \{}
\DoxyCodeLine{2166          \textcolor{comment}{//    no shortcut                 0     seconds}}
\DoxyCodeLine{2167          \textcolor{comment}{//    (1|2|3|4|5|6|7)==0          0     seconds}}
\DoxyCodeLine{2168          \textcolor{comment}{//    all separate               -\/0.047 seconds}}
\DoxyCodeLine{2169          \textcolor{comment}{//    1 \&\& 2|3 \&\& 4|5 \&\& 6|7:    -\/0.047 seconds}}
\DoxyCodeLine{2170          \textcolor{keywordtype}{int} dcterm = \mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[0] << 2;}
\DoxyCodeLine{2171          v[0] = v[8] = v[16] = v[24] = v[32] = v[40] = v[48] = v[56] = dcterm;}
\DoxyCodeLine{2172       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2173          STBI\_\_IDCT\_1D(\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[ 0],\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[ 8],\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[16],\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[24],\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[32],\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[40],\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[48],\mbox{\hyperlink{namespacemkdoc_a85ae95dfe8536ee978dcacf1f5dcfe00}{d}}[56])}
\DoxyCodeLine{2174          \textcolor{comment}{// constants scaled things up by 1<<12; let's bring them back}}
\DoxyCodeLine{2175          \textcolor{comment}{// down, but keep 2 extra bits of precision}}
\DoxyCodeLine{2176          x0 += 512; x1 += 512; x2 += 512; x3 += 512;}
\DoxyCodeLine{2177          v[ 0] = (x0+t3) >> 10;}
\DoxyCodeLine{2178          v[56] = (x0-\/t3) >> 10;}
\DoxyCodeLine{2179          v[ 8] = (x1+t2) >> 10;}
\DoxyCodeLine{2180          v[48] = (x1-\/t2) >> 10;}
\DoxyCodeLine{2181          v[16] = (x2+\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}) >> 10;}
\DoxyCodeLine{2182          v[40] = (x2-\/\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}) >> 10;}
\DoxyCodeLine{2183          v[24] = (x3+\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}}) >> 10;}
\DoxyCodeLine{2184          v[32] = (x3-\/\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}}) >> 10;}
\DoxyCodeLine{2185       \}}
\DoxyCodeLine{2186    \}}
\DoxyCodeLine{2187 }
\DoxyCodeLine{2188    \textcolor{keywordflow}{for} (i=0, v=val, o=out; i < 8; ++i,v+=8,o+=out\_stride) \{}
\DoxyCodeLine{2189       \textcolor{comment}{// no fast case since the first 1D IDCT spread components out}}
\DoxyCodeLine{2190       STBI\_\_IDCT\_1D(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7])}
\DoxyCodeLine{2191       \textcolor{comment}{// constants scaled things up by 1<<12, plus we had 1<<2 from first}}
\DoxyCodeLine{2192       \textcolor{comment}{// loop, plus horizontal and vertical each scale by sqrt(8) so together}}
\DoxyCodeLine{2193       \textcolor{comment}{// we've got an extra 1<<3, so 1<<17 total we need to remove.}}
\DoxyCodeLine{2194       \textcolor{comment}{// so we want to round that, which means adding 0.5 * 1<<17,}}
\DoxyCodeLine{2195       \textcolor{comment}{// aka 65536. Also, we'll end up with -\/128 to 127 that we want}}
\DoxyCodeLine{2196       \textcolor{comment}{// to encode as 0..255 by adding 128, so we'll add that before the shift}}
\DoxyCodeLine{2197       x0 += 65536 + (128<<17);}
\DoxyCodeLine{2198       x1 += 65536 + (128<<17);}
\DoxyCodeLine{2199       x2 += 65536 + (128<<17);}
\DoxyCodeLine{2200       x3 += 65536 + (128<<17);}
\DoxyCodeLine{2201       \textcolor{comment}{// tried computing the shifts into temps, or'ing the temps to see}}
\DoxyCodeLine{2202       \textcolor{comment}{// if any were out of range, but that was slower}}
\DoxyCodeLine{2203       o[0] = stbi\_\_clamp((x0+t3) >> 17);}
\DoxyCodeLine{2204       o[7] = stbi\_\_clamp((x0-\/t3) >> 17);}
\DoxyCodeLine{2205       o[1] = stbi\_\_clamp((x1+t2) >> 17);}
\DoxyCodeLine{2206       o[6] = stbi\_\_clamp((x1-\/t2) >> 17);}
\DoxyCodeLine{2207       o[2] = stbi\_\_clamp((x2+\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}) >> 17);}
\DoxyCodeLine{2208       o[5] = stbi\_\_clamp((x2-\/\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}) >> 17);}
\DoxyCodeLine{2209       o[3] = stbi\_\_clamp((x3+\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}}) >> 17);}
\DoxyCodeLine{2210       o[4] = stbi\_\_clamp((x3-\/\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}}) >> 17);}
\DoxyCodeLine{2211    \}}
\DoxyCodeLine{2212 \}}
\DoxyCodeLine{2213 }
\DoxyCodeLine{2214 \textcolor{preprocessor}{\#ifdef STBI\_SSE2}}
\DoxyCodeLine{2215 \textcolor{comment}{// sse2 integer IDCT. not the fastest possible implementation but it}}
\DoxyCodeLine{2216 \textcolor{comment}{// produces bit-\/identical results to the generic C version so it's}}
\DoxyCodeLine{2217 \textcolor{comment}{// fully "{}transparent"{}.}}
\DoxyCodeLine{2218 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_idct\_simd(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{short} \mbox{\hyperlink{structdata}{data}}[64])}
\DoxyCodeLine{2219 \{}
\DoxyCodeLine{2220    \textcolor{comment}{// This is constructed to match our regular (generic) integer IDCT exactly.}}
\DoxyCodeLine{2221    \_\_m128i row0, row1, row2, row3, row4, row5, row6, row7;}
\DoxyCodeLine{2222    \_\_m128i tmp;}
\DoxyCodeLine{2223 }
\DoxyCodeLine{2224    \textcolor{comment}{// dot product constant: even elems=x, odd elems=y}}
\DoxyCodeLine{2225 \textcolor{preprocessor}{   \#define dct\_const(x,y)  \_mm\_setr\_epi16((x),(y),(x),(y),(x),(y),(x),(y))}}
\DoxyCodeLine{2226 }
\DoxyCodeLine{2227    \textcolor{comment}{// out(0) = c0[even]*x + c0[odd]*y   (c0, x, y 16-\/bit, out 32-\/bit)}}
\DoxyCodeLine{2228    \textcolor{comment}{// out(1) = c1[even]*x + c1[odd]*y}}
\DoxyCodeLine{2229 \textcolor{preprocessor}{   \#define dct\_rot(out0,out1, x,y,c0,c1) \(\backslash\)}}
\DoxyCodeLine{2230 \textcolor{preprocessor}{      \_\_m128i c0\#\#lo = \_mm\_unpacklo\_epi16((x),(y)); \(\backslash\)}}
\DoxyCodeLine{2231 \textcolor{preprocessor}{      \_\_m128i c0\#\#hi = \_mm\_unpackhi\_epi16((x),(y)); \(\backslash\)}}
\DoxyCodeLine{2232 \textcolor{preprocessor}{      \_\_m128i out0\#\#\_l = \_mm\_madd\_epi16(c0\#\#lo, c0); \(\backslash\)}}
\DoxyCodeLine{2233 \textcolor{preprocessor}{      \_\_m128i out0\#\#\_h = \_mm\_madd\_epi16(c0\#\#hi, c0); \(\backslash\)}}
\DoxyCodeLine{2234 \textcolor{preprocessor}{      \_\_m128i out1\#\#\_l = \_mm\_madd\_epi16(c0\#\#lo, c1); \(\backslash\)}}
\DoxyCodeLine{2235 \textcolor{preprocessor}{      \_\_m128i out1\#\#\_h = \_mm\_madd\_epi16(c0\#\#hi, c1)}}
\DoxyCodeLine{2236 }
\DoxyCodeLine{2237    \textcolor{comment}{// out = in << 12  (in 16-\/bit, out 32-\/bit)}}
\DoxyCodeLine{2238 \textcolor{preprocessor}{   \#define dct\_widen(out, in) \(\backslash\)}}
\DoxyCodeLine{2239 \textcolor{preprocessor}{      \_\_m128i out\#\#\_l = \_mm\_srai\_epi32(\_mm\_unpacklo\_epi16(\_mm\_setzero\_si128(), (in)), 4); \(\backslash\)}}
\DoxyCodeLine{2240 \textcolor{preprocessor}{      \_\_m128i out\#\#\_h = \_mm\_srai\_epi32(\_mm\_unpackhi\_epi16(\_mm\_setzero\_si128(), (in)), 4)}}
\DoxyCodeLine{2241 }
\DoxyCodeLine{2242    \textcolor{comment}{// wide add}}
\DoxyCodeLine{2243 \textcolor{preprocessor}{   \#define dct\_wadd(out, a, b) \(\backslash\)}}
\DoxyCodeLine{2244 \textcolor{preprocessor}{      \_\_m128i out\#\#\_l = \_mm\_add\_epi32(a\#\#\_l, b\#\#\_l); \(\backslash\)}}
\DoxyCodeLine{2245 \textcolor{preprocessor}{      \_\_m128i out\#\#\_h = \_mm\_add\_epi32(a\#\#\_h, b\#\#\_h)}}
\DoxyCodeLine{2246 }
\DoxyCodeLine{2247    \textcolor{comment}{// wide sub}}
\DoxyCodeLine{2248 \textcolor{preprocessor}{   \#define dct\_wsub(out, a, b) \(\backslash\)}}
\DoxyCodeLine{2249 \textcolor{preprocessor}{      \_\_m128i out\#\#\_l = \_mm\_sub\_epi32(a\#\#\_l, b\#\#\_l); \(\backslash\)}}
\DoxyCodeLine{2250 \textcolor{preprocessor}{      \_\_m128i out\#\#\_h = \_mm\_sub\_epi32(a\#\#\_h, b\#\#\_h)}}
\DoxyCodeLine{2251 }
\DoxyCodeLine{2252    \textcolor{comment}{// butterfly a/b, add bias, then shift by "{}s"{} and pack}}
\DoxyCodeLine{2253 \textcolor{preprocessor}{   \#define dct\_bfly32o(out0, out1, a,b,bias,s) \(\backslash\)}}
\DoxyCodeLine{2254 \textcolor{preprocessor}{      \{ \(\backslash\)}}
\DoxyCodeLine{2255 \textcolor{preprocessor}{         \_\_m128i abiased\_l = \_mm\_add\_epi32(a\#\#\_l, bias); \(\backslash\)}}
\DoxyCodeLine{2256 \textcolor{preprocessor}{         \_\_m128i abiased\_h = \_mm\_add\_epi32(a\#\#\_h, bias); \(\backslash\)}}
\DoxyCodeLine{2257 \textcolor{preprocessor}{         dct\_wadd(sum, abiased, b); \(\backslash\)}}
\DoxyCodeLine{2258 \textcolor{preprocessor}{         dct\_wsub(dif, abiased, b); \(\backslash\)}}
\DoxyCodeLine{2259 \textcolor{preprocessor}{         out0 = \_mm\_packs\_epi32(\_mm\_srai\_epi32(sum\_l, s), \_mm\_srai\_epi32(sum\_h, s)); \(\backslash\)}}
\DoxyCodeLine{2260 \textcolor{preprocessor}{         out1 = \_mm\_packs\_epi32(\_mm\_srai\_epi32(dif\_l, s), \_mm\_srai\_epi32(dif\_h, s)); \(\backslash\)}}
\DoxyCodeLine{2261 \textcolor{preprocessor}{      \}}}
\DoxyCodeLine{2262 }
\DoxyCodeLine{2263    \textcolor{comment}{// 8-\/bit interleave step (for transposes)}}
\DoxyCodeLine{2264 \textcolor{preprocessor}{   \#define dct\_interleave8(a, b) \(\backslash\)}}
\DoxyCodeLine{2265 \textcolor{preprocessor}{      tmp = a; \(\backslash\)}}
\DoxyCodeLine{2266 \textcolor{preprocessor}{      a = \_mm\_unpacklo\_epi8(a, b); \(\backslash\)}}
\DoxyCodeLine{2267 \textcolor{preprocessor}{      b = \_mm\_unpackhi\_epi8(tmp, b)}}
\DoxyCodeLine{2268 }
\DoxyCodeLine{2269    \textcolor{comment}{// 16-\/bit interleave step (for transposes)}}
\DoxyCodeLine{2270 \textcolor{preprocessor}{   \#define dct\_interleave16(a, b) \(\backslash\)}}
\DoxyCodeLine{2271 \textcolor{preprocessor}{      tmp = a; \(\backslash\)}}
\DoxyCodeLine{2272 \textcolor{preprocessor}{      a = \_mm\_unpacklo\_epi16(a, b); \(\backslash\)}}
\DoxyCodeLine{2273 \textcolor{preprocessor}{      b = \_mm\_unpackhi\_epi16(tmp, b)}}
\DoxyCodeLine{2274 }
\DoxyCodeLine{2275 \textcolor{preprocessor}{   \#define dct\_pass(bias,shift) \(\backslash\)}}
\DoxyCodeLine{2276 \textcolor{preprocessor}{      \{ \(\backslash\)}}
\DoxyCodeLine{2277 \textcolor{preprocessor}{         }\textcolor{comment}{/* even part */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{2278 \textcolor{preprocessor}{         dct\_rot(t2e,t3e, row2,row6, rot0\_0,rot0\_1); \(\backslash\)}}
\DoxyCodeLine{2279 \textcolor{preprocessor}{         \_\_m128i sum04 = \_mm\_add\_epi16(row0, row4); \(\backslash\)}}
\DoxyCodeLine{2280 \textcolor{preprocessor}{         \_\_m128i dif04 = \_mm\_sub\_epi16(row0, row4); \(\backslash\)}}
\DoxyCodeLine{2281 \textcolor{preprocessor}{         dct\_widen(t0e, sum04); \(\backslash\)}}
\DoxyCodeLine{2282 \textcolor{preprocessor}{         dct\_widen(t1e, dif04); \(\backslash\)}}
\DoxyCodeLine{2283 \textcolor{preprocessor}{         dct\_wadd(x0, t0e, t3e); \(\backslash\)}}
\DoxyCodeLine{2284 \textcolor{preprocessor}{         dct\_wsub(x3, t0e, t3e); \(\backslash\)}}
\DoxyCodeLine{2285 \textcolor{preprocessor}{         dct\_wadd(x1, t1e, t2e); \(\backslash\)}}
\DoxyCodeLine{2286 \textcolor{preprocessor}{         dct\_wsub(x2, t1e, t2e); \(\backslash\)}}
\DoxyCodeLine{2287 \textcolor{preprocessor}{         }\textcolor{comment}{/* odd part */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{2288 \textcolor{preprocessor}{         dct\_rot(y0o,y2o, row7,row3, rot2\_0,rot2\_1); \(\backslash\)}}
\DoxyCodeLine{2289 \textcolor{preprocessor}{         dct\_rot(y1o,y3o, row5,row1, rot3\_0,rot3\_1); \(\backslash\)}}
\DoxyCodeLine{2290 \textcolor{preprocessor}{         \_\_m128i sum17 = \_mm\_add\_epi16(row1, row7); \(\backslash\)}}
\DoxyCodeLine{2291 \textcolor{preprocessor}{         \_\_m128i sum35 = \_mm\_add\_epi16(row3, row5); \(\backslash\)}}
\DoxyCodeLine{2292 \textcolor{preprocessor}{         dct\_rot(y4o,y5o, sum17,sum35, rot1\_0,rot1\_1); \(\backslash\)}}
\DoxyCodeLine{2293 \textcolor{preprocessor}{         dct\_wadd(x4, y0o, y4o); \(\backslash\)}}
\DoxyCodeLine{2294 \textcolor{preprocessor}{         dct\_wadd(x5, y1o, y5o); \(\backslash\)}}
\DoxyCodeLine{2295 \textcolor{preprocessor}{         dct\_wadd(x6, y2o, y5o); \(\backslash\)}}
\DoxyCodeLine{2296 \textcolor{preprocessor}{         dct\_wadd(x7, y3o, y4o); \(\backslash\)}}
\DoxyCodeLine{2297 \textcolor{preprocessor}{         dct\_bfly32o(row0,row7, x0,x7,bias,shift); \(\backslash\)}}
\DoxyCodeLine{2298 \textcolor{preprocessor}{         dct\_bfly32o(row1,row6, x1,x6,bias,shift); \(\backslash\)}}
\DoxyCodeLine{2299 \textcolor{preprocessor}{         dct\_bfly32o(row2,row5, x2,x5,bias,shift); \(\backslash\)}}
\DoxyCodeLine{2300 \textcolor{preprocessor}{         dct\_bfly32o(row3,row4, x3,x4,bias,shift); \(\backslash\)}}
\DoxyCodeLine{2301 \textcolor{preprocessor}{      \}}}
\DoxyCodeLine{2302 }
\DoxyCodeLine{2303    \_\_m128i rot0\_0 = dct\_const(stbi\_\_f2f(0.5411961f), stbi\_\_f2f(0.5411961f) + stbi\_\_f2f(-\/1.847759065f));}
\DoxyCodeLine{2304    \_\_m128i rot0\_1 = dct\_const(stbi\_\_f2f(0.5411961f) + stbi\_\_f2f( 0.765366865f), stbi\_\_f2f(0.5411961f));}
\DoxyCodeLine{2305    \_\_m128i rot1\_0 = dct\_const(stbi\_\_f2f(1.175875602f) + stbi\_\_f2f(-\/0.899976223f), stbi\_\_f2f(1.175875602f));}
\DoxyCodeLine{2306    \_\_m128i rot1\_1 = dct\_const(stbi\_\_f2f(1.175875602f), stbi\_\_f2f(1.175875602f) + stbi\_\_f2f(-\/2.562915447f));}
\DoxyCodeLine{2307    \_\_m128i rot2\_0 = dct\_const(stbi\_\_f2f(-\/1.961570560f) + stbi\_\_f2f( 0.298631336f), stbi\_\_f2f(-\/1.961570560f));}
\DoxyCodeLine{2308    \_\_m128i rot2\_1 = dct\_const(stbi\_\_f2f(-\/1.961570560f), stbi\_\_f2f(-\/1.961570560f) + stbi\_\_f2f( 3.072711026f));}
\DoxyCodeLine{2309    \_\_m128i rot3\_0 = dct\_const(stbi\_\_f2f(-\/0.390180644f) + stbi\_\_f2f( 2.053119869f), stbi\_\_f2f(-\/0.390180644f));}
\DoxyCodeLine{2310    \_\_m128i rot3\_1 = dct\_const(stbi\_\_f2f(-\/0.390180644f), stbi\_\_f2f(-\/0.390180644f) + stbi\_\_f2f( 1.501321110f));}
\DoxyCodeLine{2311 }
\DoxyCodeLine{2312    \textcolor{comment}{// rounding biases in column/row passes, see stbi\_\_idct\_block for explanation.}}
\DoxyCodeLine{2313    \_\_m128i bias\_0 = \_mm\_set1\_epi32(512);}
\DoxyCodeLine{2314    \_\_m128i bias\_1 = \_mm\_set1\_epi32(65536 + (128<<17));}
\DoxyCodeLine{2315 }
\DoxyCodeLine{2316    \textcolor{comment}{// load}}
\DoxyCodeLine{2317    row0 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (\mbox{\hyperlink{structdata}{data}} + 0*8));}
\DoxyCodeLine{2318    row1 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (\mbox{\hyperlink{structdata}{data}} + 1*8));}
\DoxyCodeLine{2319    row2 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (\mbox{\hyperlink{structdata}{data}} + 2*8));}
\DoxyCodeLine{2320    row3 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (\mbox{\hyperlink{structdata}{data}} + 3*8));}
\DoxyCodeLine{2321    row4 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (\mbox{\hyperlink{structdata}{data}} + 4*8));}
\DoxyCodeLine{2322    row5 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (\mbox{\hyperlink{structdata}{data}} + 5*8));}
\DoxyCodeLine{2323    row6 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (\mbox{\hyperlink{structdata}{data}} + 6*8));}
\DoxyCodeLine{2324    row7 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (\mbox{\hyperlink{structdata}{data}} + 7*8));}
\DoxyCodeLine{2325 }
\DoxyCodeLine{2326    \textcolor{comment}{// column pass}}
\DoxyCodeLine{2327    dct\_pass(bias\_0, 10);}
\DoxyCodeLine{2328 }
\DoxyCodeLine{2329    \{}
\DoxyCodeLine{2330       \textcolor{comment}{// 16bit 8x8 transpose pass 1}}
\DoxyCodeLine{2331       dct\_interleave16(row0, row4);}
\DoxyCodeLine{2332       dct\_interleave16(row1, row5);}
\DoxyCodeLine{2333       dct\_interleave16(row2, row6);}
\DoxyCodeLine{2334       dct\_interleave16(row3, row7);}
\DoxyCodeLine{2335 }
\DoxyCodeLine{2336       \textcolor{comment}{// transpose pass 2}}
\DoxyCodeLine{2337       dct\_interleave16(row0, row2);}
\DoxyCodeLine{2338       dct\_interleave16(row1, row3);}
\DoxyCodeLine{2339       dct\_interleave16(row4, row6);}
\DoxyCodeLine{2340       dct\_interleave16(row5, row7);}
\DoxyCodeLine{2341 }
\DoxyCodeLine{2342       \textcolor{comment}{// transpose pass 3}}
\DoxyCodeLine{2343       dct\_interleave16(row0, row1);}
\DoxyCodeLine{2344       dct\_interleave16(row2, row3);}
\DoxyCodeLine{2345       dct\_interleave16(row4, row5);}
\DoxyCodeLine{2346       dct\_interleave16(row6, row7);}
\DoxyCodeLine{2347    \}}
\DoxyCodeLine{2348 }
\DoxyCodeLine{2349    \textcolor{comment}{// row pass}}
\DoxyCodeLine{2350    dct\_pass(bias\_1, 17);}
\DoxyCodeLine{2351 }
\DoxyCodeLine{2352    \{}
\DoxyCodeLine{2353       \textcolor{comment}{// pack}}
\DoxyCodeLine{2354       \_\_m128i p0 = \_mm\_packus\_epi16(row0, row1); \textcolor{comment}{// a0a1a2a3...a7b0b1b2b3...b7}}
\DoxyCodeLine{2355       \_\_m128i p1 = \_mm\_packus\_epi16(row2, row3);}
\DoxyCodeLine{2356       \_\_m128i p2 = \_mm\_packus\_epi16(row4, row5);}
\DoxyCodeLine{2357       \_\_m128i p3 = \_mm\_packus\_epi16(row6, row7);}
\DoxyCodeLine{2358 }
\DoxyCodeLine{2359       \textcolor{comment}{// 8bit 8x8 transpose pass 1}}
\DoxyCodeLine{2360       dct\_interleave8(p0, p2); \textcolor{comment}{// a0e0a1e1...}}
\DoxyCodeLine{2361       dct\_interleave8(p1, p3); \textcolor{comment}{// c0g0c1g1...}}
\DoxyCodeLine{2362 }
\DoxyCodeLine{2363       \textcolor{comment}{// transpose pass 2}}
\DoxyCodeLine{2364       dct\_interleave8(p0, p1); \textcolor{comment}{// a0c0e0g0...}}
\DoxyCodeLine{2365       dct\_interleave8(p2, p3); \textcolor{comment}{// b0d0f0h0...}}
\DoxyCodeLine{2366 }
\DoxyCodeLine{2367       \textcolor{comment}{// transpose pass 3}}
\DoxyCodeLine{2368       dct\_interleave8(p0, p2); \textcolor{comment}{// a0b0c0d0...}}
\DoxyCodeLine{2369       dct\_interleave8(p1, p3); \textcolor{comment}{// a4b4c4d4...}}
\DoxyCodeLine{2370 }
\DoxyCodeLine{2371       \textcolor{comment}{// store}}
\DoxyCodeLine{2372       \_mm\_storel\_epi64((\_\_m128i *) out, p0); out += out\_stride;}
\DoxyCodeLine{2373       \_mm\_storel\_epi64((\_\_m128i *) out, \_mm\_shuffle\_epi32(p0, 0x4e)); out += out\_stride;}
\DoxyCodeLine{2374       \_mm\_storel\_epi64((\_\_m128i *) out, p2); out += out\_stride;}
\DoxyCodeLine{2375       \_mm\_storel\_epi64((\_\_m128i *) out, \_mm\_shuffle\_epi32(p2, 0x4e)); out += out\_stride;}
\DoxyCodeLine{2376       \_mm\_storel\_epi64((\_\_m128i *) out, p1); out += out\_stride;}
\DoxyCodeLine{2377       \_mm\_storel\_epi64((\_\_m128i *) out, \_mm\_shuffle\_epi32(p1, 0x4e)); out += out\_stride;}
\DoxyCodeLine{2378       \_mm\_storel\_epi64((\_\_m128i *) out, p3); out += out\_stride;}
\DoxyCodeLine{2379       \_mm\_storel\_epi64((\_\_m128i *) out, \_mm\_shuffle\_epi32(p3, 0x4e));}
\DoxyCodeLine{2380    \}}
\DoxyCodeLine{2381 }
\DoxyCodeLine{2382 \textcolor{preprocessor}{\#undef dct\_const}}
\DoxyCodeLine{2383 \textcolor{preprocessor}{\#undef dct\_rot}}
\DoxyCodeLine{2384 \textcolor{preprocessor}{\#undef dct\_widen}}
\DoxyCodeLine{2385 \textcolor{preprocessor}{\#undef dct\_wadd}}
\DoxyCodeLine{2386 \textcolor{preprocessor}{\#undef dct\_wsub}}
\DoxyCodeLine{2387 \textcolor{preprocessor}{\#undef dct\_bfly32o}}
\DoxyCodeLine{2388 \textcolor{preprocessor}{\#undef dct\_interleave8}}
\DoxyCodeLine{2389 \textcolor{preprocessor}{\#undef dct\_interleave16}}
\DoxyCodeLine{2390 \textcolor{preprocessor}{\#undef dct\_pass}}
\DoxyCodeLine{2391 \}}
\DoxyCodeLine{2392 }
\DoxyCodeLine{2393 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_SSE2}}
\DoxyCodeLine{2394 }
\DoxyCodeLine{2395 \textcolor{preprocessor}{\#ifdef STBI\_NEON}}
\DoxyCodeLine{2396 }
\DoxyCodeLine{2397 \textcolor{comment}{// NEON integer IDCT. should produce bit-\/identical}}
\DoxyCodeLine{2398 \textcolor{comment}{// results to the generic C version.}}
\DoxyCodeLine{2399 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_idct\_simd(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{short} \mbox{\hyperlink{structdata}{data}}[64])}
\DoxyCodeLine{2400 \{}
\DoxyCodeLine{2401    int16x8\_t row0, row1, row2, row3, row4, row5, row6, row7;}
\DoxyCodeLine{2402 }
\DoxyCodeLine{2403    int16x4\_t rot0\_0 = vdup\_n\_s16(stbi\_\_f2f(0.5411961f));}
\DoxyCodeLine{2404    int16x4\_t rot0\_1 = vdup\_n\_s16(stbi\_\_f2f(-\/1.847759065f));}
\DoxyCodeLine{2405    int16x4\_t rot0\_2 = vdup\_n\_s16(stbi\_\_f2f( 0.765366865f));}
\DoxyCodeLine{2406    int16x4\_t rot1\_0 = vdup\_n\_s16(stbi\_\_f2f( 1.175875602f));}
\DoxyCodeLine{2407    int16x4\_t rot1\_1 = vdup\_n\_s16(stbi\_\_f2f(-\/0.899976223f));}
\DoxyCodeLine{2408    int16x4\_t rot1\_2 = vdup\_n\_s16(stbi\_\_f2f(-\/2.562915447f));}
\DoxyCodeLine{2409    int16x4\_t rot2\_0 = vdup\_n\_s16(stbi\_\_f2f(-\/1.961570560f));}
\DoxyCodeLine{2410    int16x4\_t rot2\_1 = vdup\_n\_s16(stbi\_\_f2f(-\/0.390180644f));}
\DoxyCodeLine{2411    int16x4\_t rot3\_0 = vdup\_n\_s16(stbi\_\_f2f( 0.298631336f));}
\DoxyCodeLine{2412    int16x4\_t rot3\_1 = vdup\_n\_s16(stbi\_\_f2f( 2.053119869f));}
\DoxyCodeLine{2413    int16x4\_t rot3\_2 = vdup\_n\_s16(stbi\_\_f2f( 3.072711026f));}
\DoxyCodeLine{2414    int16x4\_t rot3\_3 = vdup\_n\_s16(stbi\_\_f2f( 1.501321110f));}
\DoxyCodeLine{2415 }
\DoxyCodeLine{2416 \textcolor{preprocessor}{\#define dct\_long\_mul(out, inq, coeff) \(\backslash\)}}
\DoxyCodeLine{2417 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vmull\_s16(vget\_low\_s16(inq), coeff); \(\backslash\)}}
\DoxyCodeLine{2418 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vmull\_s16(vget\_high\_s16(inq), coeff)}}
\DoxyCodeLine{2419 }
\DoxyCodeLine{2420 \textcolor{preprocessor}{\#define dct\_long\_mac(out, acc, inq, coeff) \(\backslash\)}}
\DoxyCodeLine{2421 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vmlal\_s16(acc\#\#\_l, vget\_low\_s16(inq), coeff); \(\backslash\)}}
\DoxyCodeLine{2422 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vmlal\_s16(acc\#\#\_h, vget\_high\_s16(inq), coeff)}}
\DoxyCodeLine{2423 }
\DoxyCodeLine{2424 \textcolor{preprocessor}{\#define dct\_widen(out, inq) \(\backslash\)}}
\DoxyCodeLine{2425 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vshll\_n\_s16(vget\_low\_s16(inq), 12); \(\backslash\)}}
\DoxyCodeLine{2426 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vshll\_n\_s16(vget\_high\_s16(inq), 12)}}
\DoxyCodeLine{2427 }
\DoxyCodeLine{2428 \textcolor{comment}{// wide add}}
\DoxyCodeLine{2429 \textcolor{preprocessor}{\#define dct\_wadd(out, a, b) \(\backslash\)}}
\DoxyCodeLine{2430 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vaddq\_s32(a\#\#\_l, b\#\#\_l); \(\backslash\)}}
\DoxyCodeLine{2431 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vaddq\_s32(a\#\#\_h, b\#\#\_h)}}
\DoxyCodeLine{2432 }
\DoxyCodeLine{2433 \textcolor{comment}{// wide sub}}
\DoxyCodeLine{2434 \textcolor{preprocessor}{\#define dct\_wsub(out, a, b) \(\backslash\)}}
\DoxyCodeLine{2435 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vsubq\_s32(a\#\#\_l, b\#\#\_l); \(\backslash\)}}
\DoxyCodeLine{2436 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vsubq\_s32(a\#\#\_h, b\#\#\_h)}}
\DoxyCodeLine{2437 }
\DoxyCodeLine{2438 \textcolor{comment}{// butterfly a/b, then shift using "{}shiftop"{} by "{}s"{} and pack}}
\DoxyCodeLine{2439 \textcolor{preprocessor}{\#define dct\_bfly32o(out0,out1, a,b,shiftop,s) \(\backslash\)}}
\DoxyCodeLine{2440 \textcolor{preprocessor}{   \{ \(\backslash\)}}
\DoxyCodeLine{2441 \textcolor{preprocessor}{      dct\_wadd(sum, a, b); \(\backslash\)}}
\DoxyCodeLine{2442 \textcolor{preprocessor}{      dct\_wsub(dif, a, b); \(\backslash\)}}
\DoxyCodeLine{2443 \textcolor{preprocessor}{      out0 = vcombine\_s16(shiftop(sum\_l, s), shiftop(sum\_h, s)); \(\backslash\)}}
\DoxyCodeLine{2444 \textcolor{preprocessor}{      out1 = vcombine\_s16(shiftop(dif\_l, s), shiftop(dif\_h, s)); \(\backslash\)}}
\DoxyCodeLine{2445 \textcolor{preprocessor}{   \}}}
\DoxyCodeLine{2446 }
\DoxyCodeLine{2447 \textcolor{preprocessor}{\#define dct\_pass(shiftop, shift) \(\backslash\)}}
\DoxyCodeLine{2448 \textcolor{preprocessor}{   \{ \(\backslash\)}}
\DoxyCodeLine{2449 \textcolor{preprocessor}{      }\textcolor{comment}{/* even part */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{2450 \textcolor{preprocessor}{      int16x8\_t sum26 = vaddq\_s16(row2, row6); \(\backslash\)}}
\DoxyCodeLine{2451 \textcolor{preprocessor}{      dct\_long\_mul(p1e, sum26, rot0\_0); \(\backslash\)}}
\DoxyCodeLine{2452 \textcolor{preprocessor}{      dct\_long\_mac(t2e, p1e, row6, rot0\_1); \(\backslash\)}}
\DoxyCodeLine{2453 \textcolor{preprocessor}{      dct\_long\_mac(t3e, p1e, row2, rot0\_2); \(\backslash\)}}
\DoxyCodeLine{2454 \textcolor{preprocessor}{      int16x8\_t sum04 = vaddq\_s16(row0, row4); \(\backslash\)}}
\DoxyCodeLine{2455 \textcolor{preprocessor}{      int16x8\_t dif04 = vsubq\_s16(row0, row4); \(\backslash\)}}
\DoxyCodeLine{2456 \textcolor{preprocessor}{      dct\_widen(t0e, sum04); \(\backslash\)}}
\DoxyCodeLine{2457 \textcolor{preprocessor}{      dct\_widen(t1e, dif04); \(\backslash\)}}
\DoxyCodeLine{2458 \textcolor{preprocessor}{      dct\_wadd(x0, t0e, t3e); \(\backslash\)}}
\DoxyCodeLine{2459 \textcolor{preprocessor}{      dct\_wsub(x3, t0e, t3e); \(\backslash\)}}
\DoxyCodeLine{2460 \textcolor{preprocessor}{      dct\_wadd(x1, t1e, t2e); \(\backslash\)}}
\DoxyCodeLine{2461 \textcolor{preprocessor}{      dct\_wsub(x2, t1e, t2e); \(\backslash\)}}
\DoxyCodeLine{2462 \textcolor{preprocessor}{      }\textcolor{comment}{/* odd part */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{2463 \textcolor{preprocessor}{      int16x8\_t sum15 = vaddq\_s16(row1, row5); \(\backslash\)}}
\DoxyCodeLine{2464 \textcolor{preprocessor}{      int16x8\_t sum17 = vaddq\_s16(row1, row7); \(\backslash\)}}
\DoxyCodeLine{2465 \textcolor{preprocessor}{      int16x8\_t sum35 = vaddq\_s16(row3, row5); \(\backslash\)}}
\DoxyCodeLine{2466 \textcolor{preprocessor}{      int16x8\_t sum37 = vaddq\_s16(row3, row7); \(\backslash\)}}
\DoxyCodeLine{2467 \textcolor{preprocessor}{      int16x8\_t sumodd = vaddq\_s16(sum17, sum35); \(\backslash\)}}
\DoxyCodeLine{2468 \textcolor{preprocessor}{      dct\_long\_mul(p5o, sumodd, rot1\_0); \(\backslash\)}}
\DoxyCodeLine{2469 \textcolor{preprocessor}{      dct\_long\_mac(p1o, p5o, sum17, rot1\_1); \(\backslash\)}}
\DoxyCodeLine{2470 \textcolor{preprocessor}{      dct\_long\_mac(p2o, p5o, sum35, rot1\_2); \(\backslash\)}}
\DoxyCodeLine{2471 \textcolor{preprocessor}{      dct\_long\_mul(p3o, sum37, rot2\_0); \(\backslash\)}}
\DoxyCodeLine{2472 \textcolor{preprocessor}{      dct\_long\_mul(p4o, sum15, rot2\_1); \(\backslash\)}}
\DoxyCodeLine{2473 \textcolor{preprocessor}{      dct\_wadd(sump13o, p1o, p3o); \(\backslash\)}}
\DoxyCodeLine{2474 \textcolor{preprocessor}{      dct\_wadd(sump24o, p2o, p4o); \(\backslash\)}}
\DoxyCodeLine{2475 \textcolor{preprocessor}{      dct\_wadd(sump23o, p2o, p3o); \(\backslash\)}}
\DoxyCodeLine{2476 \textcolor{preprocessor}{      dct\_wadd(sump14o, p1o, p4o); \(\backslash\)}}
\DoxyCodeLine{2477 \textcolor{preprocessor}{      dct\_long\_mac(x4, sump13o, row7, rot3\_0); \(\backslash\)}}
\DoxyCodeLine{2478 \textcolor{preprocessor}{      dct\_long\_mac(x5, sump24o, row5, rot3\_1); \(\backslash\)}}
\DoxyCodeLine{2479 \textcolor{preprocessor}{      dct\_long\_mac(x6, sump23o, row3, rot3\_2); \(\backslash\)}}
\DoxyCodeLine{2480 \textcolor{preprocessor}{      dct\_long\_mac(x7, sump14o, row1, rot3\_3); \(\backslash\)}}
\DoxyCodeLine{2481 \textcolor{preprocessor}{      dct\_bfly32o(row0,row7, x0,x7,shiftop,shift); \(\backslash\)}}
\DoxyCodeLine{2482 \textcolor{preprocessor}{      dct\_bfly32o(row1,row6, x1,x6,shiftop,shift); \(\backslash\)}}
\DoxyCodeLine{2483 \textcolor{preprocessor}{      dct\_bfly32o(row2,row5, x2,x5,shiftop,shift); \(\backslash\)}}
\DoxyCodeLine{2484 \textcolor{preprocessor}{      dct\_bfly32o(row3,row4, x3,x4,shiftop,shift); \(\backslash\)}}
\DoxyCodeLine{2485 \textcolor{preprocessor}{   \}}}
\DoxyCodeLine{2486 }
\DoxyCodeLine{2487    \textcolor{comment}{// load}}
\DoxyCodeLine{2488    row0 = vld1q\_s16(\mbox{\hyperlink{structdata}{data}} + 0*8);}
\DoxyCodeLine{2489    row1 = vld1q\_s16(\mbox{\hyperlink{structdata}{data}} + 1*8);}
\DoxyCodeLine{2490    row2 = vld1q\_s16(\mbox{\hyperlink{structdata}{data}} + 2*8);}
\DoxyCodeLine{2491    row3 = vld1q\_s16(\mbox{\hyperlink{structdata}{data}} + 3*8);}
\DoxyCodeLine{2492    row4 = vld1q\_s16(\mbox{\hyperlink{structdata}{data}} + 4*8);}
\DoxyCodeLine{2493    row5 = vld1q\_s16(\mbox{\hyperlink{structdata}{data}} + 5*8);}
\DoxyCodeLine{2494    row6 = vld1q\_s16(\mbox{\hyperlink{structdata}{data}} + 6*8);}
\DoxyCodeLine{2495    row7 = vld1q\_s16(\mbox{\hyperlink{structdata}{data}} + 7*8);}
\DoxyCodeLine{2496 }
\DoxyCodeLine{2497    \textcolor{comment}{// add DC bias}}
\DoxyCodeLine{2498    row0 = vaddq\_s16(row0, vsetq\_lane\_s16(1024, vdupq\_n\_s16(0), 0));}
\DoxyCodeLine{2499 }
\DoxyCodeLine{2500    \textcolor{comment}{// column pass}}
\DoxyCodeLine{2501    dct\_pass(vrshrn\_n\_s32, 10);}
\DoxyCodeLine{2502 }
\DoxyCodeLine{2503    \textcolor{comment}{// 16bit 8x8 transpose}}
\DoxyCodeLine{2504    \{}
\DoxyCodeLine{2505 \textcolor{comment}{// these three map to a single VTRN.16, VTRN.32, and VSWP, respectively.}}
\DoxyCodeLine{2506 \textcolor{comment}{// whether compilers actually get this is another story, sadly.}}
\DoxyCodeLine{2507 \textcolor{preprocessor}{\#define dct\_trn16(x, y) \{ int16x8x2\_t t = vtrnq\_s16(x, y); x = t.val[0]; y = t.val[1]; \}}}
\DoxyCodeLine{2508 \textcolor{preprocessor}{\#define dct\_trn32(x, y) \{ int32x4x2\_t t = vtrnq\_s32(vreinterpretq\_s32\_s16(x), vreinterpretq\_s32\_s16(y)); x = vreinterpretq\_s16\_s32(t.val[0]); y = vreinterpretq\_s16\_s32(t.val[1]); \}}}
\DoxyCodeLine{2509 \textcolor{preprocessor}{\#define dct\_trn64(x, y) \{ int16x8\_t x0 = x; int16x8\_t y0 = y; x = vcombine\_s16(vget\_low\_s16(x0), vget\_low\_s16(y0)); y = vcombine\_s16(vget\_high\_s16(x0), vget\_high\_s16(y0)); \}}}
\DoxyCodeLine{2510 }
\DoxyCodeLine{2511       \textcolor{comment}{// pass 1}}
\DoxyCodeLine{2512       dct\_trn16(row0, row1); \textcolor{comment}{// a0b0a2b2a4b4a6b6}}
\DoxyCodeLine{2513       dct\_trn16(row2, row3);}
\DoxyCodeLine{2514       dct\_trn16(row4, row5);}
\DoxyCodeLine{2515       dct\_trn16(row6, row7);}
\DoxyCodeLine{2516 }
\DoxyCodeLine{2517       \textcolor{comment}{// pass 2}}
\DoxyCodeLine{2518       dct\_trn32(row0, row2); \textcolor{comment}{// a0b0c0d0a4b4c4d4}}
\DoxyCodeLine{2519       dct\_trn32(row1, row3);}
\DoxyCodeLine{2520       dct\_trn32(row4, row6);}
\DoxyCodeLine{2521       dct\_trn32(row5, row7);}
\DoxyCodeLine{2522 }
\DoxyCodeLine{2523       \textcolor{comment}{// pass 3}}
\DoxyCodeLine{2524       dct\_trn64(row0, row4); \textcolor{comment}{// a0b0c0d0e0f0g0h0}}
\DoxyCodeLine{2525       dct\_trn64(row1, row5);}
\DoxyCodeLine{2526       dct\_trn64(row2, row6);}
\DoxyCodeLine{2527       dct\_trn64(row3, row7);}
\DoxyCodeLine{2528 }
\DoxyCodeLine{2529 \textcolor{preprocessor}{\#undef dct\_trn16}}
\DoxyCodeLine{2530 \textcolor{preprocessor}{\#undef dct\_trn32}}
\DoxyCodeLine{2531 \textcolor{preprocessor}{\#undef dct\_trn64}}
\DoxyCodeLine{2532    \}}
\DoxyCodeLine{2533 }
\DoxyCodeLine{2534    \textcolor{comment}{// row pass}}
\DoxyCodeLine{2535    \textcolor{comment}{// vrshrn\_n\_s32 only supports shifts up to 16, we need}}
\DoxyCodeLine{2536    \textcolor{comment}{// 17. so do a non-\/rounding shift of 16 first then follow}}
\DoxyCodeLine{2537    \textcolor{comment}{// up with a rounding shift by 1.}}
\DoxyCodeLine{2538    dct\_pass(vshrn\_n\_s32, 16);}
\DoxyCodeLine{2539 }
\DoxyCodeLine{2540    \{}
\DoxyCodeLine{2541       \textcolor{comment}{// pack and round}}
\DoxyCodeLine{2542       uint8x8\_t p0 = vqrshrun\_n\_s16(row0, 1);}
\DoxyCodeLine{2543       uint8x8\_t p1 = vqrshrun\_n\_s16(row1, 1);}
\DoxyCodeLine{2544       uint8x8\_t p2 = vqrshrun\_n\_s16(row2, 1);}
\DoxyCodeLine{2545       uint8x8\_t p3 = vqrshrun\_n\_s16(row3, 1);}
\DoxyCodeLine{2546       uint8x8\_t p4 = vqrshrun\_n\_s16(row4, 1);}
\DoxyCodeLine{2547       uint8x8\_t p5 = vqrshrun\_n\_s16(row5, 1);}
\DoxyCodeLine{2548       uint8x8\_t p6 = vqrshrun\_n\_s16(row6, 1);}
\DoxyCodeLine{2549       uint8x8\_t p7 = vqrshrun\_n\_s16(row7, 1);}
\DoxyCodeLine{2550 }
\DoxyCodeLine{2551       \textcolor{comment}{// again, these can translate into one instruction, but often don't.}}
\DoxyCodeLine{2552 \textcolor{preprocessor}{\#define dct\_trn8\_8(x, y) \{ uint8x8x2\_t t = vtrn\_u8(x, y); x = t.val[0]; y = t.val[1]; \}}}
\DoxyCodeLine{2553 \textcolor{preprocessor}{\#define dct\_trn8\_16(x, y) \{ uint16x4x2\_t t = vtrn\_u16(vreinterpret\_u16\_u8(x), vreinterpret\_u16\_u8(y)); x = vreinterpret\_u8\_u16(t.val[0]); y = vreinterpret\_u8\_u16(t.val[1]); \}}}
\DoxyCodeLine{2554 \textcolor{preprocessor}{\#define dct\_trn8\_32(x, y) \{ uint32x2x2\_t t = vtrn\_u32(vreinterpret\_u32\_u8(x), vreinterpret\_u32\_u8(y)); x = vreinterpret\_u8\_u32(t.val[0]); y = vreinterpret\_u8\_u32(t.val[1]); \}}}
\DoxyCodeLine{2555 }
\DoxyCodeLine{2556       \textcolor{comment}{// sadly can't use interleaved stores here since we only write}}
\DoxyCodeLine{2557       \textcolor{comment}{// 8 bytes to each scan line!}}
\DoxyCodeLine{2558 }
\DoxyCodeLine{2559       \textcolor{comment}{// 8x8 8-\/bit transpose pass 1}}
\DoxyCodeLine{2560       dct\_trn8\_8(p0, p1);}
\DoxyCodeLine{2561       dct\_trn8\_8(p2, p3);}
\DoxyCodeLine{2562       dct\_trn8\_8(p4, p5);}
\DoxyCodeLine{2563       dct\_trn8\_8(p6, p7);}
\DoxyCodeLine{2564 }
\DoxyCodeLine{2565       \textcolor{comment}{// pass 2}}
\DoxyCodeLine{2566       dct\_trn8\_16(p0, p2);}
\DoxyCodeLine{2567       dct\_trn8\_16(p1, p3);}
\DoxyCodeLine{2568       dct\_trn8\_16(p4, p6);}
\DoxyCodeLine{2569       dct\_trn8\_16(p5, p7);}
\DoxyCodeLine{2570 }
\DoxyCodeLine{2571       \textcolor{comment}{// pass 3}}
\DoxyCodeLine{2572       dct\_trn8\_32(p0, p4);}
\DoxyCodeLine{2573       dct\_trn8\_32(p1, p5);}
\DoxyCodeLine{2574       dct\_trn8\_32(p2, p6);}
\DoxyCodeLine{2575       dct\_trn8\_32(p3, p7);}
\DoxyCodeLine{2576 }
\DoxyCodeLine{2577       \textcolor{comment}{// store}}
\DoxyCodeLine{2578       vst1\_u8(out, p0); out += out\_stride;}
\DoxyCodeLine{2579       vst1\_u8(out, p1); out += out\_stride;}
\DoxyCodeLine{2580       vst1\_u8(out, p2); out += out\_stride;}
\DoxyCodeLine{2581       vst1\_u8(out, p3); out += out\_stride;}
\DoxyCodeLine{2582       vst1\_u8(out, p4); out += out\_stride;}
\DoxyCodeLine{2583       vst1\_u8(out, p5); out += out\_stride;}
\DoxyCodeLine{2584       vst1\_u8(out, p6); out += out\_stride;}
\DoxyCodeLine{2585       vst1\_u8(out, p7);}
\DoxyCodeLine{2586 }
\DoxyCodeLine{2587 \textcolor{preprocessor}{\#undef dct\_trn8\_8}}
\DoxyCodeLine{2588 \textcolor{preprocessor}{\#undef dct\_trn8\_16}}
\DoxyCodeLine{2589 \textcolor{preprocessor}{\#undef dct\_trn8\_32}}
\DoxyCodeLine{2590    \}}
\DoxyCodeLine{2591 }
\DoxyCodeLine{2592 \textcolor{preprocessor}{\#undef dct\_long\_mul}}
\DoxyCodeLine{2593 \textcolor{preprocessor}{\#undef dct\_long\_mac}}
\DoxyCodeLine{2594 \textcolor{preprocessor}{\#undef dct\_widen}}
\DoxyCodeLine{2595 \textcolor{preprocessor}{\#undef dct\_wadd}}
\DoxyCodeLine{2596 \textcolor{preprocessor}{\#undef dct\_wsub}}
\DoxyCodeLine{2597 \textcolor{preprocessor}{\#undef dct\_bfly32o}}
\DoxyCodeLine{2598 \textcolor{preprocessor}{\#undef dct\_pass}}
\DoxyCodeLine{2599 \}}
\DoxyCodeLine{2600 }
\DoxyCodeLine{2601 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NEON}}
\DoxyCodeLine{2602 }
\DoxyCodeLine{2603 \textcolor{preprocessor}{\#define STBI\_\_MARKER\_none  0xff}}
\DoxyCodeLine{2604 \textcolor{comment}{// if there's a pending marker from the entropy stream, return that}}
\DoxyCodeLine{2605 \textcolor{comment}{// otherwise, fetch from the stream and get a marker. if there's no}}
\DoxyCodeLine{2606 \textcolor{comment}{// marker, return 0xff, which is never a valid marker value}}
\DoxyCodeLine{2607 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_get\_marker(stbi\_\_jpeg *j)}
\DoxyCodeLine{2608 \{}
\DoxyCodeLine{2609    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}};}
\DoxyCodeLine{2610    \textcolor{keywordflow}{if} (j-\/>marker != STBI\_\_MARKER\_none) \{ \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = j-\/>marker; j-\/>marker = STBI\_\_MARKER\_none; \textcolor{keywordflow}{return} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}; \}}
\DoxyCodeLine{2611    \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = stbi\_\_get8(j-\/>s);}
\DoxyCodeLine{2612    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} != 0xff) \textcolor{keywordflow}{return} STBI\_\_MARKER\_none;}
\DoxyCodeLine{2613    \textcolor{keywordflow}{while} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} == 0xff)}
\DoxyCodeLine{2614       \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = stbi\_\_get8(j-\/>s); \textcolor{comment}{// consume repeated 0xff fill bytes}}
\DoxyCodeLine{2615    \textcolor{keywordflow}{return} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}};}
\DoxyCodeLine{2616 \}}
\DoxyCodeLine{2617 }
\DoxyCodeLine{2618 \textcolor{comment}{// in each scan, we'll have scan\_n components, and the order}}
\DoxyCodeLine{2619 \textcolor{comment}{// of the components is specified by order[]}}
\DoxyCodeLine{2620 \textcolor{preprocessor}{\#define STBI\_\_RESTART(x)     ((x) >= 0xd0 \&\& (x) <= 0xd7)}}
\DoxyCodeLine{2621 }
\DoxyCodeLine{2622 \textcolor{comment}{// after a restart interval, stbi\_\_jpeg\_reset the entropy decoder and}}
\DoxyCodeLine{2623 \textcolor{comment}{// the dc prediction}}
\DoxyCodeLine{2624 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_jpeg\_reset(stbi\_\_jpeg *j)}
\DoxyCodeLine{2625 \{}
\DoxyCodeLine{2626    j-\/>code\_bits = 0;}
\DoxyCodeLine{2627    j-\/>code\_buffer = 0;}
\DoxyCodeLine{2628    j-\/>nomore = 0;}
\DoxyCodeLine{2629    j-\/>img\_comp[0].dc\_pred = j-\/>img\_comp[1].dc\_pred = j-\/>img\_comp[2].dc\_pred = j-\/>img\_comp[3].dc\_pred = 0;}
\DoxyCodeLine{2630    j-\/>marker = STBI\_\_MARKER\_none;}
\DoxyCodeLine{2631    j-\/>todo = j-\/>restart\_interval ? j-\/>restart\_interval : 0x7fffffff;}
\DoxyCodeLine{2632    j-\/>eob\_run = 0;}
\DoxyCodeLine{2633    \textcolor{comment}{// no more than 1<<31 MCUs if no restart\_interal? that's plenty safe,}}
\DoxyCodeLine{2634    \textcolor{comment}{// since we don't even allow 1<<30 pixels}}
\DoxyCodeLine{2635 \}}
\DoxyCodeLine{2636 }
\DoxyCodeLine{2637 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_entropy\_coded\_data(stbi\_\_jpeg *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{2638 \{}
\DoxyCodeLine{2639    stbi\_\_jpeg\_reset(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2640    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>progressive) \{}
\DoxyCodeLine{2641       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n == 1) \{}
\DoxyCodeLine{2642          \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{2643          STBI\_SIMD\_ALIGN(\textcolor{keywordtype}{short}, \mbox{\hyperlink{structdata}{data}}[64]);}
\DoxyCodeLine{2644          \textcolor{keywordtype}{int} n = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>order[0];}
\DoxyCodeLine{2645          \textcolor{comment}{// non-\/interleaved data, we just need to process one block at a time,}}
\DoxyCodeLine{2646          \textcolor{comment}{// in trivial scanline order}}
\DoxyCodeLine{2647          \textcolor{comment}{// number of blocks to do just depends on how many actual "{}pixels"{} this}}
\DoxyCodeLine{2648          \textcolor{comment}{// component has, independent of interleaved MCU blocking and such}}
\DoxyCodeLine{2649          \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} = (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].x+7) >> 3;}
\DoxyCodeLine{2650          \textcolor{keywordtype}{int} h = (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].y+7) >> 3;}
\DoxyCodeLine{2651          \textcolor{keywordflow}{for} (j=0; j < h; ++j) \{}
\DoxyCodeLine{2652             \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}; ++i) \{}
\DoxyCodeLine{2653                \textcolor{keywordtype}{int} ha = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].ha;}
\DoxyCodeLine{2654                \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \mbox{\hyperlink{structdata}{data}}, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_dc+\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].hd, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_ac+ha, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>fast\_ac[ha], n, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>dequant[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].tq])) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2655                \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idct\_block\_kernel(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].data+\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].w2*j*8+i*8, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].w2, \mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{2656                \textcolor{comment}{// every data block is an MCU, so countdown the restart interval}}
\DoxyCodeLine{2657                \textcolor{keywordflow}{if} (-\/-\/\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>todo <= 0) \{}
\DoxyCodeLine{2658                   \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>code\_bits < 24) stbi\_\_grow\_buffer\_unsafe(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2659                   \textcolor{comment}{// if it's NOT a restart, then just bail, so we get corrupt data}}
\DoxyCodeLine{2660                   \textcolor{comment}{// rather than no data}}
\DoxyCodeLine{2661                   \textcolor{keywordflow}{if} (!STBI\_\_RESTART(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>marker)) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2662                   stbi\_\_jpeg\_reset(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2663                \}}
\DoxyCodeLine{2664             \}}
\DoxyCodeLine{2665          \}}
\DoxyCodeLine{2666          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2667       \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// interleaved}}
\DoxyCodeLine{2668          \textcolor{keywordtype}{int} i,j,k,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}};}
\DoxyCodeLine{2669          STBI\_SIMD\_ALIGN(\textcolor{keywordtype}{short}, \mbox{\hyperlink{structdata}{data}}[64]);}
\DoxyCodeLine{2670          \textcolor{keywordflow}{for} (j=0; j < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_y; ++j) \{}
\DoxyCodeLine{2671             \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_x; ++i) \{}
\DoxyCodeLine{2672                \textcolor{comment}{// scan an interleaved mcu... process scan\_n components in order}}
\DoxyCodeLine{2673                \textcolor{keywordflow}{for} (k=0; k < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n; ++k) \{}
\DoxyCodeLine{2674                   \textcolor{keywordtype}{int} n = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>order[k];}
\DoxyCodeLine{2675                   \textcolor{comment}{// scan out an mcu's worth of this component; that's just determined}}
\DoxyCodeLine{2676                   \textcolor{comment}{// by the basic H and V specified for the component}}
\DoxyCodeLine{2677                   \textcolor{keywordflow}{for} (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}=0; \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].v; ++\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) \{}
\DoxyCodeLine{2678                      \textcolor{keywordflow}{for} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}=0; \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].h; ++\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) \{}
\DoxyCodeLine{2679                         \textcolor{keywordtype}{int} x2 = (i*\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].h + \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}})*8;}
\DoxyCodeLine{2680                         \textcolor{keywordtype}{int} y2 = (j*\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].v + \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}})*8;}
\DoxyCodeLine{2681                         \textcolor{keywordtype}{int} ha = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].ha;}
\DoxyCodeLine{2682                         \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \mbox{\hyperlink{structdata}{data}}, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_dc+\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].hd, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_ac+ha, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>fast\_ac[ha], n, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>dequant[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].tq])) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2683                         \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idct\_block\_kernel(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].data+\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].w2*y2+x2, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].w2, \mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{2684                      \}}
\DoxyCodeLine{2685                   \}}
\DoxyCodeLine{2686                \}}
\DoxyCodeLine{2687                \textcolor{comment}{// after all interleaved components, that's an interleaved MCU,}}
\DoxyCodeLine{2688                \textcolor{comment}{// so now count down the restart interval}}
\DoxyCodeLine{2689                \textcolor{keywordflow}{if} (-\/-\/\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>todo <= 0) \{}
\DoxyCodeLine{2690                   \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>code\_bits < 24) stbi\_\_grow\_buffer\_unsafe(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2691                   \textcolor{keywordflow}{if} (!STBI\_\_RESTART(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>marker)) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2692                   stbi\_\_jpeg\_reset(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2693                \}}
\DoxyCodeLine{2694             \}}
\DoxyCodeLine{2695          \}}
\DoxyCodeLine{2696          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2697       \}}
\DoxyCodeLine{2698    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2699       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n == 1) \{}
\DoxyCodeLine{2700          \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{2701          \textcolor{keywordtype}{int} n = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>order[0];}
\DoxyCodeLine{2702          \textcolor{comment}{// non-\/interleaved data, we just need to process one block at a time,}}
\DoxyCodeLine{2703          \textcolor{comment}{// in trivial scanline order}}
\DoxyCodeLine{2704          \textcolor{comment}{// number of blocks to do just depends on how many actual "{}pixels"{} this}}
\DoxyCodeLine{2705          \textcolor{comment}{// component has, independent of interleaved MCU blocking and such}}
\DoxyCodeLine{2706          \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} = (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].x+7) >> 3;}
\DoxyCodeLine{2707          \textcolor{keywordtype}{int} h = (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].y+7) >> 3;}
\DoxyCodeLine{2708          \textcolor{keywordflow}{for} (j=0; j < h; ++j) \{}
\DoxyCodeLine{2709             \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}; ++i) \{}
\DoxyCodeLine{2710                \textcolor{keywordtype}{short} *\mbox{\hyperlink{structdata}{data}} = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].coeff + 64 * (i + j * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].coeff\_w);}
\DoxyCodeLine{2711                \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_start == 0) \{}
\DoxyCodeLine{2712                   \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block\_prog\_dc(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \mbox{\hyperlink{structdata}{data}}, \&\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_dc[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].hd], n))}
\DoxyCodeLine{2713                      \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2714                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2715                   \textcolor{keywordtype}{int} ha = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].ha;}
\DoxyCodeLine{2716                   \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block\_prog\_ac(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \mbox{\hyperlink{structdata}{data}}, \&\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_ac[ha], \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>fast\_ac[ha]))}
\DoxyCodeLine{2717                      \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2718                \}}
\DoxyCodeLine{2719                \textcolor{comment}{// every data block is an MCU, so countdown the restart interval}}
\DoxyCodeLine{2720                \textcolor{keywordflow}{if} (-\/-\/\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>todo <= 0) \{}
\DoxyCodeLine{2721                   \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>code\_bits < 24) stbi\_\_grow\_buffer\_unsafe(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2722                   \textcolor{keywordflow}{if} (!STBI\_\_RESTART(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>marker)) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2723                   stbi\_\_jpeg\_reset(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2724                \}}
\DoxyCodeLine{2725             \}}
\DoxyCodeLine{2726          \}}
\DoxyCodeLine{2727          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2728       \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// interleaved}}
\DoxyCodeLine{2729          \textcolor{keywordtype}{int} i,j,k,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}};}
\DoxyCodeLine{2730          \textcolor{keywordflow}{for} (j=0; j < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_y; ++j) \{}
\DoxyCodeLine{2731             \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_x; ++i) \{}
\DoxyCodeLine{2732                \textcolor{comment}{// scan an interleaved mcu... process scan\_n components in order}}
\DoxyCodeLine{2733                \textcolor{keywordflow}{for} (k=0; k < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n; ++k) \{}
\DoxyCodeLine{2734                   \textcolor{keywordtype}{int} n = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>order[k];}
\DoxyCodeLine{2735                   \textcolor{comment}{// scan out an mcu's worth of this component; that's just determined}}
\DoxyCodeLine{2736                   \textcolor{comment}{// by the basic H and V specified for the component}}
\DoxyCodeLine{2737                   \textcolor{keywordflow}{for} (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}=0; \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].v; ++\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) \{}
\DoxyCodeLine{2738                      \textcolor{keywordflow}{for} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}=0; \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].h; ++\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) \{}
\DoxyCodeLine{2739                         \textcolor{keywordtype}{int} x2 = (i*\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].h + \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}});}
\DoxyCodeLine{2740                         \textcolor{keywordtype}{int} y2 = (j*\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].v + \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}});}
\DoxyCodeLine{2741                         \textcolor{keywordtype}{short} *\mbox{\hyperlink{structdata}{data}} = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].coeff + 64 * (x2 + y2 * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].coeff\_w);}
\DoxyCodeLine{2742                         \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block\_prog\_dc(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \mbox{\hyperlink{structdata}{data}}, \&\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_dc[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].hd], n))}
\DoxyCodeLine{2743                            \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2744                      \}}
\DoxyCodeLine{2745                   \}}
\DoxyCodeLine{2746                \}}
\DoxyCodeLine{2747                \textcolor{comment}{// after all interleaved components, that's an interleaved MCU,}}
\DoxyCodeLine{2748                \textcolor{comment}{// so now count down the restart interval}}
\DoxyCodeLine{2749                \textcolor{keywordflow}{if} (-\/-\/\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>todo <= 0) \{}
\DoxyCodeLine{2750                   \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>code\_bits < 24) stbi\_\_grow\_buffer\_unsafe(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2751                   \textcolor{keywordflow}{if} (!STBI\_\_RESTART(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>marker)) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2752                   stbi\_\_jpeg\_reset(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{2753                \}}
\DoxyCodeLine{2754             \}}
\DoxyCodeLine{2755          \}}
\DoxyCodeLine{2756          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2757       \}}
\DoxyCodeLine{2758    \}}
\DoxyCodeLine{2759 \}}
\DoxyCodeLine{2760 }
\DoxyCodeLine{2761 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_jpeg\_dequantize(\textcolor{keywordtype}{short} *\mbox{\hyperlink{structdata}{data}}, stbi\_\_uint16 *dequant)}
\DoxyCodeLine{2762 \{}
\DoxyCodeLine{2763    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2764    \textcolor{keywordflow}{for} (i=0; i < 64; ++i)}
\DoxyCodeLine{2765       \mbox{\hyperlink{structdata}{data}}[i] *= dequant[i];}
\DoxyCodeLine{2766 \}}
\DoxyCodeLine{2767 }
\DoxyCodeLine{2768 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_jpeg\_finish(stbi\_\_jpeg *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{2769 \{}
\DoxyCodeLine{2770    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>progressive) \{}
\DoxyCodeLine{2771       \textcolor{comment}{// dequantize and idct the data}}
\DoxyCodeLine{2772       \textcolor{keywordtype}{int} i,j,n;}
\DoxyCodeLine{2773       \textcolor{keywordflow}{for} (n=0; n < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n; ++n) \{}
\DoxyCodeLine{2774          \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} = (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].x+7) >> 3;}
\DoxyCodeLine{2775          \textcolor{keywordtype}{int} h = (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].y+7) >> 3;}
\DoxyCodeLine{2776          \textcolor{keywordflow}{for} (j=0; j < h; ++j) \{}
\DoxyCodeLine{2777             \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}; ++i) \{}
\DoxyCodeLine{2778                \textcolor{keywordtype}{short} *\mbox{\hyperlink{structdata}{data}} = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].coeff + 64 * (i + j * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].coeff\_w);}
\DoxyCodeLine{2779                stbi\_\_jpeg\_dequantize(\mbox{\hyperlink{structdata}{data}}, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>dequant[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].tq]);}
\DoxyCodeLine{2780                \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idct\_block\_kernel(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].data+\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].w2*j*8+i*8, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[n].w2, \mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{2781             \}}
\DoxyCodeLine{2782          \}}
\DoxyCodeLine{2783       \}}
\DoxyCodeLine{2784    \}}
\DoxyCodeLine{2785 \}}
\DoxyCodeLine{2786 }
\DoxyCodeLine{2787 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_process\_marker(stbi\_\_jpeg *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{int} m)}
\DoxyCodeLine{2788 \{}
\DoxyCodeLine{2789    \textcolor{keywordtype}{int} L;}
\DoxyCodeLine{2790    \textcolor{keywordflow}{switch} (m) \{}
\DoxyCodeLine{2791       \textcolor{keywordflow}{case} STBI\_\_MARKER\_none: \textcolor{comment}{// no marker found}}
\DoxyCodeLine{2792          \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}expected marker"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2793 }
\DoxyCodeLine{2794       \textcolor{keywordflow}{case} 0xDD: \textcolor{comment}{// DRI -\/ specify restart interval}}
\DoxyCodeLine{2795          \textcolor{keywordflow}{if} (stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s) != 4) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad DRI len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2796          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>restart\_interval = stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2797          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2798 }
\DoxyCodeLine{2799       \textcolor{keywordflow}{case} 0xDB: \textcolor{comment}{// DQT -\/ define quantization table}}
\DoxyCodeLine{2800          L = stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s)-\/2;}
\DoxyCodeLine{2801          \textcolor{keywordflow}{while} (L > 0) \{}
\DoxyCodeLine{2802             \textcolor{keywordtype}{int} q = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2803             \textcolor{keywordtype}{int} p = q >> 4, sixteen = (p != 0);}
\DoxyCodeLine{2804             \textcolor{keywordtype}{int} t = q \& 15,i;}
\DoxyCodeLine{2805             \textcolor{keywordflow}{if} (p != 0 \&\& p != 1) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad DQT type"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2806             \textcolor{keywordflow}{if} (t > 3) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad DQT table"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2807 }
\DoxyCodeLine{2808             \textcolor{keywordflow}{for} (i=0; i < 64; ++i)}
\DoxyCodeLine{2809                \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>dequant[t][stbi\_\_jpeg\_dezigzag[i]] = (stbi\_\_uint16)(sixteen ? stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s) : stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s));}
\DoxyCodeLine{2810             L -\/= (sixteen ? 129 : 65);}
\DoxyCodeLine{2811          \}}
\DoxyCodeLine{2812          \textcolor{keywordflow}{return} L==0;}
\DoxyCodeLine{2813 }
\DoxyCodeLine{2814       \textcolor{keywordflow}{case} 0xC4: \textcolor{comment}{// DHT -\/ define huffman table}}
\DoxyCodeLine{2815          L = stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s)-\/2;}
\DoxyCodeLine{2816          \textcolor{keywordflow}{while} (L > 0) \{}
\DoxyCodeLine{2817             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *v;}
\DoxyCodeLine{2818             \textcolor{keywordtype}{int} sizes[16],i,n=0;}
\DoxyCodeLine{2819             \textcolor{keywordtype}{int} q = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2820             \textcolor{keywordtype}{int} tc = q >> 4;}
\DoxyCodeLine{2821             \textcolor{keywordtype}{int} th = q \& 15;}
\DoxyCodeLine{2822             \textcolor{keywordflow}{if} (tc > 1 || th > 3) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad DHT header"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2823             \textcolor{keywordflow}{for} (i=0; i < 16; ++i) \{}
\DoxyCodeLine{2824                sizes[i] = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2825                n += sizes[i];}
\DoxyCodeLine{2826             \}}
\DoxyCodeLine{2827             L -\/= 17;}
\DoxyCodeLine{2828             \textcolor{keywordflow}{if} (tc == 0) \{}
\DoxyCodeLine{2829                \textcolor{keywordflow}{if} (!stbi\_\_build\_huffman(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_dc+th, sizes)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2830                v = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_dc[th].values;}
\DoxyCodeLine{2831             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2832                \textcolor{keywordflow}{if} (!stbi\_\_build\_huffman(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_ac+th, sizes)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2833                v = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_ac[th].values;}
\DoxyCodeLine{2834             \}}
\DoxyCodeLine{2835             \textcolor{keywordflow}{for} (i=0; i < n; ++i)}
\DoxyCodeLine{2836                v[i] = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2837             \textcolor{keywordflow}{if} (tc != 0)}
\DoxyCodeLine{2838                stbi\_\_build\_fast\_ac(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>fast\_ac[th], \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>huff\_ac + th);}
\DoxyCodeLine{2839             L -\/= n;}
\DoxyCodeLine{2840          \}}
\DoxyCodeLine{2841          \textcolor{keywordflow}{return} L==0;}
\DoxyCodeLine{2842    \}}
\DoxyCodeLine{2843 }
\DoxyCodeLine{2844    \textcolor{comment}{// check for comment block or APP blocks}}
\DoxyCodeLine{2845    \textcolor{keywordflow}{if} ((m >= 0xE0 \&\& m <= 0xEF) || m == 0xFE) \{}
\DoxyCodeLine{2846       L = stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2847       \textcolor{keywordflow}{if} (L < 2) \{}
\DoxyCodeLine{2848          \textcolor{keywordflow}{if} (m == 0xFE)}
\DoxyCodeLine{2849             \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad COM len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2850          \textcolor{keywordflow}{else}}
\DoxyCodeLine{2851             \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad APP len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2852       \}}
\DoxyCodeLine{2853       L -\/= 2;}
\DoxyCodeLine{2854 }
\DoxyCodeLine{2855       \textcolor{keywordflow}{if} (m == 0xE0 \&\& L >= 5) \{ \textcolor{comment}{// JFIF APP0 segment}}
\DoxyCodeLine{2856          \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} tag[5] = \{\textcolor{charliteral}{'J'},\textcolor{charliteral}{'F'},\textcolor{charliteral}{'I'},\textcolor{charliteral}{'F'},\textcolor{charliteral}{'\(\backslash\)0'}\};}
\DoxyCodeLine{2857          \textcolor{keywordtype}{int} ok = 1;}
\DoxyCodeLine{2858          \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2859          \textcolor{keywordflow}{for} (i=0; i < 5; ++i)}
\DoxyCodeLine{2860             \textcolor{keywordflow}{if} (stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s) != tag[i])}
\DoxyCodeLine{2861                ok = 0;}
\DoxyCodeLine{2862          L -\/= 5;}
\DoxyCodeLine{2863          \textcolor{keywordflow}{if} (ok)}
\DoxyCodeLine{2864             \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>jfif = 1;}
\DoxyCodeLine{2865       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m == 0xEE \&\& L >= 12) \{ \textcolor{comment}{// Adobe APP14 segment}}
\DoxyCodeLine{2866          \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} tag[6] = \{\textcolor{charliteral}{'A'},\textcolor{charliteral}{'d'},\textcolor{charliteral}{'o'},\textcolor{charliteral}{'b'},\textcolor{charliteral}{'e'},\textcolor{charliteral}{'\(\backslash\)0'}\};}
\DoxyCodeLine{2867          \textcolor{keywordtype}{int} ok = 1;}
\DoxyCodeLine{2868          \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2869          \textcolor{keywordflow}{for} (i=0; i < 6; ++i)}
\DoxyCodeLine{2870             \textcolor{keywordflow}{if} (stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s) != tag[i])}
\DoxyCodeLine{2871                ok = 0;}
\DoxyCodeLine{2872          L -\/= 6;}
\DoxyCodeLine{2873          \textcolor{keywordflow}{if} (ok) \{}
\DoxyCodeLine{2874             stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s); \textcolor{comment}{// version}}
\DoxyCodeLine{2875             stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s); \textcolor{comment}{// flags0}}
\DoxyCodeLine{2876             stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s); \textcolor{comment}{// flags1}}
\DoxyCodeLine{2877             \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>app14\_color\_transform = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s); \textcolor{comment}{// color transform}}
\DoxyCodeLine{2878             L -\/= 6;}
\DoxyCodeLine{2879          \}}
\DoxyCodeLine{2880       \}}
\DoxyCodeLine{2881 }
\DoxyCodeLine{2882       stbi\_\_skip(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s, L);}
\DoxyCodeLine{2883       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2884    \}}
\DoxyCodeLine{2885 }
\DoxyCodeLine{2886    \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}unknown marker"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2887 \}}
\DoxyCodeLine{2888 }
\DoxyCodeLine{2889 \textcolor{comment}{// after we see SOS}}
\DoxyCodeLine{2890 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_process\_scan\_header(stbi\_\_jpeg *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{2891 \{}
\DoxyCodeLine{2892    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2893    \textcolor{keywordtype}{int} Ls = stbi\_\_get16be(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2894    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2895    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n < 1 || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n > 4 || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n > (\textcolor{keywordtype}{int}) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad SOS component count"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2896    \textcolor{keywordflow}{if} (Ls != 6+2*\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad SOS len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2897    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>scan\_n; ++i) \{}
\DoxyCodeLine{2898       \textcolor{keywordtype}{int} \textcolor{keywordtype}{id} = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s), which;}
\DoxyCodeLine{2899       \textcolor{keywordtype}{int} q = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2900       \textcolor{keywordflow}{for} (which = 0; which < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n; ++which)}
\DoxyCodeLine{2901          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[which].id == \textcolor{keywordtype}{id})}
\DoxyCodeLine{2902             \textcolor{keywordflow}{break};}
\DoxyCodeLine{2903       \textcolor{keywordflow}{if} (which == \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// no match}}
\DoxyCodeLine{2904       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[which].hd = q >> 4;   \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[which].hd > 3) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad DC huff"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2905       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[which].ha = q \& 15;   \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[which].ha > 3) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad AC huff"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2906       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>order[i] = which;}
\DoxyCodeLine{2907    \}}
\DoxyCodeLine{2908 }
\DoxyCodeLine{2909    \{}
\DoxyCodeLine{2910       \textcolor{keywordtype}{int} aa;}
\DoxyCodeLine{2911       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_start = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2912       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_end   = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s); \textcolor{comment}{// should be 63, but might be 0}}
\DoxyCodeLine{2913       aa = stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s);}
\DoxyCodeLine{2914       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>succ\_high = (aa >> 4);}
\DoxyCodeLine{2915       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>succ\_low  = (aa \& 15);}
\DoxyCodeLine{2916       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>progressive) \{}
\DoxyCodeLine{2917          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_start > 63 || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_end > 63  || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_start > \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_end || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>succ\_high > 13 || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>succ\_low > 13)}
\DoxyCodeLine{2918             \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad SOS"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2919       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2920          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_start != 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad SOS"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2921          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>succ\_high != 0 || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>succ\_low != 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad SOS"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2922          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>spec\_end = 63;}
\DoxyCodeLine{2923       \}}
\DoxyCodeLine{2924    \}}
\DoxyCodeLine{2925 }
\DoxyCodeLine{2926    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2927 \}}
\DoxyCodeLine{2928 }
\DoxyCodeLine{2929 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_free\_jpeg\_components(stbi\_\_jpeg *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{int} ncomp, \textcolor{keywordtype}{int} why)}
\DoxyCodeLine{2930 \{}
\DoxyCodeLine{2931    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2932    \textcolor{keywordflow}{for} (i=0; i < ncomp; ++i) \{}
\DoxyCodeLine{2933       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_data) \{}
\DoxyCodeLine{2934          STBI\_FREE(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_data);}
\DoxyCodeLine{2935          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_data = NULL;}
\DoxyCodeLine{2936          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].data = NULL;}
\DoxyCodeLine{2937       \}}
\DoxyCodeLine{2938       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_coeff) \{}
\DoxyCodeLine{2939          STBI\_FREE(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_coeff);}
\DoxyCodeLine{2940          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_coeff = 0;}
\DoxyCodeLine{2941          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].coeff = 0;}
\DoxyCodeLine{2942       \}}
\DoxyCodeLine{2943       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].linebuf) \{}
\DoxyCodeLine{2944          STBI\_FREE(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].linebuf);}
\DoxyCodeLine{2945          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].linebuf = NULL;}
\DoxyCodeLine{2946       \}}
\DoxyCodeLine{2947    \}}
\DoxyCodeLine{2948    \textcolor{keywordflow}{return} why;}
\DoxyCodeLine{2949 \}}
\DoxyCodeLine{2950 }
\DoxyCodeLine{2951 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_process\_frame\_header(stbi\_\_jpeg *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{int} scan)}
\DoxyCodeLine{2952 \{}
\DoxyCodeLine{2953    stbi\_\_context *s = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s;}
\DoxyCodeLine{2954    \textcolor{keywordtype}{int} Lf,p,i,q, h\_max=1,v\_max=1,c;}
\DoxyCodeLine{2955    Lf = stbi\_\_get16be(s);         \textcolor{keywordflow}{if} (Lf < 11) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad SOF len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}}); \textcolor{comment}{// JPEG}}
\DoxyCodeLine{2956    p  = stbi\_\_get8(s);            \textcolor{keywordflow}{if} (p != 8) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}only 8-\/bit"{}},\textcolor{stringliteral}{"{}JPEG format not supported: 8-\/bit only"{}}); \textcolor{comment}{// JPEG baseline}}
\DoxyCodeLine{2957    s-\/>img\_y = stbi\_\_get16be(s);   \textcolor{keywordflow}{if} (s-\/>img\_y == 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}no header height"{}}, \textcolor{stringliteral}{"{}JPEG format not supported: delayed height"{}}); \textcolor{comment}{// Legal, but we don't handle it-\/-\/but neither does IJG}}
\DoxyCodeLine{2958    s-\/>img\_x = stbi\_\_get16be(s);   \textcolor{keywordflow}{if} (s-\/>img\_x == 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}0 width"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}}); \textcolor{comment}{// JPEG requires}}
\DoxyCodeLine{2959    c = stbi\_\_get8(s);}
\DoxyCodeLine{2960    \textcolor{keywordflow}{if} (c != 3 \&\& c != 1 \&\& c != 4) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad component count"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2961    s-\/>img\_n = c;}
\DoxyCodeLine{2962    \textcolor{keywordflow}{for} (i=0; i < c; ++i) \{}
\DoxyCodeLine{2963       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].data = NULL;}
\DoxyCodeLine{2964       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].linebuf = NULL;}
\DoxyCodeLine{2965    \}}
\DoxyCodeLine{2966 }
\DoxyCodeLine{2967    \textcolor{keywordflow}{if} (Lf != 8+3*s-\/>img\_n) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad SOF len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2968 }
\DoxyCodeLine{2969    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>rgb = 0;}
\DoxyCodeLine{2970    \textcolor{keywordflow}{for} (i=0; i < s-\/>img\_n; ++i) \{}
\DoxyCodeLine{2971       \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} rgb[3] = \{ \textcolor{charliteral}{'R'}, \textcolor{charliteral}{'G'}, \textcolor{charliteral}{'B'} \};}
\DoxyCodeLine{2972       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].id = stbi\_\_get8(s);}
\DoxyCodeLine{2973       \textcolor{keywordflow}{if} (s-\/>img\_n == 3 \&\& \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].id == rgb[i])}
\DoxyCodeLine{2974          ++\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>rgb;}
\DoxyCodeLine{2975       q = stbi\_\_get8(s);}
\DoxyCodeLine{2976       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h = (q >> 4);  \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h > 4) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad H"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2977       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].v = q \& 15;    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].v || \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].v > 4) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad V"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2978       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].tq = stbi\_\_get8(s);  \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].tq > 3) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad TQ"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2979    \}}
\DoxyCodeLine{2980 }
\DoxyCodeLine{2981    \textcolor{keywordflow}{if} (scan != STBI\_\_SCAN\_load) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2982 }
\DoxyCodeLine{2983    \textcolor{keywordflow}{if} (!stbi\_\_mad3sizes\_valid(s-\/>img\_x, s-\/>img\_y, s-\/>img\_n, 0)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}Image too large to decode"{}});}
\DoxyCodeLine{2984 }
\DoxyCodeLine{2985    \textcolor{keywordflow}{for} (i=0; i < s-\/>img\_n; ++i) \{}
\DoxyCodeLine{2986       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h > h\_max) h\_max = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h;}
\DoxyCodeLine{2987       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].v > v\_max) v\_max = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].v;}
\DoxyCodeLine{2988    \}}
\DoxyCodeLine{2989 }
\DoxyCodeLine{2990    \textcolor{comment}{// compute interleaved mcu info}}
\DoxyCodeLine{2991    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_h\_max = h\_max;}
\DoxyCodeLine{2992    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_v\_max = v\_max;}
\DoxyCodeLine{2993    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_w = h\_max * 8;}
\DoxyCodeLine{2994    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_h = v\_max * 8;}
\DoxyCodeLine{2995    \textcolor{comment}{// these sizes can't be more than 17 bits}}
\DoxyCodeLine{2996    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_x = (s-\/>img\_x + \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_w-\/1) / \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_w;}
\DoxyCodeLine{2997    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_y = (s-\/>img\_y + \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_h-\/1) / \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_h;}
\DoxyCodeLine{2998 }
\DoxyCodeLine{2999    \textcolor{keywordflow}{for} (i=0; i < s-\/>img\_n; ++i) \{}
\DoxyCodeLine{3000       \textcolor{comment}{// number of effective pixels (e.g. for non-\/interleaved MCU)}}
\DoxyCodeLine{3001       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].x = (s-\/>img\_x * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h + h\_max-\/1) / h\_max;}
\DoxyCodeLine{3002       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].y = (s-\/>img\_y * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].v + v\_max-\/1) / v\_max;}
\DoxyCodeLine{3003       \textcolor{comment}{// to simplify generation, we'll allocate enough memory to decode}}
\DoxyCodeLine{3004       \textcolor{comment}{// the bogus oversized data from using interleaved MCUs and their}}
\DoxyCodeLine{3005       \textcolor{comment}{// big blocks (e.g. a 16x16 iMCU on an image of width 33); we won't}}
\DoxyCodeLine{3006       \textcolor{comment}{// discard the extra data until colorspace conversion}}
\DoxyCodeLine{3007       \textcolor{comment}{//}}
\DoxyCodeLine{3008       \textcolor{comment}{// img\_mcu\_x, img\_mcu\_y: <=17 bits; comp[i].h and .v are <=4 (checked earlier)}}
\DoxyCodeLine{3009       \textcolor{comment}{// so these muls can't overflow with 32-\/bit ints (which we require)}}
\DoxyCodeLine{3010       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].w2 = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_x * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h * 8;}
\DoxyCodeLine{3011       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h2 = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_mcu\_y * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].v * 8;}
\DoxyCodeLine{3012       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].coeff = 0;}
\DoxyCodeLine{3013       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_coeff = 0;}
\DoxyCodeLine{3014       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].linebuf = NULL;}
\DoxyCodeLine{3015       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_data = stbi\_\_malloc\_mad2(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].w2, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h2, 15);}
\DoxyCodeLine{3016       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_data == NULL)}
\DoxyCodeLine{3017          \textcolor{keywordflow}{return} stbi\_\_free\_jpeg\_components(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, i+1, stbi\_\_err(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}));}
\DoxyCodeLine{3018       \textcolor{comment}{// align blocks for idct using mmx/sse}}
\DoxyCodeLine{3019       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].data = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}*) (((\textcolor{keywordtype}{size\_t}) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_data + 15) \& \string~15);}
\DoxyCodeLine{3020       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>progressive) \{}
\DoxyCodeLine{3021          \textcolor{comment}{// w2, h2 are multiples of 8 (see above)}}
\DoxyCodeLine{3022          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].coeff\_w = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].w2 / 8;}
\DoxyCodeLine{3023          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].coeff\_h = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h2 / 8;}
\DoxyCodeLine{3024          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_coeff = stbi\_\_malloc\_mad3(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].w2, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].h2, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{short}), 15);}
\DoxyCodeLine{3025          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_coeff == NULL)}
\DoxyCodeLine{3026             \textcolor{keywordflow}{return} stbi\_\_free\_jpeg\_components(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, i+1, stbi\_\_err(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}));}
\DoxyCodeLine{3027          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].coeff = (\textcolor{keywordtype}{short}*) (((\textcolor{keywordtype}{size\_t}) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[i].raw\_coeff + 15) \& \string~15);}
\DoxyCodeLine{3028       \}}
\DoxyCodeLine{3029    \}}
\DoxyCodeLine{3030 }
\DoxyCodeLine{3031    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3032 \}}
\DoxyCodeLine{3033 }
\DoxyCodeLine{3034 \textcolor{comment}{// use comparisons since in some cases we handle more than one case (e.g. SOF)}}
\DoxyCodeLine{3035 \textcolor{preprocessor}{\#define stbi\_\_DNL(x)         ((x) == 0xdc)}}
\DoxyCodeLine{3036 \textcolor{preprocessor}{\#define stbi\_\_SOI(x)         ((x) == 0xd8)}}
\DoxyCodeLine{3037 \textcolor{preprocessor}{\#define stbi\_\_EOI(x)         ((x) == 0xd9)}}
\DoxyCodeLine{3038 \textcolor{preprocessor}{\#define stbi\_\_SOF(x)         ((x) == 0xc0 || (x) == 0xc1 || (x) == 0xc2)}}
\DoxyCodeLine{3039 \textcolor{preprocessor}{\#define stbi\_\_SOS(x)         ((x) == 0xda)}}
\DoxyCodeLine{3040 }
\DoxyCodeLine{3041 \textcolor{preprocessor}{\#define stbi\_\_SOF\_progressive(x)   ((x) == 0xc2)}}
\DoxyCodeLine{3042 }
\DoxyCodeLine{3043 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_decode\_jpeg\_header(stbi\_\_jpeg *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{int} scan)}
\DoxyCodeLine{3044 \{}
\DoxyCodeLine{3045    \textcolor{keywordtype}{int} m;}
\DoxyCodeLine{3046    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>jfif = 0;}
\DoxyCodeLine{3047    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>app14\_color\_transform = -\/1; \textcolor{comment}{// valid values are 0,1,2}}
\DoxyCodeLine{3048    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>marker = STBI\_\_MARKER\_none; \textcolor{comment}{// initialize cached marker to empty}}
\DoxyCodeLine{3049    m = stbi\_\_get\_marker(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{3050    \textcolor{keywordflow}{if} (!stbi\_\_SOI(m)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}no SOI"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{3051    \textcolor{keywordflow}{if} (scan == STBI\_\_SCAN\_type) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3052    m = stbi\_\_get\_marker(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{3053    \textcolor{keywordflow}{while} (!stbi\_\_SOF(m)) \{}
\DoxyCodeLine{3054       \textcolor{keywordflow}{if} (!stbi\_\_process\_marker(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}},m)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3055       m = stbi\_\_get\_marker(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{3056       \textcolor{keywordflow}{while} (m == STBI\_\_MARKER\_none) \{}
\DoxyCodeLine{3057          \textcolor{comment}{// some files have extra padding after their blocks, so ok, we'll scan}}
\DoxyCodeLine{3058          \textcolor{keywordflow}{if} (stbi\_\_at\_eof(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}no SOF"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{3059          m = stbi\_\_get\_marker(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{3060       \}}
\DoxyCodeLine{3061    \}}
\DoxyCodeLine{3062    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>progressive = stbi\_\_SOF\_progressive(m);}
\DoxyCodeLine{3063    \textcolor{keywordflow}{if} (!stbi\_\_process\_frame\_header(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, scan)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3064    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3065 \}}
\DoxyCodeLine{3066 }
\DoxyCodeLine{3067 \textcolor{comment}{// decode image to YCbCr format}}
\DoxyCodeLine{3068 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_decode\_jpeg\_image(stbi\_\_jpeg *j)}
\DoxyCodeLine{3069 \{}
\DoxyCodeLine{3070    \textcolor{keywordtype}{int} m;}
\DoxyCodeLine{3071    \textcolor{keywordflow}{for} (m = 0; m < 4; m++) \{}
\DoxyCodeLine{3072       j-\/>img\_comp[m].raw\_data = NULL;}
\DoxyCodeLine{3073       j-\/>img\_comp[m].raw\_coeff = NULL;}
\DoxyCodeLine{3074    \}}
\DoxyCodeLine{3075    j-\/>restart\_interval = 0;}
\DoxyCodeLine{3076    \textcolor{keywordflow}{if} (!stbi\_\_decode\_jpeg\_header(j, STBI\_\_SCAN\_load)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3077    m = stbi\_\_get\_marker(j);}
\DoxyCodeLine{3078    \textcolor{keywordflow}{while} (!stbi\_\_EOI(m)) \{}
\DoxyCodeLine{3079       \textcolor{keywordflow}{if} (stbi\_\_SOS(m)) \{}
\DoxyCodeLine{3080          \textcolor{keywordflow}{if} (!stbi\_\_process\_scan\_header(j)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3081          \textcolor{keywordflow}{if} (!stbi\_\_parse\_entropy\_coded\_data(j)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3082          \textcolor{keywordflow}{if} (j-\/>marker == STBI\_\_MARKER\_none ) \{}
\DoxyCodeLine{3083             \textcolor{comment}{// handle 0s at the end of image data from IP Kamera 9060}}
\DoxyCodeLine{3084             \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(j-\/>s)) \{}
\DoxyCodeLine{3085                \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = stbi\_\_get8(j-\/>s);}
\DoxyCodeLine{3086                \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} == 255) \{}
\DoxyCodeLine{3087                   j-\/>marker = stbi\_\_get8(j-\/>s);}
\DoxyCodeLine{3088                   \textcolor{keywordflow}{break};}
\DoxyCodeLine{3089                \}}
\DoxyCodeLine{3090             \}}
\DoxyCodeLine{3091             \textcolor{comment}{// if we reach eof without hitting a marker, stbi\_\_get\_marker() below will fail and we'll eventually return 0}}
\DoxyCodeLine{3092          \}}
\DoxyCodeLine{3093       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (stbi\_\_DNL(m)) \{}
\DoxyCodeLine{3094          \textcolor{keywordtype}{int} Ld = stbi\_\_get16be(j-\/>s);}
\DoxyCodeLine{3095          stbi\_\_uint32 NL = stbi\_\_get16be(j-\/>s);}
\DoxyCodeLine{3096          \textcolor{keywordflow}{if} (Ld != 4) stbi\_\_err(\textcolor{stringliteral}{"{}bad DNL len"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{3097          \textcolor{keywordflow}{if} (NL != j-\/>s-\/>img\_y) stbi\_\_err(\textcolor{stringliteral}{"{}bad DNL height"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{3098       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3099          \textcolor{keywordflow}{if} (!stbi\_\_process\_marker(j, m)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3100       \}}
\DoxyCodeLine{3101       m = stbi\_\_get\_marker(j);}
\DoxyCodeLine{3102    \}}
\DoxyCodeLine{3103    \textcolor{keywordflow}{if} (j-\/>progressive)}
\DoxyCodeLine{3104       stbi\_\_jpeg\_finish(j);}
\DoxyCodeLine{3105    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3106 \}}
\DoxyCodeLine{3107 }
\DoxyCodeLine{3108 \textcolor{comment}{// static jfif-\/centered resampling (across block boundaries)}}
\DoxyCodeLine{3109 }
\DoxyCodeLine{3110 \textcolor{keyword}{typedef} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *(*resample\_row\_func)(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in0, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in1,}
\DoxyCodeLine{3111                                     \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} hs);}
\DoxyCodeLine{3112 }
\DoxyCodeLine{3113 \textcolor{preprocessor}{\#define stbi\_\_div4(x) ((stbi\_uc) ((x) >> 2))}}
\DoxyCodeLine{3114 }
\DoxyCodeLine{3115 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *resample\_row\_1(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{3116 \{}
\DoxyCodeLine{3117    STBI\_NOTUSED(out);}
\DoxyCodeLine{3118    STBI\_NOTUSED(in\_far);}
\DoxyCodeLine{3119    STBI\_NOTUSED(\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}});}
\DoxyCodeLine{3120    STBI\_NOTUSED(hs);}
\DoxyCodeLine{3121    \textcolor{keywordflow}{return} in\_near;}
\DoxyCodeLine{3122 \}}
\DoxyCodeLine{3123 }
\DoxyCodeLine{3124 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}* stbi\_\_resample\_row\_v\_2(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{3125 \{}
\DoxyCodeLine{3126    \textcolor{comment}{// need to generate two samples vertically for every one in input}}
\DoxyCodeLine{3127    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3128    STBI\_NOTUSED(hs);}
\DoxyCodeLine{3129    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}; ++i)}
\DoxyCodeLine{3130       out[i] = stbi\_\_div4(3*in\_near[i] + in\_far[i] + 2);}
\DoxyCodeLine{3131    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3132 \}}
\DoxyCodeLine{3133 }
\DoxyCodeLine{3134 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}*  stbi\_\_resample\_row\_h\_2(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{3135 \{}
\DoxyCodeLine{3136    \textcolor{comment}{// need to generate two samples horizontally for every one in input}}
\DoxyCodeLine{3137    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3138    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *input = in\_near;}
\DoxyCodeLine{3139 }
\DoxyCodeLine{3140    \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} == 1) \{}
\DoxyCodeLine{3141       \textcolor{comment}{// if only one sample, can't do any interpolation}}
\DoxyCodeLine{3142       out[0] = out[1] = input[0];}
\DoxyCodeLine{3143       \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3144    \}}
\DoxyCodeLine{3145 }
\DoxyCodeLine{3146    out[0] = input[0];}
\DoxyCodeLine{3147    out[1] = stbi\_\_div4(input[0]*3 + input[1] + 2);}
\DoxyCodeLine{3148    \textcolor{keywordflow}{for} (i=1; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}-\/1; ++i) \{}
\DoxyCodeLine{3149       \textcolor{keywordtype}{int} n = 3*input[i]+2;}
\DoxyCodeLine{3150       out[i*2+0] = stbi\_\_div4(n+input[i-\/1]);}
\DoxyCodeLine{3151       out[i*2+1] = stbi\_\_div4(n+input[i+1]);}
\DoxyCodeLine{3152    \}}
\DoxyCodeLine{3153    out[i*2+0] = stbi\_\_div4(input[\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}-\/2]*3 + input[\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}-\/1] + 2);}
\DoxyCodeLine{3154    out[i*2+1] = input[\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}-\/1];}
\DoxyCodeLine{3155 }
\DoxyCodeLine{3156    STBI\_NOTUSED(in\_far);}
\DoxyCodeLine{3157    STBI\_NOTUSED(hs);}
\DoxyCodeLine{3158 }
\DoxyCodeLine{3159    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3160 \}}
\DoxyCodeLine{3161 }
\DoxyCodeLine{3162 \textcolor{preprocessor}{\#define stbi\_\_div16(x) ((stbi\_uc) ((x) >> 4))}}
\DoxyCodeLine{3163 }
\DoxyCodeLine{3164 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_resample\_row\_hv\_2(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{3165 \{}
\DoxyCodeLine{3166    \textcolor{comment}{// need to generate 2x2 samples for every one in input}}
\DoxyCodeLine{3167    \textcolor{keywordtype}{int} i,\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}},\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}};}
\DoxyCodeLine{3168    \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} == 1) \{}
\DoxyCodeLine{3169       out[0] = out[1] = stbi\_\_div4(3*in\_near[0] + in\_far[0] + 2);}
\DoxyCodeLine{3170       \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3171    \}}
\DoxyCodeLine{3172 }
\DoxyCodeLine{3173    \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = 3*in\_near[0] + in\_far[0];}
\DoxyCodeLine{3174    out[0] = stbi\_\_div4(\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}+2);}
\DoxyCodeLine{3175    \textcolor{keywordflow}{for} (i=1; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}; ++i) \{}
\DoxyCodeLine{3176       \mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} = \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}};}
\DoxyCodeLine{3177       \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = 3*in\_near[i]+in\_far[i];}
\DoxyCodeLine{3178       out[i*2-\/1] = stbi\_\_div16(3*\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} + \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} + 8);}
\DoxyCodeLine{3179       out[i*2  ] = stbi\_\_div16(3*\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} + \mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} + 8);}
\DoxyCodeLine{3180    \}}
\DoxyCodeLine{3181    out[\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}*2-\/1] = stbi\_\_div4(\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}+2);}
\DoxyCodeLine{3182 }
\DoxyCodeLine{3183    STBI\_NOTUSED(hs);}
\DoxyCodeLine{3184 }
\DoxyCodeLine{3185    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3186 \}}
\DoxyCodeLine{3187 }
\DoxyCodeLine{3188 \textcolor{preprocessor}{\#if defined(STBI\_SSE2) || defined(STBI\_NEON)}}
\DoxyCodeLine{3189 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_resample\_row\_hv\_2\_simd(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{3190 \{}
\DoxyCodeLine{3191    \textcolor{comment}{// need to generate 2x2 samples for every one in input}}
\DoxyCodeLine{3192    \textcolor{keywordtype}{int} i=0,\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}},\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}};}
\DoxyCodeLine{3193 }
\DoxyCodeLine{3194    \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} == 1) \{}
\DoxyCodeLine{3195       out[0] = out[1] = stbi\_\_div4(3*in\_near[0] + in\_far[0] + 2);}
\DoxyCodeLine{3196       \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3197    \}}
\DoxyCodeLine{3198 }
\DoxyCodeLine{3199    \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = 3*in\_near[0] + in\_far[0];}
\DoxyCodeLine{3200    \textcolor{comment}{// process groups of 8 pixels for as long as we can.}}
\DoxyCodeLine{3201    \textcolor{comment}{// note we can't handle the last pixel in a row in this loop}}
\DoxyCodeLine{3202    \textcolor{comment}{// because we need to handle the filter boundary conditions.}}
\DoxyCodeLine{3203    \textcolor{keywordflow}{for} (; i < ((\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}-\/1) \& \string~7); i += 8) \{}
\DoxyCodeLine{3204 \textcolor{preprocessor}{\#if defined(STBI\_SSE2)}}
\DoxyCodeLine{3205       \textcolor{comment}{// load and perform the vertical filtering pass}}
\DoxyCodeLine{3206       \textcolor{comment}{// this uses 3*x + y = 4*x + (y -\/ x)}}
\DoxyCodeLine{3207       \_\_m128i zero  = \_mm\_setzero\_si128();}
\DoxyCodeLine{3208       \_\_m128i farb  = \_mm\_loadl\_epi64((\_\_m128i *) (in\_far + i));}
\DoxyCodeLine{3209       \_\_m128i nearb = \_mm\_loadl\_epi64((\_\_m128i *) (in\_near + i));}
\DoxyCodeLine{3210       \_\_m128i farw  = \_mm\_unpacklo\_epi8(farb, zero);}
\DoxyCodeLine{3211       \_\_m128i nearw = \_mm\_unpacklo\_epi8(nearb, zero);}
\DoxyCodeLine{3212       \_\_m128i diff  = \_mm\_sub\_epi16(farw, nearw);}
\DoxyCodeLine{3213       \_\_m128i nears = \_mm\_slli\_epi16(nearw, 2);}
\DoxyCodeLine{3214       \_\_m128i curr  = \_mm\_add\_epi16(nears, diff); \textcolor{comment}{// current row}}
\DoxyCodeLine{3215 }
\DoxyCodeLine{3216       \textcolor{comment}{// horizontal filter works the same based on shifted vers of current}}
\DoxyCodeLine{3217       \textcolor{comment}{// row. "{}prev"{} is current row shifted right by 1 pixel; we need to}}
\DoxyCodeLine{3218       \textcolor{comment}{// insert the previous pixel value (from t1).}}
\DoxyCodeLine{3219       \textcolor{comment}{// "{}next"{} is current row shifted left by 1 pixel, with first pixel}}
\DoxyCodeLine{3220       \textcolor{comment}{// of next block of 8 pixels added in.}}
\DoxyCodeLine{3221       \_\_m128i prv0 = \_mm\_slli\_si128(curr, 2);}
\DoxyCodeLine{3222       \_\_m128i nxt0 = \_mm\_srli\_si128(curr, 2);}
\DoxyCodeLine{3223       \_\_m128i prev = \_mm\_insert\_epi16(prv0, \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}, 0);}
\DoxyCodeLine{3224       \_\_m128i next = \_mm\_insert\_epi16(nxt0, 3*in\_near[i+8] + in\_far[i+8], 7);}
\DoxyCodeLine{3225 }
\DoxyCodeLine{3226       \textcolor{comment}{// horizontal filter, polyphase implementation since it's convenient:}}
\DoxyCodeLine{3227       \textcolor{comment}{// even pixels = 3*cur + prev = cur*4 + (prev -\/ cur)}}
\DoxyCodeLine{3228       \textcolor{comment}{// odd  pixels = 3*cur + next = cur*4 + (next -\/ cur)}}
\DoxyCodeLine{3229       \textcolor{comment}{// note the shared term.}}
\DoxyCodeLine{3230       \_\_m128i bias  = \_mm\_set1\_epi16(8);}
\DoxyCodeLine{3231       \_\_m128i curs = \_mm\_slli\_epi16(curr, 2);}
\DoxyCodeLine{3232       \_\_m128i prvd = \_mm\_sub\_epi16(prev, curr);}
\DoxyCodeLine{3233       \_\_m128i nxtd = \_mm\_sub\_epi16(next, curr);}
\DoxyCodeLine{3234       \_\_m128i curb = \_mm\_add\_epi16(curs, bias);}
\DoxyCodeLine{3235       \_\_m128i even = \_mm\_add\_epi16(prvd, curb);}
\DoxyCodeLine{3236       \_\_m128i odd  = \_mm\_add\_epi16(nxtd, curb);}
\DoxyCodeLine{3237 }
\DoxyCodeLine{3238       \textcolor{comment}{// interleave even and odd pixels, then undo scaling.}}
\DoxyCodeLine{3239       \_\_m128i int0 = \_mm\_unpacklo\_epi16(even, odd);}
\DoxyCodeLine{3240       \_\_m128i int1 = \_mm\_unpackhi\_epi16(even, odd);}
\DoxyCodeLine{3241       \_\_m128i de0  = \_mm\_srli\_epi16(int0, 4);}
\DoxyCodeLine{3242       \_\_m128i de1  = \_mm\_srli\_epi16(int1, 4);}
\DoxyCodeLine{3243 }
\DoxyCodeLine{3244       \textcolor{comment}{// pack and write output}}
\DoxyCodeLine{3245       \_\_m128i outv = \_mm\_packus\_epi16(de0, de1);}
\DoxyCodeLine{3246       \_mm\_storeu\_si128((\_\_m128i *) (out + i*2), outv);}
\DoxyCodeLine{3247 \textcolor{preprocessor}{\#elif defined(STBI\_NEON)}}
\DoxyCodeLine{3248       \textcolor{comment}{// load and perform the vertical filtering pass}}
\DoxyCodeLine{3249       \textcolor{comment}{// this uses 3*x + y = 4*x + (y -\/ x)}}
\DoxyCodeLine{3250       uint8x8\_t farb  = vld1\_u8(in\_far + i);}
\DoxyCodeLine{3251       uint8x8\_t nearb = vld1\_u8(in\_near + i);}
\DoxyCodeLine{3252       int16x8\_t diff  = vreinterpretq\_s16\_u16(vsubl\_u8(farb, nearb));}
\DoxyCodeLine{3253       int16x8\_t nears = vreinterpretq\_s16\_u16(vshll\_n\_u8(nearb, 2));}
\DoxyCodeLine{3254       int16x8\_t curr  = vaddq\_s16(nears, diff); \textcolor{comment}{// current row}}
\DoxyCodeLine{3255 }
\DoxyCodeLine{3256       \textcolor{comment}{// horizontal filter works the same based on shifted vers of current}}
\DoxyCodeLine{3257       \textcolor{comment}{// row. "{}prev"{} is current row shifted right by 1 pixel; we need to}}
\DoxyCodeLine{3258       \textcolor{comment}{// insert the previous pixel value (from t1).}}
\DoxyCodeLine{3259       \textcolor{comment}{// "{}next"{} is current row shifted left by 1 pixel, with first pixel}}
\DoxyCodeLine{3260       \textcolor{comment}{// of next block of 8 pixels added in.}}
\DoxyCodeLine{3261       int16x8\_t prv0 = vextq\_s16(curr, curr, 7);}
\DoxyCodeLine{3262       int16x8\_t nxt0 = vextq\_s16(curr, curr, 1);}
\DoxyCodeLine{3263       int16x8\_t prev = vsetq\_lane\_s16(\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}, prv0, 0);}
\DoxyCodeLine{3264       int16x8\_t next = vsetq\_lane\_s16(3*in\_near[i+8] + in\_far[i+8], nxt0, 7);}
\DoxyCodeLine{3265 }
\DoxyCodeLine{3266       \textcolor{comment}{// horizontal filter, polyphase implementation since it's convenient:}}
\DoxyCodeLine{3267       \textcolor{comment}{// even pixels = 3*cur + prev = cur*4 + (prev -\/ cur)}}
\DoxyCodeLine{3268       \textcolor{comment}{// odd  pixels = 3*cur + next = cur*4 + (next -\/ cur)}}
\DoxyCodeLine{3269       \textcolor{comment}{// note the shared term.}}
\DoxyCodeLine{3270       int16x8\_t curs = vshlq\_n\_s16(curr, 2);}
\DoxyCodeLine{3271       int16x8\_t prvd = vsubq\_s16(prev, curr);}
\DoxyCodeLine{3272       int16x8\_t nxtd = vsubq\_s16(next, curr);}
\DoxyCodeLine{3273       int16x8\_t even = vaddq\_s16(curs, prvd);}
\DoxyCodeLine{3274       int16x8\_t odd  = vaddq\_s16(curs, nxtd);}
\DoxyCodeLine{3275 }
\DoxyCodeLine{3276       \textcolor{comment}{// undo scaling and round, then store with even/odd phases interleaved}}
\DoxyCodeLine{3277       uint8x8x2\_t o;}
\DoxyCodeLine{3278       o.val[0] = vqrshrun\_n\_s16(even, 4);}
\DoxyCodeLine{3279       o.val[1] = vqrshrun\_n\_s16(odd,  4);}
\DoxyCodeLine{3280       vst2\_u8(out + i*2, o);}
\DoxyCodeLine{3281 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3282 }
\DoxyCodeLine{3283       \textcolor{comment}{// "{}previous"{} value for next iter}}
\DoxyCodeLine{3284       \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = 3*in\_near[i+7] + in\_far[i+7];}
\DoxyCodeLine{3285    \}}
\DoxyCodeLine{3286 }
\DoxyCodeLine{3287    \mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} = \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}};}
\DoxyCodeLine{3288    \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = 3*in\_near[i] + in\_far[i];}
\DoxyCodeLine{3289    out[i*2] = stbi\_\_div16(3*\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} + \mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} + 8);}
\DoxyCodeLine{3290 }
\DoxyCodeLine{3291    \textcolor{keywordflow}{for} (++i; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}; ++i) \{}
\DoxyCodeLine{3292       \mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} = \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}};}
\DoxyCodeLine{3293       \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = 3*in\_near[i]+in\_far[i];}
\DoxyCodeLine{3294       out[i*2-\/1] = stbi\_\_div16(3*\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} + \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} + 8);}
\DoxyCodeLine{3295       out[i*2  ] = stbi\_\_div16(3*\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} + \mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} + 8);}
\DoxyCodeLine{3296    \}}
\DoxyCodeLine{3297    out[\mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}*2-\/1] = stbi\_\_div4(\mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}}+2);}
\DoxyCodeLine{3298 }
\DoxyCodeLine{3299    STBI\_NOTUSED(hs);}
\DoxyCodeLine{3300 }
\DoxyCodeLine{3301    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3302 \}}
\DoxyCodeLine{3303 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3304 }
\DoxyCodeLine{3305 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_resample\_row\_generic(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{3306 \{}
\DoxyCodeLine{3307    \textcolor{comment}{// resample with nearest-\/neighbor}}
\DoxyCodeLine{3308    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{3309    STBI\_NOTUSED(in\_far);}
\DoxyCodeLine{3310    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}; ++i)}
\DoxyCodeLine{3311       \textcolor{keywordflow}{for} (j=0; j < hs; ++j)}
\DoxyCodeLine{3312          out[i*hs+j] = in\_near[i];}
\DoxyCodeLine{3313    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3314 \}}
\DoxyCodeLine{3315 }
\DoxyCodeLine{3316 \textcolor{comment}{// this is a reduced-\/precision calculation of YCbCr-\/to-\/RGB introduced}}
\DoxyCodeLine{3317 \textcolor{comment}{// to make sure the code produces the same results in both SIMD and scalar}}
\DoxyCodeLine{3318 \textcolor{preprocessor}{\#define stbi\_\_float2fixed(x)  (((int) ((x) * 4096.0f + 0.5f)) << 8)}}
\DoxyCodeLine{3319 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_YCbCr\_to\_RGB\_row(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcb, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcr, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} step)}
\DoxyCodeLine{3320 \{}
\DoxyCodeLine{3321    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3322    \textcolor{keywordflow}{for} (i=0; i < count; ++i) \{}
\DoxyCodeLine{3323       \textcolor{keywordtype}{int} y\_fixed = (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}[i] << 20) + (1<<19); \textcolor{comment}{// rounding}}
\DoxyCodeLine{3324       \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}},\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}},b;}
\DoxyCodeLine{3325       \textcolor{keywordtype}{int} cr = pcr[i] -\/ 128;}
\DoxyCodeLine{3326       \textcolor{keywordtype}{int} cb = pcb[i] -\/ 128;}
\DoxyCodeLine{3327       \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = y\_fixed +  cr* stbi\_\_float2fixed(1.40200f);}
\DoxyCodeLine{3328       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = y\_fixed + (cr*-\/stbi\_\_float2fixed(0.71414f)) + ((cb*-\/stbi\_\_float2fixed(0.34414f)) \& 0xffff0000);}
\DoxyCodeLine{3329       b = y\_fixed                                     +   cb* stbi\_\_float2fixed(1.77200f);}
\DoxyCodeLine{3330       \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} >>= 20;}
\DoxyCodeLine{3331       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} >>= 20;}
\DoxyCodeLine{3332       b >>= 20;}
\DoxyCodeLine{3333       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} > 255) \{ \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} < 0) \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = 0; \textcolor{keywordflow}{else} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = 255; \}}
\DoxyCodeLine{3334       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} > 255) \{ \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} < 0) \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = 0; \textcolor{keywordflow}{else} \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = 255; \}}
\DoxyCodeLine{3335       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) b > 255) \{ \textcolor{keywordflow}{if} (b < 0) b = 0; \textcolor{keywordflow}{else} b = 255; \}}
\DoxyCodeLine{3336       out[0] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{3337       out[1] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}};}
\DoxyCodeLine{3338       out[2] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})b;}
\DoxyCodeLine{3339       out[3] = 255;}
\DoxyCodeLine{3340       out += step;}
\DoxyCodeLine{3341    \}}
\DoxyCodeLine{3342 \}}
\DoxyCodeLine{3343 }
\DoxyCodeLine{3344 \textcolor{preprocessor}{\#if defined(STBI\_SSE2) || defined(STBI\_NEON)}}
\DoxyCodeLine{3345 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_YCbCr\_to\_RGB\_simd(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *pcb, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *pcr, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} step)}
\DoxyCodeLine{3346 \{}
\DoxyCodeLine{3347    \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{3348 }
\DoxyCodeLine{3349 \textcolor{preprocessor}{\#ifdef STBI\_SSE2}}
\DoxyCodeLine{3350    \textcolor{comment}{// step == 3 is pretty ugly on the final interleave, and i'm not convinced}}
\DoxyCodeLine{3351    \textcolor{comment}{// it's useful in practice (you wouldn't use it for textures, for example).}}
\DoxyCodeLine{3352    \textcolor{comment}{// so just accelerate step == 4 case.}}
\DoxyCodeLine{3353    \textcolor{keywordflow}{if} (step == 4) \{}
\DoxyCodeLine{3354       \textcolor{comment}{// this is a fairly straightforward implementation and not super-\/optimized.}}
\DoxyCodeLine{3355       \_\_m128i signflip  = \_mm\_set1\_epi8(-\/0x80);}
\DoxyCodeLine{3356       \_\_m128i cr\_const0 = \_mm\_set1\_epi16(   (\textcolor{keywordtype}{short}) ( 1.40200f*4096.0f+0.5f));}
\DoxyCodeLine{3357       \_\_m128i cr\_const1 = \_mm\_set1\_epi16( -\/ (\textcolor{keywordtype}{short}) ( 0.71414f*4096.0f+0.5f));}
\DoxyCodeLine{3358       \_\_m128i cb\_const0 = \_mm\_set1\_epi16( -\/ (\textcolor{keywordtype}{short}) ( 0.34414f*4096.0f+0.5f));}
\DoxyCodeLine{3359       \_\_m128i cb\_const1 = \_mm\_set1\_epi16(   (\textcolor{keywordtype}{short}) ( 1.77200f*4096.0f+0.5f));}
\DoxyCodeLine{3360       \_\_m128i y\_bias = \_mm\_set1\_epi8((\textcolor{keywordtype}{char}) (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}) 128);}
\DoxyCodeLine{3361       \_\_m128i xw = \_mm\_set1\_epi16(255); \textcolor{comment}{// alpha channel}}
\DoxyCodeLine{3362 }
\DoxyCodeLine{3363       \textcolor{keywordflow}{for} (; i+7 < count; i += 8) \{}
\DoxyCodeLine{3364          \textcolor{comment}{// load}}
\DoxyCodeLine{3365          \_\_m128i y\_bytes = \_mm\_loadl\_epi64((\_\_m128i *) (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}+i));}
\DoxyCodeLine{3366          \_\_m128i cr\_bytes = \_mm\_loadl\_epi64((\_\_m128i *) (pcr+i));}
\DoxyCodeLine{3367          \_\_m128i cb\_bytes = \_mm\_loadl\_epi64((\_\_m128i *) (pcb+i));}
\DoxyCodeLine{3368          \_\_m128i cr\_biased = \_mm\_xor\_si128(cr\_bytes, signflip); \textcolor{comment}{// -\/128}}
\DoxyCodeLine{3369          \_\_m128i cb\_biased = \_mm\_xor\_si128(cb\_bytes, signflip); \textcolor{comment}{// -\/128}}
\DoxyCodeLine{3370 }
\DoxyCodeLine{3371          \textcolor{comment}{// unpack to short (and left-\/shift cr, cb by 8)}}
\DoxyCodeLine{3372          \_\_m128i yw  = \_mm\_unpacklo\_epi8(y\_bias, y\_bytes);}
\DoxyCodeLine{3373          \_\_m128i crw = \_mm\_unpacklo\_epi8(\_mm\_setzero\_si128(), cr\_biased);}
\DoxyCodeLine{3374          \_\_m128i cbw = \_mm\_unpacklo\_epi8(\_mm\_setzero\_si128(), cb\_biased);}
\DoxyCodeLine{3375 }
\DoxyCodeLine{3376          \textcolor{comment}{// color transform}}
\DoxyCodeLine{3377          \_\_m128i yws = \_mm\_srli\_epi16(yw, 4);}
\DoxyCodeLine{3378          \_\_m128i cr0 = \_mm\_mulhi\_epi16(cr\_const0, crw);}
\DoxyCodeLine{3379          \_\_m128i cb0 = \_mm\_mulhi\_epi16(cb\_const0, cbw);}
\DoxyCodeLine{3380          \_\_m128i cb1 = \_mm\_mulhi\_epi16(cbw, cb\_const1);}
\DoxyCodeLine{3381          \_\_m128i cr1 = \_mm\_mulhi\_epi16(crw, cr\_const1);}
\DoxyCodeLine{3382          \_\_m128i rws = \_mm\_add\_epi16(cr0, yws);}
\DoxyCodeLine{3383          \_\_m128i gwt = \_mm\_add\_epi16(cb0, yws);}
\DoxyCodeLine{3384          \_\_m128i bws = \_mm\_add\_epi16(yws, cb1);}
\DoxyCodeLine{3385          \_\_m128i gws = \_mm\_add\_epi16(gwt, cr1);}
\DoxyCodeLine{3386 }
\DoxyCodeLine{3387          \textcolor{comment}{// descale}}
\DoxyCodeLine{3388          \_\_m128i rw = \_mm\_srai\_epi16(rws, 4);}
\DoxyCodeLine{3389          \_\_m128i bw = \_mm\_srai\_epi16(bws, 4);}
\DoxyCodeLine{3390          \_\_m128i gw = \_mm\_srai\_epi16(gws, 4);}
\DoxyCodeLine{3391 }
\DoxyCodeLine{3392          \textcolor{comment}{// back to byte, set up for transpose}}
\DoxyCodeLine{3393          \_\_m128i brb = \_mm\_packus\_epi16(rw, bw);}
\DoxyCodeLine{3394          \_\_m128i gxb = \_mm\_packus\_epi16(gw, xw);}
\DoxyCodeLine{3395 }
\DoxyCodeLine{3396          \textcolor{comment}{// transpose to interleave channels}}
\DoxyCodeLine{3397          \_\_m128i \mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}} = \_mm\_unpacklo\_epi8(brb, gxb);}
\DoxyCodeLine{3398          \_\_m128i \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = \_mm\_unpackhi\_epi8(brb, gxb);}
\DoxyCodeLine{3399          \_\_m128i o0 = \_mm\_unpacklo\_epi16(\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}}, \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}});}
\DoxyCodeLine{3400          \_\_m128i o1 = \_mm\_unpackhi\_epi16(\mbox{\hyperlink{gml2nestedsql_8cpp_af5fee1efab2775b22e237b85d856d7f8}{t0}}, \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}});}
\DoxyCodeLine{3401 }
\DoxyCodeLine{3402          \textcolor{comment}{// store}}
\DoxyCodeLine{3403          \_mm\_storeu\_si128((\_\_m128i *) (out + 0), o0);}
\DoxyCodeLine{3404          \_mm\_storeu\_si128((\_\_m128i *) (out + 16), o1);}
\DoxyCodeLine{3405          out += 32;}
\DoxyCodeLine{3406       \}}
\DoxyCodeLine{3407    \}}
\DoxyCodeLine{3408 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3409 }
\DoxyCodeLine{3410 \textcolor{preprocessor}{\#ifdef STBI\_NEON}}
\DoxyCodeLine{3411    \textcolor{comment}{// in this version, step=3 support would be easy to add. but is there demand?}}
\DoxyCodeLine{3412    \textcolor{keywordflow}{if} (step == 4) \{}
\DoxyCodeLine{3413       \textcolor{comment}{// this is a fairly straightforward implementation and not super-\/optimized.}}
\DoxyCodeLine{3414       uint8x8\_t signflip = vdup\_n\_u8(0x80);}
\DoxyCodeLine{3415       int16x8\_t cr\_const0 = vdupq\_n\_s16(   (\textcolor{keywordtype}{short}) ( 1.40200f*4096.0f+0.5f));}
\DoxyCodeLine{3416       int16x8\_t cr\_const1 = vdupq\_n\_s16( -\/ (\textcolor{keywordtype}{short}) ( 0.71414f*4096.0f+0.5f));}
\DoxyCodeLine{3417       int16x8\_t cb\_const0 = vdupq\_n\_s16( -\/ (\textcolor{keywordtype}{short}) ( 0.34414f*4096.0f+0.5f));}
\DoxyCodeLine{3418       int16x8\_t cb\_const1 = vdupq\_n\_s16(   (\textcolor{keywordtype}{short}) ( 1.77200f*4096.0f+0.5f));}
\DoxyCodeLine{3419 }
\DoxyCodeLine{3420       \textcolor{keywordflow}{for} (; i+7 < count; i += 8) \{}
\DoxyCodeLine{3421          \textcolor{comment}{// load}}
\DoxyCodeLine{3422          uint8x8\_t y\_bytes  = vld1\_u8(\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} + i);}
\DoxyCodeLine{3423          uint8x8\_t cr\_bytes = vld1\_u8(pcr + i);}
\DoxyCodeLine{3424          uint8x8\_t cb\_bytes = vld1\_u8(pcb + i);}
\DoxyCodeLine{3425          int8x8\_t cr\_biased = vreinterpret\_s8\_u8(vsub\_u8(cr\_bytes, signflip));}
\DoxyCodeLine{3426          int8x8\_t cb\_biased = vreinterpret\_s8\_u8(vsub\_u8(cb\_bytes, signflip));}
\DoxyCodeLine{3427 }
\DoxyCodeLine{3428          \textcolor{comment}{// expand to s16}}
\DoxyCodeLine{3429          int16x8\_t yws = vreinterpretq\_s16\_u16(vshll\_n\_u8(y\_bytes, 4));}
\DoxyCodeLine{3430          int16x8\_t crw = vshll\_n\_s8(cr\_biased, 7);}
\DoxyCodeLine{3431          int16x8\_t cbw = vshll\_n\_s8(cb\_biased, 7);}
\DoxyCodeLine{3432 }
\DoxyCodeLine{3433          \textcolor{comment}{// color transform}}
\DoxyCodeLine{3434          int16x8\_t cr0 = vqdmulhq\_s16(crw, cr\_const0);}
\DoxyCodeLine{3435          int16x8\_t cb0 = vqdmulhq\_s16(cbw, cb\_const0);}
\DoxyCodeLine{3436          int16x8\_t cr1 = vqdmulhq\_s16(crw, cr\_const1);}
\DoxyCodeLine{3437          int16x8\_t cb1 = vqdmulhq\_s16(cbw, cb\_const1);}
\DoxyCodeLine{3438          int16x8\_t rws = vaddq\_s16(yws, cr0);}
\DoxyCodeLine{3439          int16x8\_t gws = vaddq\_s16(vaddq\_s16(yws, cb0), cr1);}
\DoxyCodeLine{3440          int16x8\_t bws = vaddq\_s16(yws, cb1);}
\DoxyCodeLine{3441 }
\DoxyCodeLine{3442          \textcolor{comment}{// undo scaling, round, convert to byte}}
\DoxyCodeLine{3443          uint8x8x4\_t o;}
\DoxyCodeLine{3444          o.val[0] = vqrshrun\_n\_s16(rws, 4);}
\DoxyCodeLine{3445          o.val[1] = vqrshrun\_n\_s16(gws, 4);}
\DoxyCodeLine{3446          o.val[2] = vqrshrun\_n\_s16(bws, 4);}
\DoxyCodeLine{3447          o.val[3] = vdup\_n\_u8(255);}
\DoxyCodeLine{3448 }
\DoxyCodeLine{3449          \textcolor{comment}{// store, interleaving r/g/b/a}}
\DoxyCodeLine{3450          vst4\_u8(out, o);}
\DoxyCodeLine{3451          out += 8*4;}
\DoxyCodeLine{3452       \}}
\DoxyCodeLine{3453    \}}
\DoxyCodeLine{3454 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3455 }
\DoxyCodeLine{3456    \textcolor{keywordflow}{for} (; i < count; ++i) \{}
\DoxyCodeLine{3457       \textcolor{keywordtype}{int} y\_fixed = (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}[i] << 20) + (1<<19); \textcolor{comment}{// rounding}}
\DoxyCodeLine{3458       \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}},\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}},b;}
\DoxyCodeLine{3459       \textcolor{keywordtype}{int} cr = pcr[i] -\/ 128;}
\DoxyCodeLine{3460       \textcolor{keywordtype}{int} cb = pcb[i] -\/ 128;}
\DoxyCodeLine{3461       \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = y\_fixed + cr* stbi\_\_float2fixed(1.40200f);}
\DoxyCodeLine{3462       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = y\_fixed + cr*-\/stbi\_\_float2fixed(0.71414f) + ((cb*-\/stbi\_\_float2fixed(0.34414f)) \& 0xffff0000);}
\DoxyCodeLine{3463       b = y\_fixed                                   +   cb* stbi\_\_float2fixed(1.77200f);}
\DoxyCodeLine{3464       \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} >>= 20;}
\DoxyCodeLine{3465       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} >>= 20;}
\DoxyCodeLine{3466       b >>= 20;}
\DoxyCodeLine{3467       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} > 255) \{ \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} < 0) \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = 0; \textcolor{keywordflow}{else} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = 255; \}}
\DoxyCodeLine{3468       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} > 255) \{ \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} < 0) \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = 0; \textcolor{keywordflow}{else} \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = 255; \}}
\DoxyCodeLine{3469       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) b > 255) \{ \textcolor{keywordflow}{if} (b < 0) b = 0; \textcolor{keywordflow}{else} b = 255; \}}
\DoxyCodeLine{3470       out[0] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{3471       out[1] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}};}
\DoxyCodeLine{3472       out[2] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})b;}
\DoxyCodeLine{3473       out[3] = 255;}
\DoxyCodeLine{3474       out += step;}
\DoxyCodeLine{3475    \}}
\DoxyCodeLine{3476 \}}
\DoxyCodeLine{3477 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3478 }
\DoxyCodeLine{3479 \textcolor{comment}{// set up the kernels}}
\DoxyCodeLine{3480 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_setup\_jpeg(stbi\_\_jpeg *j)}
\DoxyCodeLine{3481 \{}
\DoxyCodeLine{3482    j-\/>idct\_block\_kernel = stbi\_\_idct\_block;}
\DoxyCodeLine{3483    j-\/>YCbCr\_to\_RGB\_kernel = stbi\_\_YCbCr\_to\_RGB\_row;}
\DoxyCodeLine{3484    j-\/>resample\_row\_hv\_2\_kernel = stbi\_\_resample\_row\_hv\_2;}
\DoxyCodeLine{3485 }
\DoxyCodeLine{3486 \textcolor{preprocessor}{\#ifdef STBI\_SSE2}}
\DoxyCodeLine{3487    \textcolor{keywordflow}{if} (stbi\_\_sse2\_available()) \{}
\DoxyCodeLine{3488       j-\/>idct\_block\_kernel = stbi\_\_idct\_simd;}
\DoxyCodeLine{3489       j-\/>YCbCr\_to\_RGB\_kernel = stbi\_\_YCbCr\_to\_RGB\_simd;}
\DoxyCodeLine{3490       j-\/>resample\_row\_hv\_2\_kernel = stbi\_\_resample\_row\_hv\_2\_simd;}
\DoxyCodeLine{3491    \}}
\DoxyCodeLine{3492 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3493 }
\DoxyCodeLine{3494 \textcolor{preprocessor}{\#ifdef STBI\_NEON}}
\DoxyCodeLine{3495    j-\/>idct\_block\_kernel = stbi\_\_idct\_simd;}
\DoxyCodeLine{3496    j-\/>YCbCr\_to\_RGB\_kernel = stbi\_\_YCbCr\_to\_RGB\_simd;}
\DoxyCodeLine{3497    j-\/>resample\_row\_hv\_2\_kernel = stbi\_\_resample\_row\_hv\_2\_simd;}
\DoxyCodeLine{3498 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3499 \}}
\DoxyCodeLine{3500 }
\DoxyCodeLine{3501 \textcolor{comment}{// clean up the temporary component buffers}}
\DoxyCodeLine{3502 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_cleanup\_jpeg(stbi\_\_jpeg *j)}
\DoxyCodeLine{3503 \{}
\DoxyCodeLine{3504    stbi\_\_free\_jpeg\_components(j, j-\/>s-\/>img\_n, 0);}
\DoxyCodeLine{3505 \}}
\DoxyCodeLine{3506 }
\DoxyCodeLine{3507 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3508 \{}
\DoxyCodeLine{3509    resample\_row\_func resample;}
\DoxyCodeLine{3510    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *line0,*line1;}
\DoxyCodeLine{3511    \textcolor{keywordtype}{int} hs,vs;   \textcolor{comment}{// expansion factor in each axis}}
\DoxyCodeLine{3512    \textcolor{keywordtype}{int} w\_lores; \textcolor{comment}{// horizontal pixels pre-\/expansion}}
\DoxyCodeLine{3513    \textcolor{keywordtype}{int} ystep;   \textcolor{comment}{// how far through vertical expansion we are}}
\DoxyCodeLine{3514    \textcolor{keywordtype}{int} ypos;    \textcolor{comment}{// which pre-\/expansion row we're on}}
\DoxyCodeLine{3515 \} stbi\_\_resample;}
\DoxyCodeLine{3516 }
\DoxyCodeLine{3517 \textcolor{comment}{// fast 0..255 * 0..255 => 0..255 rounded multiplication}}
\DoxyCodeLine{3518 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_blinn\_8x8(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}})}
\DoxyCodeLine{3519 \{}
\DoxyCodeLine{3520    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} t = \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} + 128;}
\DoxyCodeLine{3521    \textcolor{keywordflow}{return} (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) ((t + (t >>8)) >> 8);}
\DoxyCodeLine{3522 \}}
\DoxyCodeLine{3523 }
\DoxyCodeLine{3524 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *load\_jpeg\_image(stbi\_\_jpeg *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{int} *out\_x, \textcolor{keywordtype}{int} *out\_y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{3525 \{}
\DoxyCodeLine{3526    \textcolor{keywordtype}{int} n, decode\_n, is\_rgb;}
\DoxyCodeLine{3527    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n = 0; \textcolor{comment}{// make stbi\_\_cleanup\_jpeg safe}}
\DoxyCodeLine{3528 }
\DoxyCodeLine{3529    \textcolor{comment}{// validate req\_comp}}
\DoxyCodeLine{3530    \textcolor{keywordflow}{if} (req\_comp < 0 || req\_comp > 4) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad req\_comp"{}}, \textcolor{stringliteral}{"{}Internal error"{}});}
\DoxyCodeLine{3531 }
\DoxyCodeLine{3532    \textcolor{comment}{// load a jpeg image from whichever source, but leave in YCbCr format}}
\DoxyCodeLine{3533    \textcolor{keywordflow}{if} (!stbi\_\_decode\_jpeg\_image(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})) \{ stbi\_\_cleanup\_jpeg(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{3534 }
\DoxyCodeLine{3535    \textcolor{comment}{// determine actual number of components to generate}}
\DoxyCodeLine{3536    n = req\_comp ? req\_comp : \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n >= 3 ? 3 : 1;}
\DoxyCodeLine{3537 }
\DoxyCodeLine{3538    is\_rgb = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n == 3 \&\& (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>rgb == 3 || (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>app14\_color\_transform == 0 \&\& !\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>jfif));}
\DoxyCodeLine{3539 }
\DoxyCodeLine{3540    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n == 3 \&\& n < 3 \&\& !is\_rgb)}
\DoxyCodeLine{3541       decode\_n = 1;}
\DoxyCodeLine{3542    \textcolor{keywordflow}{else}}
\DoxyCodeLine{3543       decode\_n = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n;}
\DoxyCodeLine{3544 }
\DoxyCodeLine{3545    \textcolor{comment}{// resample and color-\/convert}}
\DoxyCodeLine{3546    \{}
\DoxyCodeLine{3547       \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{3548       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{3549       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *output;}
\DoxyCodeLine{3550       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *coutput[4];}
\DoxyCodeLine{3551 }
\DoxyCodeLine{3552       stbi\_\_resample res\_comp[4];}
\DoxyCodeLine{3553 }
\DoxyCodeLine{3554       \textcolor{keywordflow}{for} (k=0; k < decode\_n; ++k) \{}
\DoxyCodeLine{3555          stbi\_\_resample *\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = \&res\_comp[k];}
\DoxyCodeLine{3556 }
\DoxyCodeLine{3557          \textcolor{comment}{// allocate line buffer big enough for upsampling off the edges}}
\DoxyCodeLine{3558          \textcolor{comment}{// with upsample factor of 4}}
\DoxyCodeLine{3559          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[k].linebuf = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x + 3);}
\DoxyCodeLine{3560          \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[k].linebuf) \{ stbi\_\_cleanup\_jpeg(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}); \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}); \}}
\DoxyCodeLine{3561 }
\DoxyCodeLine{3562          \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>hs      = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_h\_max / \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[k].h;}
\DoxyCodeLine{3563          \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>vs      = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_v\_max / \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[k].v;}
\DoxyCodeLine{3564          \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>ystep   = \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>vs >> 1;}
\DoxyCodeLine{3565          \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>w\_lores = (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x + \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>hs-\/1) / \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>hs;}
\DoxyCodeLine{3566          \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>ypos    = 0;}
\DoxyCodeLine{3567          \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line0   = \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line1 = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[k].data;}
\DoxyCodeLine{3568 }
\DoxyCodeLine{3569          if      (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>hs == 1 \&\& \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>vs == 1) \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>resample = resample\_row\_1;}
\DoxyCodeLine{3570          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>hs == 1 \&\& \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>vs == 2) \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>resample = stbi\_\_resample\_row\_v\_2;}
\DoxyCodeLine{3571          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>hs == 2 \&\& \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>vs == 1) \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>resample = stbi\_\_resample\_row\_h\_2;}
\DoxyCodeLine{3572          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>hs == 2 \&\& \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>vs == 2) \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>resample = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>resample\_row\_hv\_2\_kernel;}
\DoxyCodeLine{3573          \textcolor{keywordflow}{else}                               \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>resample = stbi\_\_resample\_row\_generic;}
\DoxyCodeLine{3574       \}}
\DoxyCodeLine{3575 }
\DoxyCodeLine{3576       \textcolor{comment}{// can't error after this so, this is safe}}
\DoxyCodeLine{3577       output = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(n, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_y, 1);}
\DoxyCodeLine{3578       \textcolor{keywordflow}{if} (!output) \{ stbi\_\_cleanup\_jpeg(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}); \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}); \}}
\DoxyCodeLine{3579 }
\DoxyCodeLine{3580       \textcolor{comment}{// now go ahead and resample}}
\DoxyCodeLine{3581       \textcolor{keywordflow}{for} (j=0; j < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_y; ++j) \{}
\DoxyCodeLine{3582          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out = output + n * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x * j;}
\DoxyCodeLine{3583          \textcolor{keywordflow}{for} (k=0; k < decode\_n; ++k) \{}
\DoxyCodeLine{3584             stbi\_\_resample *\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = \&res\_comp[k];}
\DoxyCodeLine{3585             \textcolor{keywordtype}{int} y\_bot = \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>ystep >= (\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>vs >> 1);}
\DoxyCodeLine{3586             coutput[k] = \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>resample(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[k].linebuf,}
\DoxyCodeLine{3587                                      y\_bot ? \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line1 : \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line0,}
\DoxyCodeLine{3588                                      y\_bot ? \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line0 : \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line1,}
\DoxyCodeLine{3589                                      \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>w\_lores, \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>hs);}
\DoxyCodeLine{3590             \textcolor{keywordflow}{if} (++\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>ystep >= \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>vs) \{}
\DoxyCodeLine{3591                \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>ystep = 0;}
\DoxyCodeLine{3592                \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line0 = \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line1;}
\DoxyCodeLine{3593                \textcolor{keywordflow}{if} (++\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>ypos < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[k].y)}
\DoxyCodeLine{3594                   \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}-\/>line1 += \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>img\_comp[k].w2;}
\DoxyCodeLine{3595             \}}
\DoxyCodeLine{3596          \}}
\DoxyCodeLine{3597          \textcolor{keywordflow}{if} (n >= 3) \{}
\DoxyCodeLine{3598             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = coutput[0];}
\DoxyCodeLine{3599             \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n == 3) \{}
\DoxyCodeLine{3600                \textcolor{keywordflow}{if} (is\_rgb) \{}
\DoxyCodeLine{3601                   \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i) \{}
\DoxyCodeLine{3602                      out[0] = \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}[i];}
\DoxyCodeLine{3603                      out[1] = coutput[1][i];}
\DoxyCodeLine{3604                      out[2] = coutput[2][i];}
\DoxyCodeLine{3605                      out[3] = 255;}
\DoxyCodeLine{3606                      out += n;}
\DoxyCodeLine{3607                   \}}
\DoxyCodeLine{3608                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3609                   \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>YCbCr\_to\_RGB\_kernel(out, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, coutput[1], coutput[2], \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x, n);}
\DoxyCodeLine{3610                \}}
\DoxyCodeLine{3611             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n == 4) \{}
\DoxyCodeLine{3612                \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>app14\_color\_transform == 0) \{ \textcolor{comment}{// CMYK}}
\DoxyCodeLine{3613                   \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i) \{}
\DoxyCodeLine{3614                      \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} m = coutput[3][i];}
\DoxyCodeLine{3615                      out[0] = stbi\_\_blinn\_8x8(coutput[0][i], m);}
\DoxyCodeLine{3616                      out[1] = stbi\_\_blinn\_8x8(coutput[1][i], m);}
\DoxyCodeLine{3617                      out[2] = stbi\_\_blinn\_8x8(coutput[2][i], m);}
\DoxyCodeLine{3618                      out[3] = 255;}
\DoxyCodeLine{3619                      out += n;}
\DoxyCodeLine{3620                   \}}
\DoxyCodeLine{3621                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>app14\_color\_transform == 2) \{ \textcolor{comment}{// YCCK}}
\DoxyCodeLine{3622                   \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>YCbCr\_to\_RGB\_kernel(out, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, coutput[1], coutput[2], \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x, n);}
\DoxyCodeLine{3623                   \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i) \{}
\DoxyCodeLine{3624                      \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} m = coutput[3][i];}
\DoxyCodeLine{3625                      out[0] = stbi\_\_blinn\_8x8(255 -\/ out[0], m);}
\DoxyCodeLine{3626                      out[1] = stbi\_\_blinn\_8x8(255 -\/ out[1], m);}
\DoxyCodeLine{3627                      out[2] = stbi\_\_blinn\_8x8(255 -\/ out[2], m);}
\DoxyCodeLine{3628                      out += n;}
\DoxyCodeLine{3629                   \}}
\DoxyCodeLine{3630                \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// YCbCr + alpha?  Ignore the fourth channel for now}}
\DoxyCodeLine{3631                   \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>YCbCr\_to\_RGB\_kernel(out, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, coutput[1], coutput[2], \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x, n);}
\DoxyCodeLine{3632                \}}
\DoxyCodeLine{3633             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{3634                \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i) \{}
\DoxyCodeLine{3635                   out[0] = out[1] = out[2] = \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}[i];}
\DoxyCodeLine{3636                   out[3] = 255; \textcolor{comment}{// not used if n==3}}
\DoxyCodeLine{3637                   out += n;}
\DoxyCodeLine{3638                \}}
\DoxyCodeLine{3639          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3640             \textcolor{keywordflow}{if} (is\_rgb) \{}
\DoxyCodeLine{3641                \textcolor{keywordflow}{if} (n == 1)}
\DoxyCodeLine{3642                   \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i)}
\DoxyCodeLine{3643                      *out++ = stbi\_\_compute\_y(coutput[0][i], coutput[1][i], coutput[2][i]);}
\DoxyCodeLine{3644                \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3645                   \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i, out += 2) \{}
\DoxyCodeLine{3646                      out[0] = stbi\_\_compute\_y(coutput[0][i], coutput[1][i], coutput[2][i]);}
\DoxyCodeLine{3647                      out[1] = 255;}
\DoxyCodeLine{3648                   \}}
\DoxyCodeLine{3649                \}}
\DoxyCodeLine{3650             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n == 4 \&\& \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>app14\_color\_transform == 0) \{}
\DoxyCodeLine{3651                \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i) \{}
\DoxyCodeLine{3652                   \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} m = coutput[3][i];}
\DoxyCodeLine{3653                   \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_blinn\_8x8(coutput[0][i], m);}
\DoxyCodeLine{3654                   \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = stbi\_\_blinn\_8x8(coutput[1][i], m);}
\DoxyCodeLine{3655                   \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} b = stbi\_\_blinn\_8x8(coutput[2][i], m);}
\DoxyCodeLine{3656                   out[0] = stbi\_\_compute\_y(\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, b);}
\DoxyCodeLine{3657                   out[1] = 255;}
\DoxyCodeLine{3658                   out += n;}
\DoxyCodeLine{3659                \}}
\DoxyCodeLine{3660             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n == 4 \&\& \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>app14\_color\_transform == 2) \{}
\DoxyCodeLine{3661                \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i) \{}
\DoxyCodeLine{3662                   out[0] = stbi\_\_blinn\_8x8(255 -\/ coutput[0][i], coutput[3][i]);}
\DoxyCodeLine{3663                   out[1] = 255;}
\DoxyCodeLine{3664                   out += n;}
\DoxyCodeLine{3665                \}}
\DoxyCodeLine{3666             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3667                \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = coutput[0];}
\DoxyCodeLine{3668                \textcolor{keywordflow}{if} (n == 1)}
\DoxyCodeLine{3669                   \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i) out[i] = \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}[i];}
\DoxyCodeLine{3670                \textcolor{keywordflow}{else}}
\DoxyCodeLine{3671                   \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x; ++i) *out++ = \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}[i], *out++ = 255;}
\DoxyCodeLine{3672             \}}
\DoxyCodeLine{3673          \}}
\DoxyCodeLine{3674       \}}
\DoxyCodeLine{3675       stbi\_\_cleanup\_jpeg(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{3676       *out\_x = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_x;}
\DoxyCodeLine{3677       *out\_y = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_y;}
\DoxyCodeLine{3678       \textcolor{keywordflow}{if} (comp) *comp = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s-\/>img\_n >= 3 ? 3 : 1; \textcolor{comment}{// report original components, not output}}
\DoxyCodeLine{3679       \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{3680    \}}
\DoxyCodeLine{3681 \}}
\DoxyCodeLine{3682 }
\DoxyCodeLine{3683 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_jpeg\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{3684 \{}
\DoxyCodeLine{3685    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* result;}
\DoxyCodeLine{3686    stbi\_\_jpeg* j = (stbi\_\_jpeg*) stbi\_\_malloc(\textcolor{keyword}{sizeof}(stbi\_\_jpeg));}
\DoxyCodeLine{3687    STBI\_NOTUSED(ri);}
\DoxyCodeLine{3688    j-\/>s = s;}
\DoxyCodeLine{3689    stbi\_\_setup\_jpeg(j);}
\DoxyCodeLine{3690    result = load\_jpeg\_image(j, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp);}
\DoxyCodeLine{3691    STBI\_FREE(j);}
\DoxyCodeLine{3692    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{3693 \}}
\DoxyCodeLine{3694 }
\DoxyCodeLine{3695 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_test(stbi\_\_context *s)}
\DoxyCodeLine{3696 \{}
\DoxyCodeLine{3697    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{3698    stbi\_\_jpeg* j = (stbi\_\_jpeg*)stbi\_\_malloc(\textcolor{keyword}{sizeof}(stbi\_\_jpeg));}
\DoxyCodeLine{3699    j-\/>s = s;}
\DoxyCodeLine{3700    stbi\_\_setup\_jpeg(j);}
\DoxyCodeLine{3701    \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_decode\_jpeg\_header(j, STBI\_\_SCAN\_type);}
\DoxyCodeLine{3702    stbi\_\_rewind(s);}
\DoxyCodeLine{3703    STBI\_FREE(j);}
\DoxyCodeLine{3704    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{3705 \}}
\DoxyCodeLine{3706 }
\DoxyCodeLine{3707 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_info\_raw(stbi\_\_jpeg *j, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{3708 \{}
\DoxyCodeLine{3709    \textcolor{keywordflow}{if} (!stbi\_\_decode\_jpeg\_header(j, STBI\_\_SCAN\_header)) \{}
\DoxyCodeLine{3710       stbi\_\_rewind( j-\/>s );}
\DoxyCodeLine{3711       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3712    \}}
\DoxyCodeLine{3713    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = j-\/>s-\/>img\_x;}
\DoxyCodeLine{3714    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = j-\/>s-\/>img\_y;}
\DoxyCodeLine{3715    \textcolor{keywordflow}{if} (comp) *comp = j-\/>s-\/>img\_n >= 3 ? 3 : 1;}
\DoxyCodeLine{3716    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3717 \}}
\DoxyCodeLine{3718 }
\DoxyCodeLine{3719 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{3720 \{}
\DoxyCodeLine{3721    \textcolor{keywordtype}{int} result;}
\DoxyCodeLine{3722    stbi\_\_jpeg* j = (stbi\_\_jpeg*) (stbi\_\_malloc(\textcolor{keyword}{sizeof}(stbi\_\_jpeg)));}
\DoxyCodeLine{3723    j-\/>s = s;}
\DoxyCodeLine{3724    result = stbi\_\_jpeg\_info\_raw(j, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp);}
\DoxyCodeLine{3725    STBI\_FREE(j);}
\DoxyCodeLine{3726    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{3727 \}}
\DoxyCodeLine{3728 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3729 }
\DoxyCodeLine{3730 \textcolor{comment}{// public domain zlib decode    v0.2  Sean Barrett 2006-\/11-\/18}}
\DoxyCodeLine{3731 \textcolor{comment}{//    simple implementation}}
\DoxyCodeLine{3732 \textcolor{comment}{//      -\/ all input must be provided in an upfront buffer}}
\DoxyCodeLine{3733 \textcolor{comment}{//      -\/ all output is written to a single output buffer (can malloc/realloc)}}
\DoxyCodeLine{3734 \textcolor{comment}{//    performance}}
\DoxyCodeLine{3735 \textcolor{comment}{//      -\/ fast huffman}}
\DoxyCodeLine{3736 }
\DoxyCodeLine{3737 \textcolor{preprocessor}{\#ifndef STBI\_NO\_ZLIB}}
\DoxyCodeLine{3738 }
\DoxyCodeLine{3739 \textcolor{comment}{// fast-\/way is faster to check than jpeg huffman, but slow way is slower}}
\DoxyCodeLine{3740 \textcolor{preprocessor}{\#define STBI\_\_ZFAST\_BITS  9 }\textcolor{comment}{// accelerate all cases in default tables}}
\DoxyCodeLine{3741 \textcolor{preprocessor}{\#define STBI\_\_ZFAST\_MASK  ((1 << STBI\_\_ZFAST\_BITS) -\/ 1)}}
\DoxyCodeLine{3742 }
\DoxyCodeLine{3743 \textcolor{comment}{// zlib-\/style huffman encoding}}
\DoxyCodeLine{3744 \textcolor{comment}{// (jpegs packs from left, zlib from right, so can't share code)}}
\DoxyCodeLine{3745 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3746 \{}
\DoxyCodeLine{3747    stbi\_\_uint16 fast[1 << STBI\_\_ZFAST\_BITS];}
\DoxyCodeLine{3748    stbi\_\_uint16 firstcode[16];}
\DoxyCodeLine{3749    \textcolor{keywordtype}{int} maxcode[17];}
\DoxyCodeLine{3750    stbi\_\_uint16 firstsymbol[16];}
\DoxyCodeLine{3751    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  size[288];}
\DoxyCodeLine{3752    stbi\_\_uint16 value[288];}
\DoxyCodeLine{3753 \} stbi\_\_zhuffman;}
\DoxyCodeLine{3754 }
\DoxyCodeLine{3755 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bitreverse16(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3756 \{}
\DoxyCodeLine{3757   n = ((n \& 0xAAAA) >>  1) | ((n \& 0x5555) << 1);}
\DoxyCodeLine{3758   n = ((n \& 0xCCCC) >>  2) | ((n \& 0x3333) << 2);}
\DoxyCodeLine{3759   n = ((n \& 0xF0F0) >>  4) | ((n \& 0x0F0F) << 4);}
\DoxyCodeLine{3760   n = ((n \& 0xFF00) >>  8) | ((n \& 0x00FF) << 8);}
\DoxyCodeLine{3761   \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{3762 \}}
\DoxyCodeLine{3763 }
\DoxyCodeLine{3764 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bit\_reverse(\textcolor{keywordtype}{int} v, \textcolor{keywordtype}{int} bits)}
\DoxyCodeLine{3765 \{}
\DoxyCodeLine{3766    STBI\_ASSERT(bits <= 16);}
\DoxyCodeLine{3767    \textcolor{comment}{// to bit reverse n bits, reverse 16 and shift}}
\DoxyCodeLine{3768    \textcolor{comment}{// e.g. 11 bits, bit reverse and shift away 5}}
\DoxyCodeLine{3769    \textcolor{keywordflow}{return} stbi\_\_bitreverse16(v) >> (16-\/bits);}
\DoxyCodeLine{3770 \}}
\DoxyCodeLine{3771 }
\DoxyCodeLine{3772 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zbuild\_huffman(stbi\_\_zhuffman *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *sizelist, \textcolor{keywordtype}{int} num)}
\DoxyCodeLine{3773 \{}
\DoxyCodeLine{3774    \textcolor{keywordtype}{int} i,k=0;}
\DoxyCodeLine{3775    \textcolor{keywordtype}{int} code, next\_code[16], sizes[17];}
\DoxyCodeLine{3776 }
\DoxyCodeLine{3777    \textcolor{comment}{// DEFLATE spec for generating codes}}
\DoxyCodeLine{3778    memset(sizes, 0, \textcolor{keyword}{sizeof}(sizes));}
\DoxyCodeLine{3779    memset(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>fast, 0, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>fast));}
\DoxyCodeLine{3780    \textcolor{keywordflow}{for} (i=0; i < num; ++i)}
\DoxyCodeLine{3781       ++sizes[sizelist[i]];}
\DoxyCodeLine{3782    sizes[0] = 0;}
\DoxyCodeLine{3783    \textcolor{keywordflow}{for} (i=1; i < 16; ++i)}
\DoxyCodeLine{3784       \textcolor{keywordflow}{if} (sizes[i] > (1 << i))}
\DoxyCodeLine{3785          \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad sizes"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3786    code = 0;}
\DoxyCodeLine{3787    \textcolor{keywordflow}{for} (i=1; i < 16; ++i) \{}
\DoxyCodeLine{3788       next\_code[i] = code;}
\DoxyCodeLine{3789       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>firstcode[i] = (stbi\_\_uint16) code;}
\DoxyCodeLine{3790       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>firstsymbol[i] = (stbi\_\_uint16) k;}
\DoxyCodeLine{3791       code = (code + sizes[i]);}
\DoxyCodeLine{3792       \textcolor{keywordflow}{if} (sizes[i])}
\DoxyCodeLine{3793          \textcolor{keywordflow}{if} (code-\/1 >= (1 << i)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad codelengths"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3794       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>maxcode[i] = code << (16-\/i); \textcolor{comment}{// preshift for inner loop}}
\DoxyCodeLine{3795       code <<= 1;}
\DoxyCodeLine{3796       k += sizes[i];}
\DoxyCodeLine{3797    \}}
\DoxyCodeLine{3798    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>maxcode[16] = 0x10000; \textcolor{comment}{// sentinel}}
\DoxyCodeLine{3799    \textcolor{keywordflow}{for} (i=0; i < num; ++i) \{}
\DoxyCodeLine{3800       \textcolor{keywordtype}{int} s = sizelist[i];}
\DoxyCodeLine{3801       \textcolor{keywordflow}{if} (s) \{}
\DoxyCodeLine{3802          \textcolor{keywordtype}{int} c = next\_code[s] -\/ \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>firstcode[s] + \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>firstsymbol[s];}
\DoxyCodeLine{3803          stbi\_\_uint16 fastv = (stbi\_\_uint16) ((s << 9) | i);}
\DoxyCodeLine{3804          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>size [c] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}     ) s;}
\DoxyCodeLine{3805          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>value[c] = (stbi\_\_uint16) i;}
\DoxyCodeLine{3806          \textcolor{keywordflow}{if} (s <= STBI\_\_ZFAST\_BITS) \{}
\DoxyCodeLine{3807             \textcolor{keywordtype}{int} j = stbi\_\_bit\_reverse(next\_code[s],s);}
\DoxyCodeLine{3808             \textcolor{keywordflow}{while} (j < (1 << STBI\_\_ZFAST\_BITS)) \{}
\DoxyCodeLine{3809                \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>fast[j] = fastv;}
\DoxyCodeLine{3810                j += (1 << s);}
\DoxyCodeLine{3811             \}}
\DoxyCodeLine{3812          \}}
\DoxyCodeLine{3813          ++next\_code[s];}
\DoxyCodeLine{3814       \}}
\DoxyCodeLine{3815    \}}
\DoxyCodeLine{3816    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3817 \}}
\DoxyCodeLine{3818 }
\DoxyCodeLine{3819 \textcolor{comment}{// zlib-\/from-\/memory implementation for PNG reading}}
\DoxyCodeLine{3820 \textcolor{comment}{//    because PNG allows splitting the zlib stream arbitrarily,}}
\DoxyCodeLine{3821 \textcolor{comment}{//    and it's annoying structurally to have PNG call ZLIB call PNG,}}
\DoxyCodeLine{3822 \textcolor{comment}{//    we require PNG read all the IDATs and combine them into a single}}
\DoxyCodeLine{3823 \textcolor{comment}{//    memory buffer}}
\DoxyCodeLine{3824 }
\DoxyCodeLine{3825 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3826 \{}
\DoxyCodeLine{3827    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *zbuffer, *zbuffer\_end;}
\DoxyCodeLine{3828    \textcolor{keywordtype}{int} num\_bits;}
\DoxyCodeLine{3829    stbi\_\_uint32 code\_buffer;}
\DoxyCodeLine{3830 }
\DoxyCodeLine{3831    \textcolor{keywordtype}{char} *zout;}
\DoxyCodeLine{3832    \textcolor{keywordtype}{char} *zout\_start;}
\DoxyCodeLine{3833    \textcolor{keywordtype}{char} *zout\_end;}
\DoxyCodeLine{3834    \textcolor{keywordtype}{int}   z\_expandable;}
\DoxyCodeLine{3835 }
\DoxyCodeLine{3836    stbi\_\_zhuffman z\_length, z\_distance;}
\DoxyCodeLine{3837 \} stbi\_\_zbuf;}
\DoxyCodeLine{3838 }
\DoxyCodeLine{3839 stbi\_inline \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_zget8(stbi\_\_zbuf *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{3840 \{}
\DoxyCodeLine{3841    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zbuffer >= \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zbuffer\_end) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3842    \textcolor{keywordflow}{return} *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zbuffer++;}
\DoxyCodeLine{3843 \}}
\DoxyCodeLine{3844 }
\DoxyCodeLine{3845 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_fill\_bits(stbi\_\_zbuf *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{3846 \{}
\DoxyCodeLine{3847    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{3848       STBI\_ASSERT(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>code\_buffer < (1U << \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>num\_bits));}
\DoxyCodeLine{3849       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>code\_buffer |= (\textcolor{keywordtype}{unsigned} int) stbi\_\_zget8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}) << \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>num\_bits;}
\DoxyCodeLine{3850       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>num\_bits += 8;}
\DoxyCodeLine{3851    \} \textcolor{keywordflow}{while} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>num\_bits <= 24);}
\DoxyCodeLine{3852 \}}
\DoxyCodeLine{3853 }
\DoxyCodeLine{3854 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stbi\_\_zreceive(stbi\_\_zbuf *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3855 \{}
\DoxyCodeLine{3856    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{3857    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>num\_bits < n) stbi\_\_fill\_bits(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{3858    k = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>code\_buffer \& ((1 << n) -\/ 1);}
\DoxyCodeLine{3859    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>code\_buffer >>= n;}
\DoxyCodeLine{3860    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>num\_bits -\/= n;}
\DoxyCodeLine{3861    \textcolor{keywordflow}{return} k;}
\DoxyCodeLine{3862 \}}
\DoxyCodeLine{3863 }
\DoxyCodeLine{3864 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zhuffman\_decode\_slowpath(stbi\_\_zbuf *a, stbi\_\_zhuffman *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{3865 \{}
\DoxyCodeLine{3866    \textcolor{keywordtype}{int} b,s,k;}
\DoxyCodeLine{3867    \textcolor{comment}{// not resolved by fast table, so compute it the slow way}}
\DoxyCodeLine{3868    \textcolor{comment}{// use jpeg approach, which requires MSbits at top}}
\DoxyCodeLine{3869    k = stbi\_\_bit\_reverse(a-\/>code\_buffer, 16);}
\DoxyCodeLine{3870    \textcolor{keywordflow}{for} (s=STBI\_\_ZFAST\_BITS+1; ; ++s)}
\DoxyCodeLine{3871       \textcolor{keywordflow}{if} (k < z-\/>maxcode[s])}
\DoxyCodeLine{3872          \textcolor{keywordflow}{break};}
\DoxyCodeLine{3873    \textcolor{keywordflow}{if} (s == 16) \textcolor{keywordflow}{return} -\/1; \textcolor{comment}{// invalid code!}}
\DoxyCodeLine{3874    \textcolor{comment}{// code size is s, so:}}
\DoxyCodeLine{3875    b = (k >> (16-\/s)) -\/ \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>firstcode[s] + \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>firstsymbol[s];}
\DoxyCodeLine{3876    STBI\_ASSERT(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>size[b] == s);}
\DoxyCodeLine{3877    a-\/>code\_buffer >>= s;}
\DoxyCodeLine{3878    a-\/>num\_bits -\/= s;}
\DoxyCodeLine{3879    \textcolor{keywordflow}{return} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>value[b];}
\DoxyCodeLine{3880 \}}
\DoxyCodeLine{3881 }
\DoxyCodeLine{3882 stbi\_inline \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zhuffman\_decode(stbi\_\_zbuf *a, stbi\_\_zhuffman *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{3883 \{}
\DoxyCodeLine{3884    \textcolor{keywordtype}{int} b,s;}
\DoxyCodeLine{3885    \textcolor{keywordflow}{if} (a-\/>num\_bits < 16) stbi\_\_fill\_bits(a);}
\DoxyCodeLine{3886    b = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>fast[a-\/>code\_buffer \& STBI\_\_ZFAST\_MASK];}
\DoxyCodeLine{3887    \textcolor{keywordflow}{if} (b) \{}
\DoxyCodeLine{3888       s = b >> 9;}
\DoxyCodeLine{3889       a-\/>code\_buffer >>= s;}
\DoxyCodeLine{3890       a-\/>num\_bits -\/= s;}
\DoxyCodeLine{3891       \textcolor{keywordflow}{return} b \& 511;}
\DoxyCodeLine{3892    \}}
\DoxyCodeLine{3893    \textcolor{keywordflow}{return} stbi\_\_zhuffman\_decode\_slowpath(a, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{3894 \}}
\DoxyCodeLine{3895 }
\DoxyCodeLine{3896 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zexpand(stbi\_\_zbuf *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{char} *zout, \textcolor{keywordtype}{int} n)  \textcolor{comment}{// need to make room for n bytes}}
\DoxyCodeLine{3897 \{}
\DoxyCodeLine{3898    \textcolor{keywordtype}{char} *q;}
\DoxyCodeLine{3899    \textcolor{keywordtype}{int} cur, limit, old\_limit;}
\DoxyCodeLine{3900    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout = zout;}
\DoxyCodeLine{3901    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>z\_expandable) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}output buffer limit"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3902    cur   = (int) (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout     -\/ \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout\_start);}
\DoxyCodeLine{3903    limit = old\_limit = (int) (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout\_end -\/ \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout\_start);}
\DoxyCodeLine{3904    \textcolor{keywordflow}{while} (cur + n > limit)}
\DoxyCodeLine{3905       limit *= 2;}
\DoxyCodeLine{3906    q = (\textcolor{keywordtype}{char} *) STBI\_REALLOC\_SIZED(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout\_start, old\_limit, limit);}
\DoxyCodeLine{3907    STBI\_NOTUSED(old\_limit);}
\DoxyCodeLine{3908    \textcolor{keywordflow}{if} (q == NULL) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{3909    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout\_start = q;}
\DoxyCodeLine{3910    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout       = q + cur;}
\DoxyCodeLine{3911    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>zout\_end   = q + limit;}
\DoxyCodeLine{3912    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3913 \}}
\DoxyCodeLine{3914 }
\DoxyCodeLine{3915 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zlength\_base[31] = \{}
\DoxyCodeLine{3916    3,4,5,6,7,8,9,10,11,13,}
\DoxyCodeLine{3917    15,17,19,23,27,31,35,43,51,59,}
\DoxyCodeLine{3918    67,83,99,115,131,163,195,227,258,0,0 \};}
\DoxyCodeLine{3919 }
\DoxyCodeLine{3920 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zlength\_extra[31]=}
\DoxyCodeLine{3921 \{ 0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0 \};}
\DoxyCodeLine{3922 }
\DoxyCodeLine{3923 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zdist\_base[32] = \{ 1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,}
\DoxyCodeLine{3924 257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0\};}
\DoxyCodeLine{3925 }
\DoxyCodeLine{3926 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zdist\_extra[32] =}
\DoxyCodeLine{3927 \{ 0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13\};}
\DoxyCodeLine{3928 }
\DoxyCodeLine{3929 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_huffman\_block(stbi\_\_zbuf *a)}
\DoxyCodeLine{3930 \{}
\DoxyCodeLine{3931    \textcolor{keywordtype}{char} *zout = a-\/>zout;}
\DoxyCodeLine{3932    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{3933       \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = stbi\_\_zhuffman\_decode(a, \&a-\/>z\_length);}
\DoxyCodeLine{3934       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} < 256) \{}
\DoxyCodeLine{3935          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} < 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}}); \textcolor{comment}{// error in huffman codes}}
\DoxyCodeLine{3936          \textcolor{keywordflow}{if} (zout >= a-\/>zout\_end) \{}
\DoxyCodeLine{3937             \textcolor{keywordflow}{if} (!stbi\_\_zexpand(a, zout, 1)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3938             zout = a-\/>zout;}
\DoxyCodeLine{3939          \}}
\DoxyCodeLine{3940          *zout++ = (char) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}};}
\DoxyCodeLine{3941       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3942          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p;}
\DoxyCodeLine{3943          \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}},\mbox{\hyperlink{matrix_8c_afd6b64cdf07c11e9670ac4ff6196216d}{dist}};}
\DoxyCodeLine{3944          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} == 256) \{}
\DoxyCodeLine{3945             a-\/>zout = zout;}
\DoxyCodeLine{3946             \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3947          \}}
\DoxyCodeLine{3948          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} -\/= 257;}
\DoxyCodeLine{3949          \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = stbi\_\_zlength\_base[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}];}
\DoxyCodeLine{3950          \textcolor{keywordflow}{if} (stbi\_\_zlength\_extra[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}]) \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} += stbi\_\_zreceive(a, stbi\_\_zlength\_extra[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}]);}
\DoxyCodeLine{3951          \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = stbi\_\_zhuffman\_decode(a, \&a-\/>z\_distance);}
\DoxyCodeLine{3952          \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} < 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3953          \mbox{\hyperlink{matrix_8c_afd6b64cdf07c11e9670ac4ff6196216d}{dist}} = stbi\_\_zdist\_base[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}];}
\DoxyCodeLine{3954          \textcolor{keywordflow}{if} (stbi\_\_zdist\_extra[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}]) \mbox{\hyperlink{matrix_8c_afd6b64cdf07c11e9670ac4ff6196216d}{dist}} += stbi\_\_zreceive(a, stbi\_\_zdist\_extra[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}]);}
\DoxyCodeLine{3955          \textcolor{keywordflow}{if} (zout -\/ a-\/>zout\_start < \mbox{\hyperlink{matrix_8c_afd6b64cdf07c11e9670ac4ff6196216d}{dist}}) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad dist"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3956          \textcolor{keywordflow}{if} (zout + \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} > a-\/>zout\_end) \{}
\DoxyCodeLine{3957             \textcolor{keywordflow}{if} (!stbi\_\_zexpand(a, zout, \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}})) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3958             zout = a-\/>zout;}
\DoxyCodeLine{3959          \}}
\DoxyCodeLine{3960          p = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) (zout -\/ \mbox{\hyperlink{matrix_8c_afd6b64cdf07c11e9670ac4ff6196216d}{dist}});}
\DoxyCodeLine{3961          \textcolor{keywordflow}{if} (\mbox{\hyperlink{matrix_8c_afd6b64cdf07c11e9670ac4ff6196216d}{dist}} == 1) \{ \textcolor{comment}{// run of one byte; common in images.}}
\DoxyCodeLine{3962             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} v = *p;}
\DoxyCodeLine{3963             \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}) \{ \textcolor{keywordflow}{do} *zout++ = v; \textcolor{keywordflow}{while} (-\/-\/\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}); \}}
\DoxyCodeLine{3964          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3965             \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}) \{ \textcolor{keywordflow}{do} *zout++ = *p++; \textcolor{keywordflow}{while} (-\/-\/\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}); \}}
\DoxyCodeLine{3966          \}}
\DoxyCodeLine{3967       \}}
\DoxyCodeLine{3968    \}}
\DoxyCodeLine{3969 \}}
\DoxyCodeLine{3970 }
\DoxyCodeLine{3971 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_compute\_huffman\_codes(stbi\_\_zbuf *a)}
\DoxyCodeLine{3972 \{}
\DoxyCodeLine{3973    \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} length\_dezigzag[19] = \{ 16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15 \};}
\DoxyCodeLine{3974    stbi\_\_zhuffman z\_codelength;}
\DoxyCodeLine{3975    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} lencodes[286+32+137];\textcolor{comment}{//padding for maximum single op}}
\DoxyCodeLine{3976    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} codelength\_sizes[19];}
\DoxyCodeLine{3977    \textcolor{keywordtype}{int} i,n;}
\DoxyCodeLine{3978 }
\DoxyCodeLine{3979    \textcolor{keywordtype}{int} hlit  = stbi\_\_zreceive(a,5) + 257;}
\DoxyCodeLine{3980    \textcolor{keywordtype}{int} \mbox{\hyperlink{_distance_utils_8h_ab13812ef6e21af771d6c0a856cd941b0}{hdist}} = stbi\_\_zreceive(a,5) + 1;}
\DoxyCodeLine{3981    \textcolor{keywordtype}{int} hclen = stbi\_\_zreceive(a,4) + 4;}
\DoxyCodeLine{3982    \textcolor{keywordtype}{int} ntot  = hlit + \mbox{\hyperlink{_distance_utils_8h_ab13812ef6e21af771d6c0a856cd941b0}{hdist}};}
\DoxyCodeLine{3983 }
\DoxyCodeLine{3984    memset(codelength\_sizes, 0, \textcolor{keyword}{sizeof}(codelength\_sizes));}
\DoxyCodeLine{3985    \textcolor{keywordflow}{for} (i=0; i < hclen; ++i) \{}
\DoxyCodeLine{3986       \textcolor{keywordtype}{int} s = stbi\_\_zreceive(a,3);}
\DoxyCodeLine{3987       codelength\_sizes[length\_dezigzag[i]] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) s;}
\DoxyCodeLine{3988    \}}
\DoxyCodeLine{3989    \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&z\_codelength, codelength\_sizes, 19)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3990 }
\DoxyCodeLine{3991    n = 0;}
\DoxyCodeLine{3992    \textcolor{keywordflow}{while} (n < ntot) \{}
\DoxyCodeLine{3993       \textcolor{keywordtype}{int} c = stbi\_\_zhuffman\_decode(a, \&z\_codelength);}
\DoxyCodeLine{3994       \textcolor{keywordflow}{if} (c < 0 || c >= 19) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad codelengths"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3995       \textcolor{keywordflow}{if} (c < 16)}
\DoxyCodeLine{3996          lencodes[n++] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) c;}
\DoxyCodeLine{3997       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3998          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} fill = 0;}
\DoxyCodeLine{3999          \textcolor{keywordflow}{if} (c == 16) \{}
\DoxyCodeLine{4000             c = stbi\_\_zreceive(a,2)+3;}
\DoxyCodeLine{4001             \textcolor{keywordflow}{if} (n == 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad codelengths"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4002             fill = lencodes[n-\/1];}
\DoxyCodeLine{4003          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == 17)}
\DoxyCodeLine{4004             c = stbi\_\_zreceive(a,3)+3;}
\DoxyCodeLine{4005          \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4006             STBI\_ASSERT(c == 18);}
\DoxyCodeLine{4007             c = stbi\_\_zreceive(a,7)+11;}
\DoxyCodeLine{4008          \}}
\DoxyCodeLine{4009          \textcolor{keywordflow}{if} (ntot -\/ n < c) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad codelengths"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4010          memset(lencodes+n, fill, c);}
\DoxyCodeLine{4011          n += c;}
\DoxyCodeLine{4012       \}}
\DoxyCodeLine{4013    \}}
\DoxyCodeLine{4014    \textcolor{keywordflow}{if} (n != ntot) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad codelengths"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4015    \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&a-\/>z\_length, lencodes, hlit)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4016    \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&a-\/>z\_distance, lencodes+hlit, \mbox{\hyperlink{_distance_utils_8h_ab13812ef6e21af771d6c0a856cd941b0}{hdist}})) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4017    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4018 \}}
\DoxyCodeLine{4019 }
\DoxyCodeLine{4020 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_uncompressed\_block(stbi\_\_zbuf *a)}
\DoxyCodeLine{4021 \{}
\DoxyCodeLine{4022    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} header[4];}
\DoxyCodeLine{4023    \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}},nlen,k;}
\DoxyCodeLine{4024    \textcolor{keywordflow}{if} (a-\/>num\_bits \& 7)}
\DoxyCodeLine{4025       stbi\_\_zreceive(a, a-\/>num\_bits \& 7); \textcolor{comment}{// discard}}
\DoxyCodeLine{4026    \textcolor{comment}{// drain the bit-\/packed data into header}}
\DoxyCodeLine{4027    k = 0;}
\DoxyCodeLine{4028    \textcolor{keywordflow}{while} (a-\/>num\_bits > 0) \{}
\DoxyCodeLine{4029       header[k++] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (a-\/>code\_buffer \& 255); \textcolor{comment}{// suppress MSVC run-\/time check}}
\DoxyCodeLine{4030       a-\/>code\_buffer >>= 8;}
\DoxyCodeLine{4031       a-\/>num\_bits -\/= 8;}
\DoxyCodeLine{4032    \}}
\DoxyCodeLine{4033    STBI\_ASSERT(a-\/>num\_bits == 0);}
\DoxyCodeLine{4034    \textcolor{comment}{// now fill header the normal way}}
\DoxyCodeLine{4035    \textcolor{keywordflow}{while} (k < 4)}
\DoxyCodeLine{4036       header[k++] = stbi\_\_zget8(a);}
\DoxyCodeLine{4037    \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}  = header[1] * 256 + header[0];}
\DoxyCodeLine{4038    nlen = header[3] * 256 + header[2];}
\DoxyCodeLine{4039    \textcolor{keywordflow}{if} (nlen != (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} \string^ 0xffff)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}zlib corrupt"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4040    \textcolor{keywordflow}{if} (a-\/>zbuffer + \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} > a-\/>zbuffer\_end) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}read past buffer"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4041    \textcolor{keywordflow}{if} (a-\/>zout + \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} > a-\/>zout\_end)}
\DoxyCodeLine{4042       \textcolor{keywordflow}{if} (!stbi\_\_zexpand(a, a-\/>zout, \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}})) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4043    memcpy(a-\/>zout, a-\/>zbuffer, \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{4044    a-\/>zbuffer += \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{4045    a-\/>zout += \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{4046    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4047 \}}
\DoxyCodeLine{4048 }
\DoxyCodeLine{4049 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_zlib\_header(stbi\_\_zbuf *a)}
\DoxyCodeLine{4050 \{}
\DoxyCodeLine{4051    \textcolor{keywordtype}{int} cmf   = stbi\_\_zget8(a);}
\DoxyCodeLine{4052    \textcolor{keywordtype}{int} cm    = cmf \& 15;}
\DoxyCodeLine{4053    \textcolor{comment}{/* int cinfo = cmf >> 4; */}}
\DoxyCodeLine{4054    \textcolor{keywordtype}{int} flg   = stbi\_\_zget8(a);}
\DoxyCodeLine{4055    \textcolor{keywordflow}{if} ((cmf*256+flg) \% 31 != 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad zlib header"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}}); \textcolor{comment}{// zlib spec}}
\DoxyCodeLine{4056    \textcolor{keywordflow}{if} (flg \& 32) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}no preset dict"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}}); \textcolor{comment}{// preset dictionary not allowed in png}}
\DoxyCodeLine{4057    \textcolor{keywordflow}{if} (cm != 8) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad compression"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}}); \textcolor{comment}{// DEFLATE required for png}}
\DoxyCodeLine{4058    \textcolor{comment}{// window = 1 << (8 + cinfo)... but who cares, we fully buffer output}}
\DoxyCodeLine{4059    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4060 \}}
\DoxyCodeLine{4061 }
\DoxyCodeLine{4062 \textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_zdefault\_length[288] =}
\DoxyCodeLine{4063 \{}
\DoxyCodeLine{4064    8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8, 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,}
\DoxyCodeLine{4065    8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8, 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,}
\DoxyCodeLine{4066    8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8, 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,}
\DoxyCodeLine{4067    8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8, 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,}
\DoxyCodeLine{4068    8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8, 9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,}
\DoxyCodeLine{4069    9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9, 9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,}
\DoxyCodeLine{4070    9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9, 9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,}
\DoxyCodeLine{4071    9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9, 9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,}
\DoxyCodeLine{4072    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7, 7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8}
\DoxyCodeLine{4073 \};}
\DoxyCodeLine{4074 \textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_zdefault\_distance[32] =}
\DoxyCodeLine{4075 \{}
\DoxyCodeLine{4076    5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5}
\DoxyCodeLine{4077 \};}
\DoxyCodeLine{4078 \textcolor{comment}{/*}}
\DoxyCodeLine{4079 \textcolor{comment}{Init algorithm:}}
\DoxyCodeLine{4080 \textcolor{comment}{\{}}
\DoxyCodeLine{4081 \textcolor{comment}{   int i;   // use <= to match clearly with spec}}
\DoxyCodeLine{4082 \textcolor{comment}{   for (i=0; i <= 143; ++i)     stbi\_\_zdefault\_length[i]   = 8;}}
\DoxyCodeLine{4083 \textcolor{comment}{   for (   ; i <= 255; ++i)     stbi\_\_zdefault\_length[i]   = 9;}}
\DoxyCodeLine{4084 \textcolor{comment}{   for (   ; i <= 279; ++i)     stbi\_\_zdefault\_length[i]   = 7;}}
\DoxyCodeLine{4085 \textcolor{comment}{   for (   ; i <= 287; ++i)     stbi\_\_zdefault\_length[i]   = 8;}}
\DoxyCodeLine{4086 \textcolor{comment}{}}
\DoxyCodeLine{4087 \textcolor{comment}{   for (i=0; i <=  31; ++i)     stbi\_\_zdefault\_distance[i] = 5;}}
\DoxyCodeLine{4088 \textcolor{comment}{\}}}
\DoxyCodeLine{4089 \textcolor{comment}{*/}}
\DoxyCodeLine{4090 }
\DoxyCodeLine{4091 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_zlib(stbi\_\_zbuf *a, \textcolor{keywordtype}{int} parse\_header)}
\DoxyCodeLine{4092 \{}
\DoxyCodeLine{4093    \textcolor{keywordtype}{int} \textcolor{keyword}{final}, type;}
\DoxyCodeLine{4094    \textcolor{keywordflow}{if} (parse\_header)}
\DoxyCodeLine{4095       \textcolor{keywordflow}{if} (!stbi\_\_parse\_zlib\_header(a)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4096    a-\/>num\_bits = 0;}
\DoxyCodeLine{4097    a-\/>code\_buffer = 0;}
\DoxyCodeLine{4098    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{4099       \textcolor{keyword}{final} = stbi\_\_zreceive(a,1);}
\DoxyCodeLine{4100       type = stbi\_\_zreceive(a,2);}
\DoxyCodeLine{4101       \textcolor{keywordflow}{if} (type == 0) \{}
\DoxyCodeLine{4102          \textcolor{keywordflow}{if} (!stbi\_\_parse\_uncompressed\_block(a)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4103       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == 3) \{}
\DoxyCodeLine{4104          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4105       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4106          \textcolor{keywordflow}{if} (type == 1) \{}
\DoxyCodeLine{4107             \textcolor{comment}{// use fixed code lengths}}
\DoxyCodeLine{4108             \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&a-\/>z\_length  , stbi\_\_zdefault\_length  , 288)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4109             \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&a-\/>z\_distance, stbi\_\_zdefault\_distance,  32)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4110          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4111             \textcolor{keywordflow}{if} (!stbi\_\_compute\_huffman\_codes(a)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4112          \}}
\DoxyCodeLine{4113          \textcolor{keywordflow}{if} (!stbi\_\_parse\_huffman\_block(a)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4114       \}}
\DoxyCodeLine{4115    \} \textcolor{keywordflow}{while} (!\textcolor{keyword}{final});}
\DoxyCodeLine{4116    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4117 \}}
\DoxyCodeLine{4118 }
\DoxyCodeLine{4119 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_do\_zlib(stbi\_\_zbuf *a, \textcolor{keywordtype}{char} *obuf, \textcolor{keywordtype}{int} olen, \textcolor{keywordtype}{int} exp, \textcolor{keywordtype}{int} parse\_header)}
\DoxyCodeLine{4120 \{}
\DoxyCodeLine{4121    a-\/>zout\_start = obuf;}
\DoxyCodeLine{4122    a-\/>zout       = obuf;}
\DoxyCodeLine{4123    a-\/>zout\_end   = obuf + olen;}
\DoxyCodeLine{4124    a-\/>z\_expandable = exp;}
\DoxyCodeLine{4125 }
\DoxyCodeLine{4126    \textcolor{keywordflow}{return} stbi\_\_parse\_zlib(a, parse\_header);}
\DoxyCodeLine{4127 \}}
\DoxyCodeLine{4128 }
\DoxyCodeLine{4129 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_acba137e5310f3c0fe9bb198e4bee3dce}{stbi\_zlib\_decode\_malloc\_guesssize}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} initial\_size, \textcolor{keywordtype}{int} *outlen)}
\DoxyCodeLine{4130 \{}
\DoxyCodeLine{4131    stbi\_\_zbuf a;}
\DoxyCodeLine{4132    \textcolor{keywordtype}{char} *p = (\textcolor{keywordtype}{char} *) stbi\_\_malloc(initial\_size);}
\DoxyCodeLine{4133    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4134    a.zbuffer = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{4135    a.zbuffer\_end = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{classbuffer}{buffer}} + \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{4136    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, p, initial\_size, 1, 1)) \{}
\DoxyCodeLine{4137       \textcolor{keywordflow}{if} (outlen) *outlen = (int) (a.zout -\/ a.zout\_start);}
\DoxyCodeLine{4138       \textcolor{keywordflow}{return} a.zout\_start;}
\DoxyCodeLine{4139    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4140       STBI\_FREE(a.zout\_start);}
\DoxyCodeLine{4141       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4142    \}}
\DoxyCodeLine{4143 \}}
\DoxyCodeLine{4144 }
\DoxyCodeLine{4145 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_afec644d4e1a3cd858dfe0f9c55a1e55c}{stbi\_zlib\_decode\_malloc}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *outlen)}
\DoxyCodeLine{4146 \{}
\DoxyCodeLine{4147    \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_acba137e5310f3c0fe9bb198e4bee3dce}{stbi\_zlib\_decode\_malloc\_guesssize}}(\mbox{\hyperlink{classbuffer}{buffer}}, \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, 16384, outlen);}
\DoxyCodeLine{4148 \}}
\DoxyCodeLine{4149 }
\DoxyCodeLine{4150 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_adc3de199aa29f7370a699ad545155541}{stbi\_zlib\_decode\_malloc\_guesssize\_headerflag}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} initial\_size, \textcolor{keywordtype}{int} *outlen, \textcolor{keywordtype}{int} parse\_header)}
\DoxyCodeLine{4151 \{}
\DoxyCodeLine{4152    stbi\_\_zbuf a;}
\DoxyCodeLine{4153    \textcolor{keywordtype}{char} *p = (\textcolor{keywordtype}{char} *) stbi\_\_malloc(initial\_size);}
\DoxyCodeLine{4154    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4155    a.zbuffer = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{4156    a.zbuffer\_end = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{classbuffer}{buffer}} + \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{4157    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, p, initial\_size, 1, parse\_header)) \{}
\DoxyCodeLine{4158       \textcolor{keywordflow}{if} (outlen) *outlen = (int) (a.zout -\/ a.zout\_start);}
\DoxyCodeLine{4159       \textcolor{keywordflow}{return} a.zout\_start;}
\DoxyCodeLine{4160    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4161       STBI\_FREE(a.zout\_start);}
\DoxyCodeLine{4162       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4163    \}}
\DoxyCodeLine{4164 \}}
\DoxyCodeLine{4165 }
\DoxyCodeLine{4166 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_ae8447830c49bc17f8491e12c1f0ded48}{stbi\_zlib\_decode\_buffer}}(\textcolor{keywordtype}{char} *obuffer, \textcolor{keywordtype}{int} olen, \textcolor{keywordtype}{char} \textcolor{keyword}{const} *ibuffer, \textcolor{keywordtype}{int} ilen)}
\DoxyCodeLine{4167 \{}
\DoxyCodeLine{4168    stbi\_\_zbuf a;}
\DoxyCodeLine{4169    a.zbuffer = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) ibuffer;}
\DoxyCodeLine{4170    a.zbuffer\_end = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) ibuffer + ilen;}
\DoxyCodeLine{4171    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, obuffer, olen, 0, 1))}
\DoxyCodeLine{4172       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) (a.zout -\/ a.zout\_start);}
\DoxyCodeLine{4173    \textcolor{keywordflow}{else}}
\DoxyCodeLine{4174       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4175 \}}
\DoxyCodeLine{4176 }
\DoxyCodeLine{4177 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_ad6b5cd73a89037832ee2b2872a17bd1b}{stbi\_zlib\_decode\_noheader\_malloc}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *outlen)}
\DoxyCodeLine{4178 \{}
\DoxyCodeLine{4179    stbi\_\_zbuf a;}
\DoxyCodeLine{4180    \textcolor{keywordtype}{char} *p = (\textcolor{keywordtype}{char} *) stbi\_\_malloc(16384);}
\DoxyCodeLine{4181    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4182    a.zbuffer = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{4183    a.zbuffer\_end = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{classbuffer}{buffer}}+\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{4184    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, p, 16384, 1, 0)) \{}
\DoxyCodeLine{4185       \textcolor{keywordflow}{if} (outlen) *outlen = (int) (a.zout -\/ a.zout\_start);}
\DoxyCodeLine{4186       \textcolor{keywordflow}{return} a.zout\_start;}
\DoxyCodeLine{4187    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4188       STBI\_FREE(a.zout\_start);}
\DoxyCodeLine{4189       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4190    \}}
\DoxyCodeLine{4191 \}}
\DoxyCodeLine{4192 }
\DoxyCodeLine{4193 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_a0d12efc011adfff7521f3b924feb0b0e}{stbi\_zlib\_decode\_noheader\_buffer}}(\textcolor{keywordtype}{char} *obuffer, \textcolor{keywordtype}{int} olen, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ibuffer, \textcolor{keywordtype}{int} ilen)}
\DoxyCodeLine{4194 \{}
\DoxyCodeLine{4195    stbi\_\_zbuf a;}
\DoxyCodeLine{4196    a.zbuffer = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) ibuffer;}
\DoxyCodeLine{4197    a.zbuffer\_end = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) ibuffer + ilen;}
\DoxyCodeLine{4198    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, obuffer, olen, 0, 0))}
\DoxyCodeLine{4199       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) (a.zout -\/ a.zout\_start);}
\DoxyCodeLine{4200    \textcolor{keywordflow}{else}}
\DoxyCodeLine{4201       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4202 \}}
\DoxyCodeLine{4203 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{4204 }
\DoxyCodeLine{4205 \textcolor{comment}{// public domain "{}baseline"{} PNG decoder   v0.10  Sean Barrett 2006-\/11-\/18}}
\DoxyCodeLine{4206 \textcolor{comment}{//    simple implementation}}
\DoxyCodeLine{4207 \textcolor{comment}{//      -\/ only 8-\/bit samples}}
\DoxyCodeLine{4208 \textcolor{comment}{//      -\/ no CRC checking}}
\DoxyCodeLine{4209 \textcolor{comment}{//      -\/ allocates lots of intermediate memory}}
\DoxyCodeLine{4210 \textcolor{comment}{//        -\/ avoids problem of streaming data between subsystems}}
\DoxyCodeLine{4211 \textcolor{comment}{//        -\/ avoids explicit window management}}
\DoxyCodeLine{4212 \textcolor{comment}{//    performance}}
\DoxyCodeLine{4213 \textcolor{comment}{//      -\/ uses stb\_zlib, a PD zlib implementation with fast huffman decoding}}
\DoxyCodeLine{4214 }
\DoxyCodeLine{4215 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNG}}
\DoxyCodeLine{4216 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{4217 \{}
\DoxyCodeLine{4218    stbi\_\_uint32 length;}
\DoxyCodeLine{4219    stbi\_\_uint32 type;}
\DoxyCodeLine{4220 \} stbi\_\_pngchunk;}
\DoxyCodeLine{4221 }
\DoxyCodeLine{4222 \textcolor{keyword}{static} stbi\_\_pngchunk stbi\_\_get\_chunk\_header(stbi\_\_context *s)}
\DoxyCodeLine{4223 \{}
\DoxyCodeLine{4224    stbi\_\_pngchunk c;}
\DoxyCodeLine{4225    c.length = stbi\_\_get32be(s);}
\DoxyCodeLine{4226    c.type   = stbi\_\_get32be(s);}
\DoxyCodeLine{4227    \textcolor{keywordflow}{return} c;}
\DoxyCodeLine{4228 \}}
\DoxyCodeLine{4229 }
\DoxyCodeLine{4230 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_check\_png\_header(stbi\_\_context *s)}
\DoxyCodeLine{4231 \{}
\DoxyCodeLine{4232    \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} png\_sig[8] = \{ 137,80,78,71,13,10,26,10 \};}
\DoxyCodeLine{4233    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{4234    \textcolor{keywordflow}{for} (i=0; i < 8; ++i)}
\DoxyCodeLine{4235       \textcolor{keywordflow}{if} (stbi\_\_get8(s) != png\_sig[i]) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad png sig"{}},\textcolor{stringliteral}{"{}Not a PNG"{}});}
\DoxyCodeLine{4236    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4237 \}}
\DoxyCodeLine{4238 }
\DoxyCodeLine{4239 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{4240 \{}
\DoxyCodeLine{4241    stbi\_\_context *s;}
\DoxyCodeLine{4242    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *idata, *expanded, *out;}
\DoxyCodeLine{4243    \textcolor{keywordtype}{int} \mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}};}
\DoxyCodeLine{4244 \} stbi\_\_png;}
\DoxyCodeLine{4245 }
\DoxyCodeLine{4246 }
\DoxyCodeLine{4247 \textcolor{keyword}{enum} \{}
\DoxyCodeLine{4248    STBI\_\_F\_none=0,}
\DoxyCodeLine{4249    STBI\_\_F\_sub=1,}
\DoxyCodeLine{4250    STBI\_\_F\_up=2,}
\DoxyCodeLine{4251    STBI\_\_F\_avg=3,}
\DoxyCodeLine{4252    STBI\_\_F\_paeth=4,}
\DoxyCodeLine{4253    \textcolor{comment}{// synthetic filters used for first scanline to avoid needing a dummy row of 0s}}
\DoxyCodeLine{4254    STBI\_\_F\_avg\_first,}
\DoxyCodeLine{4255    STBI\_\_F\_paeth\_first}
\DoxyCodeLine{4256 \};}
\DoxyCodeLine{4257 }
\DoxyCodeLine{4258 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} first\_row\_filter[5] =}
\DoxyCodeLine{4259 \{}
\DoxyCodeLine{4260    STBI\_\_F\_none,}
\DoxyCodeLine{4261    STBI\_\_F\_sub,}
\DoxyCodeLine{4262    STBI\_\_F\_none,}
\DoxyCodeLine{4263    STBI\_\_F\_avg\_first,}
\DoxyCodeLine{4264    STBI\_\_F\_paeth\_first}
\DoxyCodeLine{4265 \};}
\DoxyCodeLine{4266 }
\DoxyCodeLine{4267 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_paeth(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b, \textcolor{keywordtype}{int} c)}
\DoxyCodeLine{4268 \{}
\DoxyCodeLine{4269    \textcolor{keywordtype}{int} p = a + b -\/ c;}
\DoxyCodeLine{4270    \textcolor{keywordtype}{int} pa = abs(p-\/a);}
\DoxyCodeLine{4271    \textcolor{keywordtype}{int} pb = abs(p-\/b);}
\DoxyCodeLine{4272    \textcolor{keywordtype}{int} pc = abs(p-\/c);}
\DoxyCodeLine{4273    \textcolor{keywordflow}{if} (pa <= pb \&\& pa <= pc) \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{4274    \textcolor{keywordflow}{if} (pb <= pc) \textcolor{keywordflow}{return} b;}
\DoxyCodeLine{4275    \textcolor{keywordflow}{return} c;}
\DoxyCodeLine{4276 \}}
\DoxyCodeLine{4277 }
\DoxyCodeLine{4278 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_depth\_scale\_table[9] = \{ 0, 0xff, 0x55, 0, 0x11, 0,0,0, 0x01 \};}
\DoxyCodeLine{4279 }
\DoxyCodeLine{4280 \textcolor{comment}{// create the png data from post-\/deflated data}}
\DoxyCodeLine{4281 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_create\_png\_image\_raw(stbi\_\_png *a, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *raw, stbi\_\_uint32 raw\_len, \textcolor{keywordtype}{int} out\_n, stbi\_\_uint32 \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, stbi\_\_uint32 \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}}, \textcolor{keywordtype}{int} color)}
\DoxyCodeLine{4282 \{}
\DoxyCodeLine{4283    \textcolor{keywordtype}{int} \mbox{\hyperlink{classbytes}{bytes}} = (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 16? 2 : 1);}
\DoxyCodeLine{4284    stbi\_\_context *s = a-\/>s;}
\DoxyCodeLine{4285    stbi\_\_uint32 i,j,stride = \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*out\_n*\mbox{\hyperlink{classbytes}{bytes}};}
\DoxyCodeLine{4286    stbi\_\_uint32 img\_len, img\_width\_bytes;}
\DoxyCodeLine{4287    \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{4288    \textcolor{keywordtype}{int} img\_n = s-\/>img\_n; \textcolor{comment}{// copy it into a local for later}}
\DoxyCodeLine{4289 }
\DoxyCodeLine{4290    \textcolor{keywordtype}{int} output\_bytes = out\_n*\mbox{\hyperlink{classbytes}{bytes}};}
\DoxyCodeLine{4291    \textcolor{keywordtype}{int} filter\_bytes = img\_n*\mbox{\hyperlink{classbytes}{bytes}};}
\DoxyCodeLine{4292    \textcolor{keywordtype}{int} width = \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}};}
\DoxyCodeLine{4293 }
\DoxyCodeLine{4294    STBI\_ASSERT(out\_n == s-\/>img\_n || out\_n == s-\/>img\_n+1);}
\DoxyCodeLine{4295    a-\/>out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, output\_bytes, 0); \textcolor{comment}{// extra bytes to write off the end into}}
\DoxyCodeLine{4296    \textcolor{keywordflow}{if} (!a-\/>out) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{4297 }
\DoxyCodeLine{4298    img\_width\_bytes = (((img\_n * \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} * \mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}}) + 7) >> 3);}
\DoxyCodeLine{4299    img\_len = (img\_width\_bytes + 1) * \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}};}
\DoxyCodeLine{4300    \textcolor{comment}{// we used to check for exact match between raw\_len and img\_len on non-\/interlaced PNGs,}}
\DoxyCodeLine{4301    \textcolor{comment}{// but issue \#276 reported a PNG in the wild that had extra data at the end (all zeros),}}
\DoxyCodeLine{4302    \textcolor{comment}{// so just check for raw\_len < img\_len always.}}
\DoxyCodeLine{4303    \textcolor{keywordflow}{if} (raw\_len < img\_len) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}not enough pixels"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4304 }
\DoxyCodeLine{4305    \textcolor{keywordflow}{for} (j=0; j < \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}; ++j) \{}
\DoxyCodeLine{4306       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *cur = a-\/>out + stride*j;}
\DoxyCodeLine{4307       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *prior;}
\DoxyCodeLine{4308       \textcolor{keywordtype}{int} filter = *raw++;}
\DoxyCodeLine{4309 }
\DoxyCodeLine{4310       \textcolor{keywordflow}{if} (filter > 4)}
\DoxyCodeLine{4311          \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}invalid filter"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4312 }
\DoxyCodeLine{4313       \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} < 8) \{}
\DoxyCodeLine{4314          STBI\_ASSERT(img\_width\_bytes <= \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}});}
\DoxyCodeLine{4315          cur += \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*out\_n -\/ img\_width\_bytes; \textcolor{comment}{// store output to the rightmost img\_len bytes, so we can decode in place}}
\DoxyCodeLine{4316          filter\_bytes = 1;}
\DoxyCodeLine{4317          width = img\_width\_bytes;}
\DoxyCodeLine{4318       \}}
\DoxyCodeLine{4319       prior = cur -\/ stride; \textcolor{comment}{// bugfix: need to compute this after 'cur +=' computation above}}
\DoxyCodeLine{4320 }
\DoxyCodeLine{4321       \textcolor{comment}{// if first row, use special filter that doesn't sample previous row}}
\DoxyCodeLine{4322       \textcolor{keywordflow}{if} (j == 0) filter = first\_row\_filter[filter];}
\DoxyCodeLine{4323 }
\DoxyCodeLine{4324       \textcolor{comment}{// handle first byte explicitly}}
\DoxyCodeLine{4325       \textcolor{keywordflow}{for} (k=0; k < filter\_bytes; ++k) \{}
\DoxyCodeLine{4326          \textcolor{keywordflow}{switch} (filter) \{}
\DoxyCodeLine{4327             \textcolor{keywordflow}{case} STBI\_\_F\_none       : cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4328             \textcolor{keywordflow}{case} STBI\_\_F\_sub        : cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4329             \textcolor{keywordflow}{case} STBI\_\_F\_up         : cur[k] = STBI\_\_BYTECAST(raw[k] + prior[k]); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4330             \textcolor{keywordflow}{case} STBI\_\_F\_avg        : cur[k] = STBI\_\_BYTECAST(raw[k] + (prior[k]>>1)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4331             \textcolor{keywordflow}{case} STBI\_\_F\_paeth      : cur[k] = STBI\_\_BYTECAST(raw[k] + stbi\_\_paeth(0,prior[k],0)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4332             \textcolor{keywordflow}{case} STBI\_\_F\_avg\_first  : cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4333             \textcolor{keywordflow}{case} STBI\_\_F\_paeth\_first: cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4334          \}}
\DoxyCodeLine{4335       \}}
\DoxyCodeLine{4336 }
\DoxyCodeLine{4337       \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 8) \{}
\DoxyCodeLine{4338          \textcolor{keywordflow}{if} (img\_n != out\_n)}
\DoxyCodeLine{4339             cur[img\_n] = 255; \textcolor{comment}{// first pixel}}
\DoxyCodeLine{4340          raw += img\_n;}
\DoxyCodeLine{4341          cur += out\_n;}
\DoxyCodeLine{4342          prior += out\_n;}
\DoxyCodeLine{4343       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 16) \{}
\DoxyCodeLine{4344          \textcolor{keywordflow}{if} (img\_n != out\_n) \{}
\DoxyCodeLine{4345             cur[filter\_bytes]   = 255; \textcolor{comment}{// first pixel top byte}}
\DoxyCodeLine{4346             cur[filter\_bytes+1] = 255; \textcolor{comment}{// first pixel bottom byte}}
\DoxyCodeLine{4347          \}}
\DoxyCodeLine{4348          raw += filter\_bytes;}
\DoxyCodeLine{4349          cur += output\_bytes;}
\DoxyCodeLine{4350          prior += output\_bytes;}
\DoxyCodeLine{4351       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4352          raw += 1;}
\DoxyCodeLine{4353          cur += 1;}
\DoxyCodeLine{4354          prior += 1;}
\DoxyCodeLine{4355       \}}
\DoxyCodeLine{4356 }
\DoxyCodeLine{4357       \textcolor{comment}{// this is a little gross, so that we don't switch per-\/pixel or per-\/component}}
\DoxyCodeLine{4358       \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} < 8 || img\_n == out\_n) \{}
\DoxyCodeLine{4359          \textcolor{keywordtype}{int} nk = (width -\/ 1)*filter\_bytes;}
\DoxyCodeLine{4360 \textcolor{preprocessor}{         \#define STBI\_\_CASE(f) \(\backslash\)}}
\DoxyCodeLine{4361 \textcolor{preprocessor}{             case f:     \(\backslash\)}}
\DoxyCodeLine{4362 \textcolor{preprocessor}{                for (k=0; k < nk; ++k)}}
\DoxyCodeLine{4363          \textcolor{keywordflow}{switch} (filter) \{}
\DoxyCodeLine{4364             \textcolor{comment}{// "{}none"{} filter turns into a memcpy here; make that explicit.}}
\DoxyCodeLine{4365             \textcolor{keywordflow}{case} STBI\_\_F\_none:         memcpy(cur, raw, nk); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4366             STBI\_\_CASE(STBI\_\_F\_sub)          \{ cur[k] = STBI\_\_BYTECAST(raw[k] + cur[k-\/filter\_bytes]); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4367             STBI\_\_CASE(STBI\_\_F\_up)           \{ cur[k] = STBI\_\_BYTECAST(raw[k] + prior[k]); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4368             STBI\_\_CASE(STBI\_\_F\_avg)          \{ cur[k] = STBI\_\_BYTECAST(raw[k] + ((prior[k] + cur[k-\/filter\_bytes])>>1)); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4369             STBI\_\_CASE(STBI\_\_F\_paeth)        \{ cur[k] = STBI\_\_BYTECAST(raw[k] + stbi\_\_paeth(cur[k-\/filter\_bytes],prior[k],prior[k-\/filter\_bytes])); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4370             STBI\_\_CASE(STBI\_\_F\_avg\_first)    \{ cur[k] = STBI\_\_BYTECAST(raw[k] + (cur[k-\/filter\_bytes] >> 1)); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4371             STBI\_\_CASE(STBI\_\_F\_paeth\_first)  \{ cur[k] = STBI\_\_BYTECAST(raw[k] + stbi\_\_paeth(cur[k-\/filter\_bytes],0,0)); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4372          \}}
\DoxyCodeLine{4373 \textcolor{preprocessor}{         \#undef STBI\_\_CASE}}
\DoxyCodeLine{4374          raw += nk;}
\DoxyCodeLine{4375       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4376          STBI\_ASSERT(img\_n+1 == out\_n);}
\DoxyCodeLine{4377 \textcolor{preprocessor}{         \#define STBI\_\_CASE(f) \(\backslash\)}}
\DoxyCodeLine{4378 \textcolor{preprocessor}{             case f:     \(\backslash\)}}
\DoxyCodeLine{4379 \textcolor{preprocessor}{                for (i=x-\/1; i >= 1; -\/-\/i, cur[filter\_bytes]=255,raw+=filter\_bytes,cur+=output\_bytes,prior+=output\_bytes) \(\backslash\)}}
\DoxyCodeLine{4380 \textcolor{preprocessor}{                   for (k=0; k < filter\_bytes; ++k)}}
\DoxyCodeLine{4381          \textcolor{keywordflow}{switch} (filter) \{}
\DoxyCodeLine{4382             STBI\_\_CASE(STBI\_\_F\_none)         \{ cur[k] = raw[k]; \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4383             STBI\_\_CASE(STBI\_\_F\_sub)          \{ cur[k] = STBI\_\_BYTECAST(raw[k] + cur[k-\/ output\_bytes]); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4384             STBI\_\_CASE(STBI\_\_F\_up)           \{ cur[k] = STBI\_\_BYTECAST(raw[k] + prior[k]); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4385             STBI\_\_CASE(STBI\_\_F\_avg)          \{ cur[k] = STBI\_\_BYTECAST(raw[k] + ((prior[k] + cur[k-\/ output\_bytes])>>1)); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4386             STBI\_\_CASE(STBI\_\_F\_paeth)        \{ cur[k] = STBI\_\_BYTECAST(raw[k] + stbi\_\_paeth(cur[k-\/ output\_bytes],prior[k],prior[k-\/ output\_bytes])); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4387             STBI\_\_CASE(STBI\_\_F\_avg\_first)    \{ cur[k] = STBI\_\_BYTECAST(raw[k] + (cur[k-\/ output\_bytes] >> 1)); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4388             STBI\_\_CASE(STBI\_\_F\_paeth\_first)  \{ cur[k] = STBI\_\_BYTECAST(raw[k] + stbi\_\_paeth(cur[k-\/ output\_bytes],0,0)); \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{4389          \}}
\DoxyCodeLine{4390 \textcolor{preprocessor}{         \#undef STBI\_\_CASE}}
\DoxyCodeLine{4391 }
\DoxyCodeLine{4392          \textcolor{comment}{// the loop above sets the high byte of the pixels' alpha, but for}}
\DoxyCodeLine{4393          \textcolor{comment}{// 16 bit png files we also need the low byte set. we'll do that here.}}
\DoxyCodeLine{4394          \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 16) \{}
\DoxyCodeLine{4395             cur = a-\/>out + stride*j; \textcolor{comment}{// start at the beginning of the row again}}
\DoxyCodeLine{4396             \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}; ++i,cur+=output\_bytes) \{}
\DoxyCodeLine{4397                cur[filter\_bytes+1] = 255;}
\DoxyCodeLine{4398             \}}
\DoxyCodeLine{4399          \}}
\DoxyCodeLine{4400       \}}
\DoxyCodeLine{4401    \}}
\DoxyCodeLine{4402 }
\DoxyCodeLine{4403    \textcolor{comment}{// we make a separate pass to expand bits to pixels; for performance,}}
\DoxyCodeLine{4404    \textcolor{comment}{// this could run two scanlines behind the above code, so it won't}}
\DoxyCodeLine{4405    \textcolor{comment}{// intefere with filtering but will still be in the cache.}}
\DoxyCodeLine{4406    \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} < 8) \{}
\DoxyCodeLine{4407       \textcolor{keywordflow}{for} (j=0; j < \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}; ++j) \{}
\DoxyCodeLine{4408          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *cur = a-\/>out + stride*j;}
\DoxyCodeLine{4409          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in  = a-\/>out + stride*j + \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*out\_n -\/ img\_width\_bytes;}
\DoxyCodeLine{4410          \textcolor{comment}{// unpack 1/2/4-\/bit into a 8-\/bit buffer. allows us to keep the common 8-\/bit path optimal at minimal cost for 1/2/4-\/bit}}
\DoxyCodeLine{4411          \textcolor{comment}{// png guarante byte alignment, if width is not multiple of 8/4/2 we'll decode dummy trailing data that will be skipped in the later loop}}
\DoxyCodeLine{4412          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} scale = (color == 0) ? stbi\_\_depth\_scale\_table[\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}}] : 1; \textcolor{comment}{// scale grayscale values to 0..255 range}}
\DoxyCodeLine{4413 }
\DoxyCodeLine{4414          \textcolor{comment}{// note that the final byte might overshoot and write more data than desired.}}
\DoxyCodeLine{4415          \textcolor{comment}{// we can allocate enough data that this never writes out of memory, but it}}
\DoxyCodeLine{4416          \textcolor{comment}{// could also overwrite the next scanline. can it overwrite non-\/empty data}}
\DoxyCodeLine{4417          \textcolor{comment}{// on the next scanline? yes, consider 1-\/pixel-\/wide scanlines with 1-\/bit-\/per-\/pixel.}}
\DoxyCodeLine{4418          \textcolor{comment}{// so we need to explicitly clamp the final ones}}
\DoxyCodeLine{4419 }
\DoxyCodeLine{4420          \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 4) \{}
\DoxyCodeLine{4421             \textcolor{keywordflow}{for} (k=\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*img\_n; k >= 2; k-\/=2, ++in) \{}
\DoxyCodeLine{4422                *cur++ = scale * ((*in >> 4)       );}
\DoxyCodeLine{4423                *cur++ = scale * ((*in     ) \& 0x0f);}
\DoxyCodeLine{4424             \}}
\DoxyCodeLine{4425             \textcolor{keywordflow}{if} (k > 0) *cur++ = scale * ((*in >> 4)       );}
\DoxyCodeLine{4426          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 2) \{}
\DoxyCodeLine{4427             \textcolor{keywordflow}{for} (k=\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*img\_n; k >= 4; k-\/=4, ++in) \{}
\DoxyCodeLine{4428                *cur++ = scale * ((*in >> 6)       );}
\DoxyCodeLine{4429                *cur++ = scale * ((*in >> 4) \& 0x03);}
\DoxyCodeLine{4430                *cur++ = scale * ((*in >> 2) \& 0x03);}
\DoxyCodeLine{4431                *cur++ = scale * ((*in     ) \& 0x03);}
\DoxyCodeLine{4432             \}}
\DoxyCodeLine{4433             \textcolor{keywordflow}{if} (k > 0) *cur++ = scale * ((*in >> 6)       );}
\DoxyCodeLine{4434             \textcolor{keywordflow}{if} (k > 1) *cur++ = scale * ((*in >> 4) \& 0x03);}
\DoxyCodeLine{4435             \textcolor{keywordflow}{if} (k > 2) *cur++ = scale * ((*in >> 2) \& 0x03);}
\DoxyCodeLine{4436          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 1) \{}
\DoxyCodeLine{4437             \textcolor{keywordflow}{for} (k=\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*img\_n; k >= 8; k-\/=8, ++in) \{}
\DoxyCodeLine{4438                *cur++ = scale * ((*in >> 7)       );}
\DoxyCodeLine{4439                *cur++ = scale * ((*in >> 6) \& 0x01);}
\DoxyCodeLine{4440                *cur++ = scale * ((*in >> 5) \& 0x01);}
\DoxyCodeLine{4441                *cur++ = scale * ((*in >> 4) \& 0x01);}
\DoxyCodeLine{4442                *cur++ = scale * ((*in >> 3) \& 0x01);}
\DoxyCodeLine{4443                *cur++ = scale * ((*in >> 2) \& 0x01);}
\DoxyCodeLine{4444                *cur++ = scale * ((*in >> 1) \& 0x01);}
\DoxyCodeLine{4445                *cur++ = scale * ((*in     ) \& 0x01);}
\DoxyCodeLine{4446             \}}
\DoxyCodeLine{4447             \textcolor{keywordflow}{if} (k > 0) *cur++ = scale * ((*in >> 7)       );}
\DoxyCodeLine{4448             \textcolor{keywordflow}{if} (k > 1) *cur++ = scale * ((*in >> 6) \& 0x01);}
\DoxyCodeLine{4449             \textcolor{keywordflow}{if} (k > 2) *cur++ = scale * ((*in >> 5) \& 0x01);}
\DoxyCodeLine{4450             \textcolor{keywordflow}{if} (k > 3) *cur++ = scale * ((*in >> 4) \& 0x01);}
\DoxyCodeLine{4451             \textcolor{keywordflow}{if} (k > 4) *cur++ = scale * ((*in >> 3) \& 0x01);}
\DoxyCodeLine{4452             \textcolor{keywordflow}{if} (k > 5) *cur++ = scale * ((*in >> 2) \& 0x01);}
\DoxyCodeLine{4453             \textcolor{keywordflow}{if} (k > 6) *cur++ = scale * ((*in >> 1) \& 0x01);}
\DoxyCodeLine{4454          \}}
\DoxyCodeLine{4455          \textcolor{keywordflow}{if} (img\_n != out\_n) \{}
\DoxyCodeLine{4456             \textcolor{keywordtype}{int} q;}
\DoxyCodeLine{4457             \textcolor{comment}{// insert alpha = 255}}
\DoxyCodeLine{4458             cur = a-\/>out + stride*j;}
\DoxyCodeLine{4459             \textcolor{keywordflow}{if} (img\_n == 1) \{}
\DoxyCodeLine{4460                \textcolor{keywordflow}{for} (q=\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}-\/1; q >= 0; -\/-\/q) \{}
\DoxyCodeLine{4461                   cur[q*2+1] = 255;}
\DoxyCodeLine{4462                   cur[q*2+0] = cur[q];}
\DoxyCodeLine{4463                \}}
\DoxyCodeLine{4464             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4465                STBI\_ASSERT(img\_n == 3);}
\DoxyCodeLine{4466                \textcolor{keywordflow}{for} (q=\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}-\/1; q >= 0; -\/-\/q) \{}
\DoxyCodeLine{4467                   cur[q*4+3] = 255;}
\DoxyCodeLine{4468                   cur[q*4+2] = cur[q*3+2];}
\DoxyCodeLine{4469                   cur[q*4+1] = cur[q*3+1];}
\DoxyCodeLine{4470                   cur[q*4+0] = cur[q*3+0];}
\DoxyCodeLine{4471                \}}
\DoxyCodeLine{4472             \}}
\DoxyCodeLine{4473          \}}
\DoxyCodeLine{4474       \}}
\DoxyCodeLine{4475    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 16) \{}
\DoxyCodeLine{4476       \textcolor{comment}{// force the image data from big-\/endian to platform-\/native.}}
\DoxyCodeLine{4477       \textcolor{comment}{// this is done in a separate pass due to the decoding relying}}
\DoxyCodeLine{4478       \textcolor{comment}{// on the data being untouched, but could probably be done}}
\DoxyCodeLine{4479       \textcolor{comment}{// per-\/line during decode if care is taken.}}
\DoxyCodeLine{4480       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *cur = a-\/>out;}
\DoxyCodeLine{4481       stbi\_\_uint16 *cur16 = (stbi\_\_uint16*)cur;}
\DoxyCodeLine{4482 }
\DoxyCodeLine{4483       \textcolor{keywordflow}{for}(i=0; i < \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}*out\_n; ++i,cur16++,cur+=2) \{}
\DoxyCodeLine{4484          *cur16 = (cur[0] << 8) | cur[1];}
\DoxyCodeLine{4485       \}}
\DoxyCodeLine{4486    \}}
\DoxyCodeLine{4487 }
\DoxyCodeLine{4488    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4489 \}}
\DoxyCodeLine{4490 }
\DoxyCodeLine{4491 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_create\_png\_image(stbi\_\_png *a, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *image\_data, stbi\_\_uint32 image\_data\_len, \textcolor{keywordtype}{int} out\_n, \textcolor{keywordtype}{int} \mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}}, \textcolor{keywordtype}{int} color, \textcolor{keywordtype}{int} interlaced)}
\DoxyCodeLine{4492 \{}
\DoxyCodeLine{4493    \textcolor{keywordtype}{int} \mbox{\hyperlink{classbytes}{bytes}} = (\mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}} == 16 ? 2 : 1);}
\DoxyCodeLine{4494    \textcolor{keywordtype}{int} out\_bytes = out\_n * \mbox{\hyperlink{classbytes}{bytes}};}
\DoxyCodeLine{4495    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\textcolor{keyword}{final};}
\DoxyCodeLine{4496    \textcolor{keywordtype}{int} p;}
\DoxyCodeLine{4497    \textcolor{keywordflow}{if} (!interlaced)}
\DoxyCodeLine{4498       \textcolor{keywordflow}{return} stbi\_\_create\_png\_image\_raw(a, image\_data, image\_data\_len, out\_n, a-\/>s-\/>img\_x, a-\/>s-\/>img\_y, \mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}}, color);}
\DoxyCodeLine{4499 }
\DoxyCodeLine{4500    \textcolor{comment}{// de-\/interlacing}}
\DoxyCodeLine{4501    \textcolor{keyword}{final} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(a-\/>s-\/>img\_x, a-\/>s-\/>img\_y, out\_bytes, 0);}
\DoxyCodeLine{4502    \textcolor{keywordflow}{for} (p=0; p < 7; ++p) \{}
\DoxyCodeLine{4503       \textcolor{keywordtype}{int} xorig[] = \{ 0,4,0,2,0,1,0 \};}
\DoxyCodeLine{4504       \textcolor{keywordtype}{int} yorig[] = \{ 0,0,4,0,2,0,1 \};}
\DoxyCodeLine{4505       \textcolor{keywordtype}{int} xspc[]  = \{ 8,8,4,4,2,2,1 \};}
\DoxyCodeLine{4506       \textcolor{keywordtype}{int} yspc[]  = \{ 8,8,8,4,4,2,2 \};}
\DoxyCodeLine{4507       \textcolor{keywordtype}{int} i,j,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}};}
\DoxyCodeLine{4508       \textcolor{comment}{// pass1\_x[4] = 0, pass1\_x[5] = 1, pass1\_x[12] = 1}}
\DoxyCodeLine{4509       \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = (a-\/>s-\/>img\_x -\/ xorig[p] + xspc[p]-\/1) / xspc[p];}
\DoxyCodeLine{4510       \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = (a-\/>s-\/>img\_y -\/ yorig[p] + yspc[p]-\/1) / yspc[p];}
\DoxyCodeLine{4511       \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} \&\& \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) \{}
\DoxyCodeLine{4512          stbi\_\_uint32 img\_len = ((((a-\/>s-\/>img\_n * \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} * \mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}}) + 7) >> 3) + 1) * \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}};}
\DoxyCodeLine{4513          \textcolor{keywordflow}{if} (!stbi\_\_create\_png\_image\_raw(a, image\_data, image\_data\_len, out\_n, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \mbox{\hyperlink{gml2nestedsql_8cpp_af81a36ce49771f5a6ccdc7b43e648f7f}{depth}}, color)) \{}
\DoxyCodeLine{4514             STBI\_FREE(\textcolor{keyword}{final});}
\DoxyCodeLine{4515             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4516          \}}
\DoxyCodeLine{4517          \textcolor{keywordflow}{for} (j=0; j < \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}; ++j) \{}
\DoxyCodeLine{4518             \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}; ++i) \{}
\DoxyCodeLine{4519                \textcolor{keywordtype}{int} out\_y = j*yspc[p]+yorig[p];}
\DoxyCodeLine{4520                \textcolor{keywordtype}{int} out\_x = i*xspc[p]+xorig[p];}
\DoxyCodeLine{4521                memcpy(\textcolor{keyword}{final} + out\_y*a-\/>s-\/>img\_x*out\_bytes + out\_x*out\_bytes,}
\DoxyCodeLine{4522                       a-\/>out + (j*\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}+i)*out\_bytes, out\_bytes);}
\DoxyCodeLine{4523             \}}
\DoxyCodeLine{4524          \}}
\DoxyCodeLine{4525          STBI\_FREE(a-\/>out);}
\DoxyCodeLine{4526          image\_data += img\_len;}
\DoxyCodeLine{4527          image\_data\_len -\/= img\_len;}
\DoxyCodeLine{4528       \}}
\DoxyCodeLine{4529    \}}
\DoxyCodeLine{4530    a-\/>out = \textcolor{keyword}{final};}
\DoxyCodeLine{4531 }
\DoxyCodeLine{4532    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4533 \}}
\DoxyCodeLine{4534 }
\DoxyCodeLine{4535 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_compute\_transparency(stbi\_\_png *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} tc[3], \textcolor{keywordtype}{int} out\_n)}
\DoxyCodeLine{4536 \{}
\DoxyCodeLine{4537    stbi\_\_context *s = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s;}
\DoxyCodeLine{4538    stbi\_\_uint32 i, pixel\_count = s-\/>img\_x * s-\/>img\_y;}
\DoxyCodeLine{4539    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>out;}
\DoxyCodeLine{4540 }
\DoxyCodeLine{4541    \textcolor{comment}{// compute color-\/based transparency, assuming we've}}
\DoxyCodeLine{4542    \textcolor{comment}{// already got 255 as the alpha value in the output}}
\DoxyCodeLine{4543    STBI\_ASSERT(out\_n == 2 || out\_n == 4);}
\DoxyCodeLine{4544 }
\DoxyCodeLine{4545    \textcolor{keywordflow}{if} (out\_n == 2) \{}
\DoxyCodeLine{4546       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4547          p[1] = (p[0] == tc[0] ? 0 : 255);}
\DoxyCodeLine{4548          p += 2;}
\DoxyCodeLine{4549       \}}
\DoxyCodeLine{4550    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4551       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4552          \textcolor{keywordflow}{if} (p[0] == tc[0] \&\& p[1] == tc[1] \&\& p[2] == tc[2])}
\DoxyCodeLine{4553             p[3] = 0;}
\DoxyCodeLine{4554          p += 4;}
\DoxyCodeLine{4555       \}}
\DoxyCodeLine{4556    \}}
\DoxyCodeLine{4557    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4558 \}}
\DoxyCodeLine{4559 }
\DoxyCodeLine{4560 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_compute\_transparency16(stbi\_\_png *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, stbi\_\_uint16 tc[3], \textcolor{keywordtype}{int} out\_n)}
\DoxyCodeLine{4561 \{}
\DoxyCodeLine{4562    stbi\_\_context *s = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s;}
\DoxyCodeLine{4563    stbi\_\_uint32 i, pixel\_count = s-\/>img\_x * s-\/>img\_y;}
\DoxyCodeLine{4564    stbi\_\_uint16 *p = (stbi\_\_uint16*) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>out;}
\DoxyCodeLine{4565 }
\DoxyCodeLine{4566    \textcolor{comment}{// compute color-\/based transparency, assuming we've}}
\DoxyCodeLine{4567    \textcolor{comment}{// already got 65535 as the alpha value in the output}}
\DoxyCodeLine{4568    STBI\_ASSERT(out\_n == 2 || out\_n == 4);}
\DoxyCodeLine{4569 }
\DoxyCodeLine{4570    \textcolor{keywordflow}{if} (out\_n == 2) \{}
\DoxyCodeLine{4571       \textcolor{keywordflow}{for} (i = 0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4572          p[1] = (p[0] == tc[0] ? 0 : 65535);}
\DoxyCodeLine{4573          p += 2;}
\DoxyCodeLine{4574       \}}
\DoxyCodeLine{4575    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4576       \textcolor{keywordflow}{for} (i = 0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4577          \textcolor{keywordflow}{if} (p[0] == tc[0] \&\& p[1] == tc[1] \&\& p[2] == tc[2])}
\DoxyCodeLine{4578             p[3] = 0;}
\DoxyCodeLine{4579          p += 4;}
\DoxyCodeLine{4580       \}}
\DoxyCodeLine{4581    \}}
\DoxyCodeLine{4582    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4583 \}}
\DoxyCodeLine{4584 }
\DoxyCodeLine{4585 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_expand\_png\_palette(stbi\_\_png *a, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *palette, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} pal\_img\_n)}
\DoxyCodeLine{4586 \{}
\DoxyCodeLine{4587    stbi\_\_uint32 i, pixel\_count = a-\/>s-\/>img\_x * a-\/>s-\/>img\_y;}
\DoxyCodeLine{4588    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p, *temp\_out, *orig = a-\/>out;}
\DoxyCodeLine{4589 }
\DoxyCodeLine{4590    p = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad2(pixel\_count, pal\_img\_n, 0);}
\DoxyCodeLine{4591    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{4592 }
\DoxyCodeLine{4593    \textcolor{comment}{// between here and free(out) below, exitting would leak}}
\DoxyCodeLine{4594    temp\_out = p;}
\DoxyCodeLine{4595 }
\DoxyCodeLine{4596    \textcolor{keywordflow}{if} (pal\_img\_n == 3) \{}
\DoxyCodeLine{4597       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4598          \textcolor{keywordtype}{int} n = orig[i]*4;}
\DoxyCodeLine{4599          p[0] = palette[n  ];}
\DoxyCodeLine{4600          p[1] = palette[n+1];}
\DoxyCodeLine{4601          p[2] = palette[n+2];}
\DoxyCodeLine{4602          p += 3;}
\DoxyCodeLine{4603       \}}
\DoxyCodeLine{4604    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4605       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4606          \textcolor{keywordtype}{int} n = orig[i]*4;}
\DoxyCodeLine{4607          p[0] = palette[n  ];}
\DoxyCodeLine{4608          p[1] = palette[n+1];}
\DoxyCodeLine{4609          p[2] = palette[n+2];}
\DoxyCodeLine{4610          p[3] = palette[n+3];}
\DoxyCodeLine{4611          p += 4;}
\DoxyCodeLine{4612       \}}
\DoxyCodeLine{4613    \}}
\DoxyCodeLine{4614    STBI\_FREE(a-\/>out);}
\DoxyCodeLine{4615    a-\/>out = temp\_out;}
\DoxyCodeLine{4616 }
\DoxyCodeLine{4617    STBI\_NOTUSED(\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{4618 }
\DoxyCodeLine{4619    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4620 \}}
\DoxyCodeLine{4621 }
\DoxyCodeLine{4622 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_unpremultiply\_on\_load = 0;}
\DoxyCodeLine{4623 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_de\_iphone\_flag = 0;}
\DoxyCodeLine{4624 }
\DoxyCodeLine{4625 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_a3f02e0053e1c8d08a3ed436e6a82c7c9}{stbi\_set\_unpremultiply\_on\_load}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_unpremultiply)}
\DoxyCodeLine{4626 \{}
\DoxyCodeLine{4627    stbi\_\_unpremultiply\_on\_load = flag\_true\_if\_should\_unpremultiply;}
\DoxyCodeLine{4628 \}}
\DoxyCodeLine{4629 }
\DoxyCodeLine{4630 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_a23525ef2b882f3de426b47ecf8d9151b}{stbi\_convert\_iphone\_png\_to\_rgb}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_convert)}
\DoxyCodeLine{4631 \{}
\DoxyCodeLine{4632    stbi\_\_de\_iphone\_flag = flag\_true\_if\_should\_convert;}
\DoxyCodeLine{4633 \}}
\DoxyCodeLine{4634 }
\DoxyCodeLine{4635 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_de\_iphone(stbi\_\_png *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{4636 \{}
\DoxyCodeLine{4637    stbi\_\_context *s = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s;}
\DoxyCodeLine{4638    stbi\_\_uint32 i, pixel\_count = s-\/>img\_x * s-\/>img\_y;}
\DoxyCodeLine{4639    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>out;}
\DoxyCodeLine{4640 }
\DoxyCodeLine{4641    \textcolor{keywordflow}{if} (s-\/>img\_out\_n == 3) \{  \textcolor{comment}{// convert bgr to rgb}}
\DoxyCodeLine{4642       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4643          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} t = p[0];}
\DoxyCodeLine{4644          p[0] = p[2];}
\DoxyCodeLine{4645          p[2] = t;}
\DoxyCodeLine{4646          p += 3;}
\DoxyCodeLine{4647       \}}
\DoxyCodeLine{4648    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4649       STBI\_ASSERT(s-\/>img\_out\_n == 4);}
\DoxyCodeLine{4650       \textcolor{keywordflow}{if} (stbi\_\_unpremultiply\_on\_load) \{}
\DoxyCodeLine{4651          \textcolor{comment}{// convert bgr to rgb and unpremultiply}}
\DoxyCodeLine{4652          \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4653             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} a = p[3];}
\DoxyCodeLine{4654             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} t = p[0];}
\DoxyCodeLine{4655             \textcolor{keywordflow}{if} (a) \{}
\DoxyCodeLine{4656                \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} half = a / 2;}
\DoxyCodeLine{4657                p[0] = (p[2] * 255 + half) / a;}
\DoxyCodeLine{4658                p[1] = (p[1] * 255 + half) / a;}
\DoxyCodeLine{4659                p[2] = ( t   * 255 + half) / a;}
\DoxyCodeLine{4660             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4661                p[0] = p[2];}
\DoxyCodeLine{4662                p[2] = t;}
\DoxyCodeLine{4663             \}}
\DoxyCodeLine{4664             p += 4;}
\DoxyCodeLine{4665          \}}
\DoxyCodeLine{4666       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4667          \textcolor{comment}{// convert bgr to rgb}}
\DoxyCodeLine{4668          \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4669             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} t = p[0];}
\DoxyCodeLine{4670             p[0] = p[2];}
\DoxyCodeLine{4671             p[2] = t;}
\DoxyCodeLine{4672             p += 4;}
\DoxyCodeLine{4673          \}}
\DoxyCodeLine{4674       \}}
\DoxyCodeLine{4675    \}}
\DoxyCodeLine{4676 \}}
\DoxyCodeLine{4677 }
\DoxyCodeLine{4678 \textcolor{preprocessor}{\#define STBI\_\_PNG\_TYPE(a,b,c,d)  (((a) << 24) + ((b) << 16) + ((c) << 8) + (d))}}
\DoxyCodeLine{4679 }
\DoxyCodeLine{4680 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_png\_file(stbi\_\_png *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{int} scan, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{4681 \{}
\DoxyCodeLine{4682    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} palette[1024], pal\_img\_n=0;}
\DoxyCodeLine{4683    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} has\_trans=0, tc[3];}
\DoxyCodeLine{4684    stbi\_\_uint16 tc16[3];}
\DoxyCodeLine{4685    stbi\_\_uint32 ioff=0, idata\_limit=0, i, pal\_len=0;}
\DoxyCodeLine{4686    \textcolor{keywordtype}{int} \mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}}=1,k,interlace=0, color=0, is\_iphone=0;}
\DoxyCodeLine{4687    stbi\_\_context *s = \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>s;}
\DoxyCodeLine{4688 }
\DoxyCodeLine{4689    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>expanded = NULL;}
\DoxyCodeLine{4690    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata = NULL;}
\DoxyCodeLine{4691    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>out = NULL;}
\DoxyCodeLine{4692 }
\DoxyCodeLine{4693    \textcolor{keywordflow}{if} (!stbi\_\_check\_png\_header(s)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4694 }
\DoxyCodeLine{4695    \textcolor{keywordflow}{if} (scan == STBI\_\_SCAN\_type) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4696 }
\DoxyCodeLine{4697    \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{4698       stbi\_\_pngchunk c = stbi\_\_get\_chunk\_header(s);}
\DoxyCodeLine{4699       \textcolor{keywordflow}{switch} (c.type) \{}
\DoxyCodeLine{4700          \textcolor{keywordflow}{case} STBI\_\_PNG\_TYPE(\textcolor{charliteral}{'C'},\textcolor{charliteral}{'g'},\textcolor{charliteral}{'B'},\textcolor{charliteral}{'I'}):}
\DoxyCodeLine{4701             is\_iphone = 1;}
\DoxyCodeLine{4702             stbi\_\_skip(s, c.length);}
\DoxyCodeLine{4703             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4704          \textcolor{keywordflow}{case} STBI\_\_PNG\_TYPE(\textcolor{charliteral}{'I'},\textcolor{charliteral}{'H'},\textcolor{charliteral}{'D'},\textcolor{charliteral}{'R'}): \{}
\DoxyCodeLine{4705             \textcolor{keywordtype}{int} comp,filter;}
\DoxyCodeLine{4706             \textcolor{keywordflow}{if} (!\mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}}) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}multiple IHDR"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4707             \mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}} = 0;}
\DoxyCodeLine{4708             \textcolor{keywordflow}{if} (c.length != 13) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad IHDR len"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4709             s-\/>img\_x = stbi\_\_get32be(s); \textcolor{keywordflow}{if} (s-\/>img\_x > (1 << 24)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}too large"{}},\textcolor{stringliteral}{"{}Very large image (corrupt?)"{}});}
\DoxyCodeLine{4710             s-\/>img\_y = stbi\_\_get32be(s); \textcolor{keywordflow}{if} (s-\/>img\_y > (1 << 24)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}too large"{}},\textcolor{stringliteral}{"{}Very large image (corrupt?)"{}});}
\DoxyCodeLine{4711             \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth = stbi\_\_get8(s);  \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth != 1 \&\& \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth != 2 \&\& \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth != 4 \&\& \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth != 8 \&\& \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth != 16)  \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}1/2/4/8/16-\/bit only"{}},\textcolor{stringliteral}{"{}PNG not supported: 1/2/4/8/16-\/bit only"{}});}
\DoxyCodeLine{4712             color = stbi\_\_get8(s);  \textcolor{keywordflow}{if} (color > 6)         \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad ctype"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4713             \textcolor{keywordflow}{if} (color == 3 \&\& \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth == 16)                  \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad ctype"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4714             \textcolor{keywordflow}{if} (color == 3) pal\_img\_n = 3; \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (color \& 1) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad ctype"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4715             comp  = stbi\_\_get8(s);  \textcolor{keywordflow}{if} (comp) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad comp method"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4716             filter= stbi\_\_get8(s);  \textcolor{keywordflow}{if} (filter) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad filter method"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4717             interlace = stbi\_\_get8(s); \textcolor{keywordflow}{if} (interlace>1) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad interlace method"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4718             \textcolor{keywordflow}{if} (!s-\/>img\_x || !s-\/>img\_y) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}0-\/pixel image"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4719             \textcolor{keywordflow}{if} (!pal\_img\_n) \{}
\DoxyCodeLine{4720                s-\/>img\_n = (color \& 2 ? 3 : 1) + (color \& 4 ? 1 : 0);}
\DoxyCodeLine{4721                \textcolor{keywordflow}{if} ((1 << 30) / s-\/>img\_x / s-\/>img\_n < s-\/>img\_y) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}Image too large to decode"{}});}
\DoxyCodeLine{4722                \textcolor{keywordflow}{if} (scan == STBI\_\_SCAN\_header) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4723             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4724                \textcolor{comment}{// if paletted, then pal\_n is our final components, and}}
\DoxyCodeLine{4725                \textcolor{comment}{// img\_n is \# components to decompress/filter.}}
\DoxyCodeLine{4726                s-\/>img\_n = 1;}
\DoxyCodeLine{4727                \textcolor{keywordflow}{if} ((1 << 30) / s-\/>img\_x / 4 < s-\/>img\_y) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}too large"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4728                \textcolor{comment}{// if SCAN\_header, have to scan to see if we have a tRNS}}
\DoxyCodeLine{4729             \}}
\DoxyCodeLine{4730             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4731          \}}
\DoxyCodeLine{4732 }
\DoxyCodeLine{4733          \textcolor{keywordflow}{case} STBI\_\_PNG\_TYPE(\textcolor{charliteral}{'P'},\textcolor{charliteral}{'L'},\textcolor{charliteral}{'T'},\textcolor{charliteral}{'E'}):  \{}
\DoxyCodeLine{4734             \textcolor{keywordflow}{if} (\mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}}) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4735             \textcolor{keywordflow}{if} (c.length > 256*3) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}invalid PLTE"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4736             pal\_len = c.length / 3;}
\DoxyCodeLine{4737             \textcolor{keywordflow}{if} (pal\_len * 3 != c.length) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}invalid PLTE"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4738             \textcolor{keywordflow}{for} (i=0; i < pal\_len; ++i) \{}
\DoxyCodeLine{4739                palette[i*4+0] = stbi\_\_get8(s);}
\DoxyCodeLine{4740                palette[i*4+1] = stbi\_\_get8(s);}
\DoxyCodeLine{4741                palette[i*4+2] = stbi\_\_get8(s);}
\DoxyCodeLine{4742                palette[i*4+3] = 255;}
\DoxyCodeLine{4743             \}}
\DoxyCodeLine{4744             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4745          \}}
\DoxyCodeLine{4746 }
\DoxyCodeLine{4747          \textcolor{keywordflow}{case} STBI\_\_PNG\_TYPE(\textcolor{charliteral}{'t'},\textcolor{charliteral}{'R'},\textcolor{charliteral}{'N'},\textcolor{charliteral}{'S'}): \{}
\DoxyCodeLine{4748             \textcolor{keywordflow}{if} (\mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}}) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4749             \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}tRNS after IDAT"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4750             \textcolor{keywordflow}{if} (pal\_img\_n) \{}
\DoxyCodeLine{4751                \textcolor{keywordflow}{if} (scan == STBI\_\_SCAN\_header) \{ s-\/>img\_n = 4; \textcolor{keywordflow}{return} 1; \}}
\DoxyCodeLine{4752                \textcolor{keywordflow}{if} (pal\_len == 0) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}tRNS before PLTE"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4753                \textcolor{keywordflow}{if} (c.length > pal\_len) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad tRNS len"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4754                pal\_img\_n = 4;}
\DoxyCodeLine{4755                \textcolor{keywordflow}{for} (i=0; i < c.length; ++i)}
\DoxyCodeLine{4756                   palette[i*4+3] = stbi\_\_get8(s);}
\DoxyCodeLine{4757             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4758                \textcolor{keywordflow}{if} (!(s-\/>img\_n \& 1)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}tRNS with alpha"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4759                \textcolor{keywordflow}{if} (c.length != (stbi\_\_uint32) s-\/>img\_n*2) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}bad tRNS len"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4760                has\_trans = 1;}
\DoxyCodeLine{4761                \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth == 16) \{}
\DoxyCodeLine{4762                   \textcolor{keywordflow}{for} (k = 0; k < s-\/>img\_n; ++k) tc16[k] = (stbi\_\_uint16)stbi\_\_get16be(s); \textcolor{comment}{// copy the values as-\/is}}
\DoxyCodeLine{4763                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4764                   \textcolor{keywordflow}{for} (k = 0; k < s-\/>img\_n; ++k) tc[k] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})(stbi\_\_get16be(s) \& 255) * stbi\_\_depth\_scale\_table[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth]; \textcolor{comment}{// non 8-\/bit images will be larger}}
\DoxyCodeLine{4765                \}}
\DoxyCodeLine{4766             \}}
\DoxyCodeLine{4767             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4768          \}}
\DoxyCodeLine{4769 }
\DoxyCodeLine{4770          \textcolor{keywordflow}{case} STBI\_\_PNG\_TYPE(\textcolor{charliteral}{'I'},\textcolor{charliteral}{'D'},\textcolor{charliteral}{'A'},\textcolor{charliteral}{'T'}): \{}
\DoxyCodeLine{4771             \textcolor{keywordflow}{if} (\mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}}) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4772             \textcolor{keywordflow}{if} (pal\_img\_n \&\& !pal\_len) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}no PLTE"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4773             \textcolor{keywordflow}{if} (scan == STBI\_\_SCAN\_header) \{ s-\/>img\_n = pal\_img\_n; \textcolor{keywordflow}{return} 1; \}}
\DoxyCodeLine{4774             \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int})(ioff + c.length) < (\textcolor{keywordtype}{int})ioff) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4775             \textcolor{keywordflow}{if} (ioff + c.length > idata\_limit) \{}
\DoxyCodeLine{4776                stbi\_\_uint32 idata\_limit\_old = idata\_limit;}
\DoxyCodeLine{4777                \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p;}
\DoxyCodeLine{4778                \textcolor{keywordflow}{if} (idata\_limit == 0) idata\_limit = c.length > 4096 ? c.length : 4096;}
\DoxyCodeLine{4779                \textcolor{keywordflow}{while} (ioff + c.length > idata\_limit)}
\DoxyCodeLine{4780                   idata\_limit *= 2;}
\DoxyCodeLine{4781                STBI\_NOTUSED(idata\_limit\_old);}
\DoxyCodeLine{4782                p = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) STBI\_REALLOC\_SIZED(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata, idata\_limit\_old, idata\_limit); \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{4783                \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata = p;}
\DoxyCodeLine{4784             \}}
\DoxyCodeLine{4785             \textcolor{keywordflow}{if} (!stbi\_\_getn(s, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata+ioff,c.length)) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}outofdata"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4786             ioff += c.length;}
\DoxyCodeLine{4787             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4788          \}}
\DoxyCodeLine{4789 }
\DoxyCodeLine{4790          \textcolor{keywordflow}{case} STBI\_\_PNG\_TYPE(\textcolor{charliteral}{'I'},\textcolor{charliteral}{'E'},\textcolor{charliteral}{'N'},\textcolor{charliteral}{'D'}): \{}
\DoxyCodeLine{4791             stbi\_\_uint32 raw\_len, bpl;}
\DoxyCodeLine{4792             \textcolor{keywordflow}{if} (\mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}}) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4793             \textcolor{keywordflow}{if} (scan != STBI\_\_SCAN\_load) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4794             \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata == NULL) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}no IDAT"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4795             \textcolor{comment}{// initial guess for decoded data size to avoid unnecessary reallocs}}
\DoxyCodeLine{4796             bpl = (s-\/>img\_x * \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth + 7) / 8; \textcolor{comment}{// bytes per line, per component}}
\DoxyCodeLine{4797             raw\_len = bpl * s-\/>img\_y * s-\/>img\_n \textcolor{comment}{/* pixels */} + s-\/>img\_y \textcolor{comment}{/* filter mode per row */};}
\DoxyCodeLine{4798             \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>expanded = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{stb__image_8h_adc3de199aa29f7370a699ad545155541}{stbi\_zlib\_decode\_malloc\_guesssize\_headerflag}}((\textcolor{keywordtype}{char} *) \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata, ioff, raw\_len, (\textcolor{keywordtype}{int} *) \&raw\_len, !is\_iphone);}
\DoxyCodeLine{4799             \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>expanded == NULL) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// zlib should set error}}
\DoxyCodeLine{4800             STBI\_FREE(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata); \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>idata = NULL;}
\DoxyCodeLine{4801             \textcolor{keywordflow}{if} ((req\_comp == s-\/>img\_n+1 \&\& req\_comp != 3 \&\& !pal\_img\_n) || has\_trans)}
\DoxyCodeLine{4802                s-\/>img\_out\_n = s-\/>img\_n+1;}
\DoxyCodeLine{4803             \textcolor{keywordflow}{else}}
\DoxyCodeLine{4804                s-\/>img\_out\_n = s-\/>img\_n;}
\DoxyCodeLine{4805             \textcolor{keywordflow}{if} (!stbi\_\_create\_png\_image(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>expanded, raw\_len, s-\/>img\_out\_n, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth, color, interlace)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4806             \textcolor{keywordflow}{if} (has\_trans) \{}
\DoxyCodeLine{4807                \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>depth == 16) \{}
\DoxyCodeLine{4808                   \textcolor{keywordflow}{if} (!stbi\_\_compute\_transparency16(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, tc16, s-\/>img\_out\_n)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4809                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4810                   \textcolor{keywordflow}{if} (!stbi\_\_compute\_transparency(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, tc, s-\/>img\_out\_n)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4811                \}}
\DoxyCodeLine{4812             \}}
\DoxyCodeLine{4813             \textcolor{keywordflow}{if} (is\_iphone \&\& stbi\_\_de\_iphone\_flag \&\& s-\/>img\_out\_n > 2)}
\DoxyCodeLine{4814                stbi\_\_de\_iphone(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{4815             \textcolor{keywordflow}{if} (pal\_img\_n) \{}
\DoxyCodeLine{4816                \textcolor{comment}{// pal\_img\_n == 3 or 4}}
\DoxyCodeLine{4817                s-\/>img\_n = pal\_img\_n; \textcolor{comment}{// record the actual colors we had}}
\DoxyCodeLine{4818                s-\/>img\_out\_n = pal\_img\_n;}
\DoxyCodeLine{4819                \textcolor{keywordflow}{if} (req\_comp >= 3) s-\/>img\_out\_n = req\_comp;}
\DoxyCodeLine{4820                \textcolor{keywordflow}{if} (!stbi\_\_expand\_png\_palette(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, palette, pal\_len, s-\/>img\_out\_n))}
\DoxyCodeLine{4821                   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4822             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (has\_trans) \{}
\DoxyCodeLine{4823                \textcolor{comment}{// non-\/paletted image with tRNS -\/> source image has (constant) alpha}}
\DoxyCodeLine{4824                ++s-\/>img\_n;}
\DoxyCodeLine{4825             \}}
\DoxyCodeLine{4826             STBI\_FREE(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>expanded); \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}-\/>expanded = NULL;}
\DoxyCodeLine{4827             \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4828          \}}
\DoxyCodeLine{4829 }
\DoxyCodeLine{4830          \textcolor{keywordflow}{default}:}
\DoxyCodeLine{4831             \textcolor{comment}{// if critical, fail}}
\DoxyCodeLine{4832             \textcolor{keywordflow}{if} (\mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}}) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4833             \textcolor{keywordflow}{if} ((c.type \& (1 << 29)) == 0) \{}
\DoxyCodeLine{4834 \textcolor{preprocessor}{               \#ifndef STBI\_NO\_FAILURE\_STRINGS}}
\DoxyCodeLine{4835                \textcolor{comment}{// not threadsafe}}
\DoxyCodeLine{4836                \textcolor{keyword}{static} \textcolor{keywordtype}{char} invalid\_chunk[] = \textcolor{stringliteral}{"{}XXXX PNG chunk not known"{}};}
\DoxyCodeLine{4837                invalid\_chunk[0] = STBI\_\_BYTECAST(c.type >> 24);}
\DoxyCodeLine{4838                invalid\_chunk[1] = STBI\_\_BYTECAST(c.type >> 16);}
\DoxyCodeLine{4839                invalid\_chunk[2] = STBI\_\_BYTECAST(c.type >>  8);}
\DoxyCodeLine{4840                invalid\_chunk[3] = STBI\_\_BYTECAST(c.type >>  0);}
\DoxyCodeLine{4841 \textcolor{preprocessor}{               \#endif}}
\DoxyCodeLine{4842                \textcolor{keywordflow}{return} stbi\_\_err(invalid\_chunk, \textcolor{stringliteral}{"{}PNG not supported: unknown PNG chunk type"{}});}
\DoxyCodeLine{4843             \}}
\DoxyCodeLine{4844             stbi\_\_skip(s, c.length);}
\DoxyCodeLine{4845             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4846       \}}
\DoxyCodeLine{4847       \textcolor{comment}{// end of PNG chunk, read and skip CRC}}
\DoxyCodeLine{4848       stbi\_\_get32be(s);}
\DoxyCodeLine{4849    \}}
\DoxyCodeLine{4850 \}}
\DoxyCodeLine{4851 }
\DoxyCodeLine{4852 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_do\_png(stbi\_\_png *p, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *n, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{4853 \{}
\DoxyCodeLine{4854    \textcolor{keywordtype}{void} *result=NULL;}
\DoxyCodeLine{4855    \textcolor{keywordflow}{if} (req\_comp < 0 || req\_comp > 4) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad req\_comp"{}}, \textcolor{stringliteral}{"{}Internal error"{}});}
\DoxyCodeLine{4856    \textcolor{keywordflow}{if} (stbi\_\_parse\_png\_file(p, STBI\_\_SCAN\_load, req\_comp)) \{}
\DoxyCodeLine{4857       \textcolor{keywordflow}{if} (p-\/>depth < 8)}
\DoxyCodeLine{4858          ri-\/>bits\_per\_channel = 8;}
\DoxyCodeLine{4859       \textcolor{keywordflow}{else}}
\DoxyCodeLine{4860          ri-\/>bits\_per\_channel = p-\/>depth;}
\DoxyCodeLine{4861       result = p-\/>out;}
\DoxyCodeLine{4862       p-\/>out = NULL;}
\DoxyCodeLine{4863       \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != p-\/>s-\/>img\_out\_n) \{}
\DoxyCodeLine{4864          \textcolor{keywordflow}{if} (ri-\/>bits\_per\_channel == 8)}
\DoxyCodeLine{4865             result = stbi\_\_convert\_format((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) result, p-\/>s-\/>img\_out\_n, req\_comp, p-\/>s-\/>img\_x, p-\/>s-\/>img\_y);}
\DoxyCodeLine{4866          \textcolor{keywordflow}{else}}
\DoxyCodeLine{4867             result = stbi\_\_convert\_format16((stbi\_\_uint16 *) result, p-\/>s-\/>img\_out\_n, req\_comp, p-\/>s-\/>img\_x, p-\/>s-\/>img\_y);}
\DoxyCodeLine{4868          p-\/>s-\/>img\_out\_n = req\_comp;}
\DoxyCodeLine{4869          \textcolor{keywordflow}{if} (result == NULL) \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{4870       \}}
\DoxyCodeLine{4871       *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = p-\/>s-\/>img\_x;}
\DoxyCodeLine{4872       *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = p-\/>s-\/>img\_y;}
\DoxyCodeLine{4873       \textcolor{keywordflow}{if} (n) *n = p-\/>s-\/>img\_n;}
\DoxyCodeLine{4874    \}}
\DoxyCodeLine{4875    STBI\_FREE(p-\/>out);      p-\/>out      = NULL;}
\DoxyCodeLine{4876    STBI\_FREE(p-\/>expanded); p-\/>expanded = NULL;}
\DoxyCodeLine{4877    STBI\_FREE(p-\/>idata);    p-\/>idata    = NULL;}
\DoxyCodeLine{4878 }
\DoxyCodeLine{4879    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{4880 \}}
\DoxyCodeLine{4881 }
\DoxyCodeLine{4882 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_png\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{4883 \{}
\DoxyCodeLine{4884    stbi\_\_png p;}
\DoxyCodeLine{4885    p.s = s;}
\DoxyCodeLine{4886    \textcolor{keywordflow}{return} stbi\_\_do\_png(\&p, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp,req\_comp, ri);}
\DoxyCodeLine{4887 \}}
\DoxyCodeLine{4888 }
\DoxyCodeLine{4889 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_png\_test(stbi\_\_context *s)}
\DoxyCodeLine{4890 \{}
\DoxyCodeLine{4891    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{4892    \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_check\_png\_header(s);}
\DoxyCodeLine{4893    stbi\_\_rewind(s);}
\DoxyCodeLine{4894    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{4895 \}}
\DoxyCodeLine{4896 }
\DoxyCodeLine{4897 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_png\_info\_raw(stbi\_\_png *p, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{4898 \{}
\DoxyCodeLine{4899    \textcolor{keywordflow}{if} (!stbi\_\_parse\_png\_file(p, STBI\_\_SCAN\_header, 0)) \{}
\DoxyCodeLine{4900       stbi\_\_rewind( p-\/>s );}
\DoxyCodeLine{4901       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4902    \}}
\DoxyCodeLine{4903    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = p-\/>s-\/>img\_x;}
\DoxyCodeLine{4904    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = p-\/>s-\/>img\_y;}
\DoxyCodeLine{4905    \textcolor{keywordflow}{if} (comp) *comp = p-\/>s-\/>img\_n;}
\DoxyCodeLine{4906    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4907 \}}
\DoxyCodeLine{4908 }
\DoxyCodeLine{4909 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_png\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{4910 \{}
\DoxyCodeLine{4911    stbi\_\_png p;}
\DoxyCodeLine{4912    p.s = s;}
\DoxyCodeLine{4913    \textcolor{keywordflow}{return} stbi\_\_png\_info\_raw(\&p, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp);}
\DoxyCodeLine{4914 \}}
\DoxyCodeLine{4915 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{4916 }
\DoxyCodeLine{4917 \textcolor{comment}{// Microsoft/Windows BMP image}}
\DoxyCodeLine{4918 }
\DoxyCodeLine{4919 \textcolor{preprocessor}{\#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{4920 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bmp\_test\_raw(stbi\_\_context *s)}
\DoxyCodeLine{4921 \{}
\DoxyCodeLine{4922    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{4923    \textcolor{keywordtype}{int} sz;}
\DoxyCodeLine{4924    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'B'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4925    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'M'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4926    stbi\_\_get32le(s); \textcolor{comment}{// discard filesize}}
\DoxyCodeLine{4927    stbi\_\_get16le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4928    stbi\_\_get16le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4929    stbi\_\_get32le(s); \textcolor{comment}{// discard data offset}}
\DoxyCodeLine{4930    sz = stbi\_\_get32le(s);}
\DoxyCodeLine{4931    \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = (sz == 12 || sz == 40 || sz == 56 || sz == 108 || sz == 124);}
\DoxyCodeLine{4932    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{4933 \}}
\DoxyCodeLine{4934 }
\DoxyCodeLine{4935 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bmp\_test(stbi\_\_context *s)}
\DoxyCodeLine{4936 \{}
\DoxyCodeLine{4937    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_bmp\_test\_raw(s);}
\DoxyCodeLine{4938    stbi\_\_rewind(s);}
\DoxyCodeLine{4939    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{4940 \}}
\DoxyCodeLine{4941 }
\DoxyCodeLine{4942 }
\DoxyCodeLine{4943 \textcolor{comment}{// returns 0..31 for the highest set bit}}
\DoxyCodeLine{4944 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_high\_bit(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{4945 \{}
\DoxyCodeLine{4946    \textcolor{keywordtype}{int} n=0;}
\DoxyCodeLine{4947    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} == 0) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4948    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >= 0x10000) n += 16, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >>= 16;}
\DoxyCodeLine{4949    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >= 0x00100) n +=  8, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >>=  8;}
\DoxyCodeLine{4950    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >= 0x00010) n +=  4, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >>=  4;}
\DoxyCodeLine{4951    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >= 0x00004) n +=  2, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >>=  2;}
\DoxyCodeLine{4952    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >= 0x00002) n +=  1, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} >>=  1;}
\DoxyCodeLine{4953    \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{4954 \}}
\DoxyCodeLine{4955 }
\DoxyCodeLine{4956 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bitcount(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} a)}
\DoxyCodeLine{4957 \{}
\DoxyCodeLine{4958    a = (a \& 0x55555555) + ((a >>  1) \& 0x55555555); \textcolor{comment}{// max 2}}
\DoxyCodeLine{4959    a = (a \& 0x33333333) + ((a >>  2) \& 0x33333333); \textcolor{comment}{// max 4}}
\DoxyCodeLine{4960    a = (a + (a >> 4)) \& 0x0f0f0f0f; \textcolor{comment}{// max 8 per 4, now 8 bits}}
\DoxyCodeLine{4961    a = (a + (a >> 8)); \textcolor{comment}{// max 16 per 8 bits}}
\DoxyCodeLine{4962    a = (a + (a >> 16)); \textcolor{comment}{// max 32 per 8 bits}}
\DoxyCodeLine{4963    \textcolor{keywordflow}{return} a \& 0xff;}
\DoxyCodeLine{4964 \}}
\DoxyCodeLine{4965 }
\DoxyCodeLine{4966 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_shiftsigned(\textcolor{keywordtype}{int} v, \textcolor{keywordtype}{int} shift, \textcolor{keywordtype}{int} bits)}
\DoxyCodeLine{4967 \{}
\DoxyCodeLine{4968    \textcolor{keywordtype}{int} result;}
\DoxyCodeLine{4969    \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}=0;}
\DoxyCodeLine{4970 }
\DoxyCodeLine{4971    \textcolor{keywordflow}{if} (shift < 0) v <<= -\/shift;}
\DoxyCodeLine{4972    \textcolor{keywordflow}{else} v >>= shift;}
\DoxyCodeLine{4973    result = v;}
\DoxyCodeLine{4974 }
\DoxyCodeLine{4975    \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = bits;}
\DoxyCodeLine{4976    \textcolor{keywordflow}{while} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} < 8) \{}
\DoxyCodeLine{4977       result += v >> \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}};}
\DoxyCodeLine{4978       \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} += bits;}
\DoxyCodeLine{4979    \}}
\DoxyCodeLine{4980    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{4981 \}}
\DoxyCodeLine{4982 }
\DoxyCodeLine{4983 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{4984 \{}
\DoxyCodeLine{4985    \textcolor{keywordtype}{int} bpp, offset, hsz;}
\DoxyCodeLine{4986    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} mr,mg,mb,ma, all\_a;}
\DoxyCodeLine{4987 \} stbi\_\_bmp\_data;}
\DoxyCodeLine{4988 }
\DoxyCodeLine{4989 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_bmp\_parse\_header(stbi\_\_context *s, stbi\_\_bmp\_data *\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}})}
\DoxyCodeLine{4990 \{}
\DoxyCodeLine{4991    \textcolor{keywordtype}{int} hsz;}
\DoxyCodeLine{4992    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'B'} || stbi\_\_get8(s) != \textcolor{charliteral}{'M'}) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}not BMP"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}});}
\DoxyCodeLine{4993    stbi\_\_get32le(s); \textcolor{comment}{// discard filesize}}
\DoxyCodeLine{4994    stbi\_\_get16le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4995    stbi\_\_get16le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4996    \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>offset = stbi\_\_get32le(s);}
\DoxyCodeLine{4997    \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>hsz = hsz = stbi\_\_get32le(s);}
\DoxyCodeLine{4998    \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mr = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mg = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mb = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>ma = 0;}
\DoxyCodeLine{4999 }
\DoxyCodeLine{5000    \textcolor{keywordflow}{if} (hsz != 12 \&\& hsz != 40 \&\& hsz != 56 \&\& hsz != 108 \&\& hsz != 124) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}unknown BMP"{}}, \textcolor{stringliteral}{"{}BMP type not supported: unknown"{}});}
\DoxyCodeLine{5001    \textcolor{keywordflow}{if} (hsz == 12) \{}
\DoxyCodeLine{5002       s-\/>img\_x = stbi\_\_get16le(s);}
\DoxyCodeLine{5003       s-\/>img\_y = stbi\_\_get16le(s);}
\DoxyCodeLine{5004    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5005       s-\/>img\_x = stbi\_\_get32le(s);}
\DoxyCodeLine{5006       s-\/>img\_y = stbi\_\_get32le(s);}
\DoxyCodeLine{5007    \}}
\DoxyCodeLine{5008    \textcolor{keywordflow}{if} (stbi\_\_get16le(s) != 1) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad BMP"{}}, \textcolor{stringliteral}{"{}bad BMP"{}});}
\DoxyCodeLine{5009    \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>bpp = stbi\_\_get16le(s);}
\DoxyCodeLine{5010    \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>bpp == 1) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}monochrome"{}}, \textcolor{stringliteral}{"{}BMP type not supported: 1-\/bit"{}});}
\DoxyCodeLine{5011    \textcolor{keywordflow}{if} (hsz != 12) \{}
\DoxyCodeLine{5012       \textcolor{keywordtype}{int} compress = stbi\_\_get32le(s);}
\DoxyCodeLine{5013       \textcolor{keywordflow}{if} (compress == 1 || compress == 2) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}BMP RLE"{}}, \textcolor{stringliteral}{"{}BMP type not supported: RLE"{}});}
\DoxyCodeLine{5014       stbi\_\_get32le(s); \textcolor{comment}{// discard sizeof}}
\DoxyCodeLine{5015       stbi\_\_get32le(s); \textcolor{comment}{// discard hres}}
\DoxyCodeLine{5016       stbi\_\_get32le(s); \textcolor{comment}{// discard vres}}
\DoxyCodeLine{5017       stbi\_\_get32le(s); \textcolor{comment}{// discard colorsused}}
\DoxyCodeLine{5018       stbi\_\_get32le(s); \textcolor{comment}{// discard max important}}
\DoxyCodeLine{5019       \textcolor{keywordflow}{if} (hsz == 40 || hsz == 56) \{}
\DoxyCodeLine{5020          \textcolor{keywordflow}{if} (hsz == 56) \{}
\DoxyCodeLine{5021             stbi\_\_get32le(s);}
\DoxyCodeLine{5022             stbi\_\_get32le(s);}
\DoxyCodeLine{5023             stbi\_\_get32le(s);}
\DoxyCodeLine{5024             stbi\_\_get32le(s);}
\DoxyCodeLine{5025          \}}
\DoxyCodeLine{5026          \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>bpp == 16 || \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>bpp == 32) \{}
\DoxyCodeLine{5027             \textcolor{keywordflow}{if} (compress == 0) \{}
\DoxyCodeLine{5028                \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>bpp == 32) \{}
\DoxyCodeLine{5029                   \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mr = 0xffu << 16;}
\DoxyCodeLine{5030                   \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mg = 0xffu <<  8;}
\DoxyCodeLine{5031                   \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mb = 0xffu <<  0;}
\DoxyCodeLine{5032                   \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>ma = 0xffu << 24;}
\DoxyCodeLine{5033                   \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>all\_a = 0; \textcolor{comment}{// if all\_a is 0 at end, then we loaded alpha channel but it was all 0}}
\DoxyCodeLine{5034                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5035                   \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mr = 31u << 10;}
\DoxyCodeLine{5036                   \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mg = 31u <<  5;}
\DoxyCodeLine{5037                   \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mb = 31u <<  0;}
\DoxyCodeLine{5038                \}}
\DoxyCodeLine{5039             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (compress == 3) \{}
\DoxyCodeLine{5040                \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mr = stbi\_\_get32le(s);}
\DoxyCodeLine{5041                \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mg = stbi\_\_get32le(s);}
\DoxyCodeLine{5042                \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mb = stbi\_\_get32le(s);}
\DoxyCodeLine{5043                \textcolor{comment}{// not documented, but generated by photoshop and handled by mspaint}}
\DoxyCodeLine{5044                \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mr == \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mg \&\& \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mg == \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mb) \{}
\DoxyCodeLine{5045                   \textcolor{comment}{// ?!?!?}}
\DoxyCodeLine{5046                   \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad BMP"{}}, \textcolor{stringliteral}{"{}bad BMP"{}});}
\DoxyCodeLine{5047                \}}
\DoxyCodeLine{5048             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{5049                \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad BMP"{}}, \textcolor{stringliteral}{"{}bad BMP"{}});}
\DoxyCodeLine{5050          \}}
\DoxyCodeLine{5051       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5052          \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{5053          \textcolor{keywordflow}{if} (hsz != 108 \&\& hsz != 124)}
\DoxyCodeLine{5054             \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad BMP"{}}, \textcolor{stringliteral}{"{}bad BMP"{}});}
\DoxyCodeLine{5055          \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mr = stbi\_\_get32le(s);}
\DoxyCodeLine{5056          \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mg = stbi\_\_get32le(s);}
\DoxyCodeLine{5057          \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>mb = stbi\_\_get32le(s);}
\DoxyCodeLine{5058          \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}-\/>ma = stbi\_\_get32le(s);}
\DoxyCodeLine{5059          stbi\_\_get32le(s); \textcolor{comment}{// discard color space}}
\DoxyCodeLine{5060          \textcolor{keywordflow}{for} (i=0; i < 12; ++i)}
\DoxyCodeLine{5061             stbi\_\_get32le(s); \textcolor{comment}{// discard color space parameters}}
\DoxyCodeLine{5062          \textcolor{keywordflow}{if} (hsz == 124) \{}
\DoxyCodeLine{5063             stbi\_\_get32le(s); \textcolor{comment}{// discard rendering intent}}
\DoxyCodeLine{5064             stbi\_\_get32le(s); \textcolor{comment}{// discard offset of profile data}}
\DoxyCodeLine{5065             stbi\_\_get32le(s); \textcolor{comment}{// discard size of profile data}}
\DoxyCodeLine{5066             stbi\_\_get32le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{5067          \}}
\DoxyCodeLine{5068       \}}
\DoxyCodeLine{5069    \}}
\DoxyCodeLine{5070    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void} *) 1;}
\DoxyCodeLine{5071 \}}
\DoxyCodeLine{5072 }
\DoxyCodeLine{5073 }
\DoxyCodeLine{5074 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_bmp\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{5075 \{}
\DoxyCodeLine{5076    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out;}
\DoxyCodeLine{5077    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} mr=0,mg=0,mb=0,ma=0, all\_a;}
\DoxyCodeLine{5078    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} pal[256][4];}
\DoxyCodeLine{5079    \textcolor{keywordtype}{int} psize=0,i,j,width;}
\DoxyCodeLine{5080    \textcolor{keywordtype}{int} flip\_vertically, pad, target;}
\DoxyCodeLine{5081    stbi\_\_bmp\_data \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}};}
\DoxyCodeLine{5082    STBI\_NOTUSED(ri);}
\DoxyCodeLine{5083 }
\DoxyCodeLine{5084    \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.all\_a = 255;}
\DoxyCodeLine{5085    \textcolor{keywordflow}{if} (stbi\_\_bmp\_parse\_header(s, \&\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}) == NULL)}
\DoxyCodeLine{5086       \textcolor{keywordflow}{return} NULL; \textcolor{comment}{// error code already set}}
\DoxyCodeLine{5087 }
\DoxyCodeLine{5088    flip\_vertically = ((int) s-\/>img\_y) > 0;}
\DoxyCodeLine{5089    s-\/>img\_y = abs((\textcolor{keywordtype}{int}) s-\/>img\_y);}
\DoxyCodeLine{5090 }
\DoxyCodeLine{5091    mr = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.mr;}
\DoxyCodeLine{5092    mg = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.mg;}
\DoxyCodeLine{5093    mb = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.mb;}
\DoxyCodeLine{5094    ma = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.ma;}
\DoxyCodeLine{5095    all\_a = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.all\_a;}
\DoxyCodeLine{5096 }
\DoxyCodeLine{5097    \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.hsz == 12) \{}
\DoxyCodeLine{5098       \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp < 24)}
\DoxyCodeLine{5099          psize = (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.offset -\/ 14 -\/ 24) / 3;}
\DoxyCodeLine{5100    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5101       \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp < 16)}
\DoxyCodeLine{5102          psize = (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.offset -\/ 14 -\/ \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.hsz) >> 2;}
\DoxyCodeLine{5103    \}}
\DoxyCodeLine{5104 }
\DoxyCodeLine{5105    s-\/>img\_n = ma ? 4 : 3;}
\DoxyCodeLine{5106    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp >= 3) \textcolor{comment}{// we can directly decode 3 or 4}}
\DoxyCodeLine{5107       target = req\_comp;}
\DoxyCodeLine{5108    \textcolor{keywordflow}{else}}
\DoxyCodeLine{5109       target = s-\/>img\_n; \textcolor{comment}{// if they want monochrome, we'll post-\/convert}}
\DoxyCodeLine{5110 }
\DoxyCodeLine{5111    \textcolor{comment}{// sanity-\/check size}}
\DoxyCodeLine{5112    \textcolor{keywordflow}{if} (!stbi\_\_mad3sizes\_valid(target, s-\/>img\_x, s-\/>img\_y, 0))}
\DoxyCodeLine{5113       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}});}
\DoxyCodeLine{5114 }
\DoxyCodeLine{5115    out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(target, s-\/>img\_x, s-\/>img\_y, 0);}
\DoxyCodeLine{5116    \textcolor{keywordflow}{if} (!out) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{5117    \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp < 16) \{}
\DoxyCodeLine{5118       \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}=0;}
\DoxyCodeLine{5119       \textcolor{keywordflow}{if} (psize == 0 || psize > 256) \{ STBI\_FREE(out); \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}invalid"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}}); \}}
\DoxyCodeLine{5120       \textcolor{keywordflow}{for} (i=0; i < psize; ++i) \{}
\DoxyCodeLine{5121          pal[i][2] = stbi\_\_get8(s);}
\DoxyCodeLine{5122          pal[i][1] = stbi\_\_get8(s);}
\DoxyCodeLine{5123          pal[i][0] = stbi\_\_get8(s);}
\DoxyCodeLine{5124          \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.hsz != 12) stbi\_\_get8(s);}
\DoxyCodeLine{5125          pal[i][3] = 255;}
\DoxyCodeLine{5126       \}}
\DoxyCodeLine{5127       stbi\_\_skip(s, \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.offset -\/ 14 -\/ \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.hsz -\/ psize * (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.hsz == 12 ? 3 : 4));}
\DoxyCodeLine{5128       \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp == 4) width = (s-\/>img\_x + 1) >> 1;}
\DoxyCodeLine{5129       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp == 8) width = s-\/>img\_x;}
\DoxyCodeLine{5130       \textcolor{keywordflow}{else} \{ STBI\_FREE(out); \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad bpp"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}}); \}}
\DoxyCodeLine{5131       pad = (-\/width)\&3;}
\DoxyCodeLine{5132       \textcolor{keywordflow}{for} (j=0; j < (int) s-\/>img\_y; ++j) \{}
\DoxyCodeLine{5133          \textcolor{keywordflow}{for} (i=0; i < (int) s-\/>img\_x; i += 2) \{}
\DoxyCodeLine{5134             \textcolor{keywordtype}{int} v=stbi\_\_get8(s),v2=0;}
\DoxyCodeLine{5135             \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp == 4) \{}
\DoxyCodeLine{5136                v2 = v \& 15;}
\DoxyCodeLine{5137                v >>= 4;}
\DoxyCodeLine{5138             \}}
\DoxyCodeLine{5139             out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = pal[v][0];}
\DoxyCodeLine{5140             out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = pal[v][1];}
\DoxyCodeLine{5141             out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = pal[v][2];}
\DoxyCodeLine{5142             \textcolor{keywordflow}{if} (target == 4) out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = 255;}
\DoxyCodeLine{5143             \textcolor{keywordflow}{if} (i+1 == (\textcolor{keywordtype}{int}) s-\/>img\_x) \textcolor{keywordflow}{break};}
\DoxyCodeLine{5144             v = (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp == 8) ? stbi\_\_get8(s) : v2;}
\DoxyCodeLine{5145             out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = pal[v][0];}
\DoxyCodeLine{5146             out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = pal[v][1];}
\DoxyCodeLine{5147             out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = pal[v][2];}
\DoxyCodeLine{5148             \textcolor{keywordflow}{if} (target == 4) out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = 255;}
\DoxyCodeLine{5149          \}}
\DoxyCodeLine{5150          stbi\_\_skip(s, pad);}
\DoxyCodeLine{5151       \}}
\DoxyCodeLine{5152    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5153       \textcolor{keywordtype}{int} rshift=0,gshift=0,bshift=0,ashift=0,rcount=0,gcount=0,bcount=0,acount=0;}
\DoxyCodeLine{5154       \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = 0;}
\DoxyCodeLine{5155       \textcolor{keywordtype}{int} easy=0;}
\DoxyCodeLine{5156       stbi\_\_skip(s, \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.offset -\/ 14 -\/ \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.hsz);}
\DoxyCodeLine{5157       \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp == 24) width = 3 * s-\/>img\_x;}
\DoxyCodeLine{5158       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp == 16) width = 2*s-\/>img\_x;}
\DoxyCodeLine{5159       \textcolor{keywordflow}{else} \textcolor{comment}{/* bpp = 32 and pad = 0 */} width=0;}
\DoxyCodeLine{5160       pad = (-\/width) \& 3;}
\DoxyCodeLine{5161       \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp == 24) \{}
\DoxyCodeLine{5162          easy = 1;}
\DoxyCodeLine{5163       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp == 32) \{}
\DoxyCodeLine{5164          \textcolor{keywordflow}{if} (mb == 0xff \&\& mg == 0xff00 \&\& mr == 0x00ff0000 \&\& ma == 0xff000000)}
\DoxyCodeLine{5165             easy = 2;}
\DoxyCodeLine{5166       \}}
\DoxyCodeLine{5167       \textcolor{keywordflow}{if} (!easy) \{}
\DoxyCodeLine{5168          \textcolor{keywordflow}{if} (!mr || !mg || !mb) \{ STBI\_FREE(out); \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad masks"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}}); \}}
\DoxyCodeLine{5169          \textcolor{comment}{// right shift amt to put high bit in position \#7}}
\DoxyCodeLine{5170          rshift = stbi\_\_high\_bit(mr)-\/7; rcount = stbi\_\_bitcount(mr);}
\DoxyCodeLine{5171          gshift = stbi\_\_high\_bit(mg)-\/7; gcount = stbi\_\_bitcount(mg);}
\DoxyCodeLine{5172          bshift = stbi\_\_high\_bit(mb)-\/7; bcount = stbi\_\_bitcount(mb);}
\DoxyCodeLine{5173          ashift = stbi\_\_high\_bit(ma)-\/7; acount = stbi\_\_bitcount(ma);}
\DoxyCodeLine{5174       \}}
\DoxyCodeLine{5175       \textcolor{keywordflow}{for} (j=0; j < (int) s-\/>img\_y; ++j) \{}
\DoxyCodeLine{5176          \textcolor{keywordflow}{if} (easy) \{}
\DoxyCodeLine{5177             \textcolor{keywordflow}{for} (i=0; i < (int) s-\/>img\_x; ++i) \{}
\DoxyCodeLine{5178                \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} a;}
\DoxyCodeLine{5179                out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}+2] = stbi\_\_get8(s);}
\DoxyCodeLine{5180                out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}+1] = stbi\_\_get8(s);}
\DoxyCodeLine{5181                out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}+0] = stbi\_\_get8(s);}
\DoxyCodeLine{5182                \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} += 3;}
\DoxyCodeLine{5183                a = (easy == 2 ? stbi\_\_get8(s) : 255);}
\DoxyCodeLine{5184                all\_a |= a;}
\DoxyCodeLine{5185                \textcolor{keywordflow}{if} (target == 4) out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = a;}
\DoxyCodeLine{5186             \}}
\DoxyCodeLine{5187          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5188             \textcolor{keywordtype}{int} bpp = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.bpp;}
\DoxyCodeLine{5189             \textcolor{keywordflow}{for} (i=0; i < (int) s-\/>img\_x; ++i) \{}
\DoxyCodeLine{5190                stbi\_\_uint32 v = (bpp == 16 ? (stbi\_\_uint32) stbi\_\_get16le(s) : stbi\_\_get32le(s));}
\DoxyCodeLine{5191                \textcolor{keywordtype}{int} a;}
\DoxyCodeLine{5192                out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = STBI\_\_BYTECAST(stbi\_\_shiftsigned(v \& mr, rshift, rcount));}
\DoxyCodeLine{5193                out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = STBI\_\_BYTECAST(stbi\_\_shiftsigned(v \& mg, gshift, gcount));}
\DoxyCodeLine{5194                out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = STBI\_\_BYTECAST(stbi\_\_shiftsigned(v \& mb, bshift, bcount));}
\DoxyCodeLine{5195                a = (ma ? stbi\_\_shiftsigned(v \& ma, ashift, acount) : 255);}
\DoxyCodeLine{5196                all\_a |= a;}
\DoxyCodeLine{5197                \textcolor{keywordflow}{if} (target == 4) out[\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}++] = STBI\_\_BYTECAST(a);}
\DoxyCodeLine{5198             \}}
\DoxyCodeLine{5199          \}}
\DoxyCodeLine{5200          stbi\_\_skip(s, pad);}
\DoxyCodeLine{5201       \}}
\DoxyCodeLine{5202    \}}
\DoxyCodeLine{5203 }
\DoxyCodeLine{5204    \textcolor{comment}{// if alpha channel is all 0s, replace with all 255s}}
\DoxyCodeLine{5205    \textcolor{keywordflow}{if} (target == 4 \&\& all\_a == 0)}
\DoxyCodeLine{5206       \textcolor{keywordflow}{for} (i=4*s-\/>img\_x*s-\/>img\_y-\/1; i >= 0; i -\/= 4)}
\DoxyCodeLine{5207          out[i] = 255;}
\DoxyCodeLine{5208 }
\DoxyCodeLine{5209    \textcolor{keywordflow}{if} (flip\_vertically) \{}
\DoxyCodeLine{5210       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} t;}
\DoxyCodeLine{5211       \textcolor{keywordflow}{for} (j=0; j < (int) s-\/>img\_y>>1; ++j) \{}
\DoxyCodeLine{5212          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p1 = out +      j     *s-\/>img\_x*target;}
\DoxyCodeLine{5213          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p2 = out + (s-\/>img\_y-\/1-\/j)*s-\/>img\_x*target;}
\DoxyCodeLine{5214          for (i=0; i < (int) s-\/>img\_x*target; ++i) \{}
\DoxyCodeLine{5215             t = p1[i], p1[i] = p2[i], p2[i] = t;}
\DoxyCodeLine{5216          \}}
\DoxyCodeLine{5217       \}}
\DoxyCodeLine{5218    \}}
\DoxyCodeLine{5219 }
\DoxyCodeLine{5220    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != target) \{}
\DoxyCodeLine{5221       out = stbi\_\_convert\_format(out, target, req\_comp, s-\/>img\_x, s-\/>img\_y);}
\DoxyCodeLine{5222       \textcolor{keywordflow}{if} (out == NULL) \textcolor{keywordflow}{return} out; \textcolor{comment}{// stbi\_\_convert\_format frees input on failure}}
\DoxyCodeLine{5223    \}}
\DoxyCodeLine{5224 }
\DoxyCodeLine{5225    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = s-\/>img\_x;}
\DoxyCodeLine{5226    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = s-\/>img\_y;}
\DoxyCodeLine{5227    \textcolor{keywordflow}{if} (comp) *comp = s-\/>img\_n;}
\DoxyCodeLine{5228    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{5229 \}}
\DoxyCodeLine{5230 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{5231 }
\DoxyCodeLine{5232 \textcolor{comment}{// Targa Truevision -\/ TGA}}
\DoxyCodeLine{5233 \textcolor{comment}{// by Jonathan Dummer}}
\DoxyCodeLine{5234 \textcolor{preprocessor}{\#ifndef STBI\_NO\_TGA}}
\DoxyCodeLine{5235 \textcolor{comment}{// returns STBI\_rgb or whatever, 0 on error}}
\DoxyCodeLine{5236 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_tga\_get\_comp(\textcolor{keywordtype}{int} bits\_per\_pixel, \textcolor{keywordtype}{int} is\_grey, \textcolor{keywordtype}{int}* is\_rgb16)}
\DoxyCodeLine{5237 \{}
\DoxyCodeLine{5238    \textcolor{comment}{// only RGB or RGBA (incl. 16bit) or grey allowed}}
\DoxyCodeLine{5239    \textcolor{keywordflow}{if}(is\_rgb16) *is\_rgb16 = 0;}
\DoxyCodeLine{5240    \textcolor{keywordflow}{switch}(bits\_per\_pixel) \{}
\DoxyCodeLine{5241       \textcolor{keywordflow}{case} 8:  \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06cad1eb95ca1fa7706bf732bf35a0ed40aa}{STBI\_grey}};}
\DoxyCodeLine{5242       \textcolor{keywordflow}{case} 16: \textcolor{keywordflow}{if}(is\_grey) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06caf5829d16d4cca6077465c5abd346e2f8}{STBI\_grey\_alpha}};}
\DoxyCodeLine{5243             \textcolor{comment}{// else: fall-\/through}}
\DoxyCodeLine{5244       \textcolor{keywordflow}{case} 15: \textcolor{keywordflow}{if}(is\_rgb16) *is\_rgb16 = 1;}
\DoxyCodeLine{5245             \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06caa59123e5d0af25f9b1539f5cf1facddf}{STBI\_rgb}};}
\DoxyCodeLine{5246       \textcolor{keywordflow}{case} 24: \textcolor{comment}{// fall-\/through}}
\DoxyCodeLine{5247       \textcolor{keywordflow}{case} 32: \textcolor{keywordflow}{return} bits\_per\_pixel/8;}
\DoxyCodeLine{5248       \textcolor{keywordflow}{default}: \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5249    \}}
\DoxyCodeLine{5250 \}}
\DoxyCodeLine{5251 }
\DoxyCodeLine{5252 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_tga\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{5253 \{}
\DoxyCodeLine{5254     \textcolor{keywordtype}{int} tga\_w, tga\_h, tga\_comp, tga\_image\_type, tga\_bits\_per\_pixel, tga\_colormap\_bpp;}
\DoxyCodeLine{5255     \textcolor{keywordtype}{int} sz, tga\_colormap\_type;}
\DoxyCodeLine{5256     stbi\_\_get8(s);                   \textcolor{comment}{// discard Offset}}
\DoxyCodeLine{5257     tga\_colormap\_type = stbi\_\_get8(s); \textcolor{comment}{// colormap type}}
\DoxyCodeLine{5258     \textcolor{keywordflow}{if}( tga\_colormap\_type > 1 ) \{}
\DoxyCodeLine{5259         stbi\_\_rewind(s);}
\DoxyCodeLine{5260         \textcolor{keywordflow}{return} 0;      \textcolor{comment}{// only RGB or indexed allowed}}
\DoxyCodeLine{5261     \}}
\DoxyCodeLine{5262     tga\_image\_type = stbi\_\_get8(s); \textcolor{comment}{// image type}}
\DoxyCodeLine{5263     \textcolor{keywordflow}{if} ( tga\_colormap\_type == 1 ) \{ \textcolor{comment}{// colormapped (paletted) image}}
\DoxyCodeLine{5264         \textcolor{keywordflow}{if} (tga\_image\_type != 1 \&\& tga\_image\_type != 9) \{}
\DoxyCodeLine{5265             stbi\_\_rewind(s);}
\DoxyCodeLine{5266             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5267         \}}
\DoxyCodeLine{5268         stbi\_\_skip(s,4);       \textcolor{comment}{// skip index of first colormap entry and number of entries}}
\DoxyCodeLine{5269         sz = stbi\_\_get8(s);    \textcolor{comment}{//   check bits per palette color entry}}
\DoxyCodeLine{5270         \textcolor{keywordflow}{if} ( (sz != 8) \&\& (sz != 15) \&\& (sz != 16) \&\& (sz != 24) \&\& (sz != 32) ) \{}
\DoxyCodeLine{5271             stbi\_\_rewind(s);}
\DoxyCodeLine{5272             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5273         \}}
\DoxyCodeLine{5274         stbi\_\_skip(s,4);       \textcolor{comment}{// skip image x and y origin}}
\DoxyCodeLine{5275         tga\_colormap\_bpp = sz;}
\DoxyCodeLine{5276     \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// "{}normal"{} image w/o colormap -\/ only RGB or grey allowed, +/-\/ RLE}}
\DoxyCodeLine{5277         \textcolor{keywordflow}{if} ( (tga\_image\_type != 2) \&\& (tga\_image\_type != 3) \&\& (tga\_image\_type != 10) \&\& (tga\_image\_type != 11) ) \{}
\DoxyCodeLine{5278             stbi\_\_rewind(s);}
\DoxyCodeLine{5279             \textcolor{keywordflow}{return} 0; \textcolor{comment}{// only RGB or grey allowed, +/-\/ RLE}}
\DoxyCodeLine{5280         \}}
\DoxyCodeLine{5281         stbi\_\_skip(s,9); \textcolor{comment}{// skip colormap specification and image x/y origin}}
\DoxyCodeLine{5282         tga\_colormap\_bpp = 0;}
\DoxyCodeLine{5283     \}}
\DoxyCodeLine{5284     tga\_w = stbi\_\_get16le(s);}
\DoxyCodeLine{5285     \textcolor{keywordflow}{if}( tga\_w < 1 ) \{}
\DoxyCodeLine{5286         stbi\_\_rewind(s);}
\DoxyCodeLine{5287         \textcolor{keywordflow}{return} 0;   \textcolor{comment}{// test width}}
\DoxyCodeLine{5288     \}}
\DoxyCodeLine{5289     tga\_h = stbi\_\_get16le(s);}
\DoxyCodeLine{5290     \textcolor{keywordflow}{if}( tga\_h < 1 ) \{}
\DoxyCodeLine{5291         stbi\_\_rewind(s);}
\DoxyCodeLine{5292         \textcolor{keywordflow}{return} 0;   \textcolor{comment}{// test height}}
\DoxyCodeLine{5293     \}}
\DoxyCodeLine{5294     tga\_bits\_per\_pixel = stbi\_\_get8(s); \textcolor{comment}{// bits per pixel}}
\DoxyCodeLine{5295     stbi\_\_get8(s); \textcolor{comment}{// ignore alpha bits}}
\DoxyCodeLine{5296     \textcolor{keywordflow}{if} (tga\_colormap\_bpp != 0) \{}
\DoxyCodeLine{5297         \textcolor{keywordflow}{if}((tga\_bits\_per\_pixel != 8) \&\& (tga\_bits\_per\_pixel != 16)) \{}
\DoxyCodeLine{5298             \textcolor{comment}{// when using a colormap, tga\_bits\_per\_pixel is the size of the indexes}}
\DoxyCodeLine{5299             \textcolor{comment}{// I don't think anything but 8 or 16bit indexes makes sense}}
\DoxyCodeLine{5300             stbi\_\_rewind(s);}
\DoxyCodeLine{5301             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5302         \}}
\DoxyCodeLine{5303         tga\_comp = stbi\_\_tga\_get\_comp(tga\_colormap\_bpp, 0, NULL);}
\DoxyCodeLine{5304     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5305         tga\_comp = stbi\_\_tga\_get\_comp(tga\_bits\_per\_pixel, (tga\_image\_type == 3) || (tga\_image\_type == 11), NULL);}
\DoxyCodeLine{5306     \}}
\DoxyCodeLine{5307     \textcolor{keywordflow}{if}(!tga\_comp) \{}
\DoxyCodeLine{5308       stbi\_\_rewind(s);}
\DoxyCodeLine{5309       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5310     \}}
\DoxyCodeLine{5311     \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = tga\_w;}
\DoxyCodeLine{5312     \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = tga\_h;}
\DoxyCodeLine{5313     \textcolor{keywordflow}{if} (comp) *comp = tga\_comp;}
\DoxyCodeLine{5314     \textcolor{keywordflow}{return} 1;                   \textcolor{comment}{// seems to have passed everything}}
\DoxyCodeLine{5315 \}}
\DoxyCodeLine{5316 }
\DoxyCodeLine{5317 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_tga\_test(stbi\_\_context *s)}
\DoxyCodeLine{5318 \{}
\DoxyCodeLine{5319    \textcolor{keywordtype}{int} res = 0;}
\DoxyCodeLine{5320    \textcolor{keywordtype}{int} sz, tga\_color\_type;}
\DoxyCodeLine{5321    stbi\_\_get8(s);      \textcolor{comment}{//   discard Offset}}
\DoxyCodeLine{5322    tga\_color\_type = stbi\_\_get8(s);   \textcolor{comment}{//   color type}}
\DoxyCodeLine{5323    \textcolor{keywordflow}{if} ( tga\_color\_type > 1 ) \textcolor{keywordflow}{goto} errorEnd;   \textcolor{comment}{//   only RGB or indexed allowed}}
\DoxyCodeLine{5324    sz = stbi\_\_get8(s);   \textcolor{comment}{//   image type}}
\DoxyCodeLine{5325    \textcolor{keywordflow}{if} ( tga\_color\_type == 1 ) \{ \textcolor{comment}{// colormapped (paletted) image}}
\DoxyCodeLine{5326       \textcolor{keywordflow}{if} (sz != 1 \&\& sz != 9) \textcolor{keywordflow}{goto} errorEnd; \textcolor{comment}{// colortype 1 demands image type 1 or 9}}
\DoxyCodeLine{5327       stbi\_\_skip(s,4);       \textcolor{comment}{// skip index of first colormap entry and number of entries}}
\DoxyCodeLine{5328       sz = stbi\_\_get8(s);    \textcolor{comment}{//   check bits per palette color entry}}
\DoxyCodeLine{5329       \textcolor{keywordflow}{if} ( (sz != 8) \&\& (sz != 15) \&\& (sz != 16) \&\& (sz != 24) \&\& (sz != 32) ) \textcolor{keywordflow}{goto} errorEnd;}
\DoxyCodeLine{5330       stbi\_\_skip(s,4);       \textcolor{comment}{// skip image x and y origin}}
\DoxyCodeLine{5331    \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// "{}normal"{} image w/o colormap}}
\DoxyCodeLine{5332       \textcolor{keywordflow}{if} ( (sz != 2) \&\& (sz != 3) \&\& (sz != 10) \&\& (sz != 11) ) \textcolor{keywordflow}{goto} errorEnd; \textcolor{comment}{// only RGB or grey allowed, +/-\/ RLE}}
\DoxyCodeLine{5333       stbi\_\_skip(s,9); \textcolor{comment}{// skip colormap specification and image x/y origin}}
\DoxyCodeLine{5334    \}}
\DoxyCodeLine{5335    \textcolor{keywordflow}{if} ( stbi\_\_get16le(s) < 1 ) \textcolor{keywordflow}{goto} errorEnd;      \textcolor{comment}{//   test width}}
\DoxyCodeLine{5336    \textcolor{keywordflow}{if} ( stbi\_\_get16le(s) < 1 ) \textcolor{keywordflow}{goto} errorEnd;      \textcolor{comment}{//   test height}}
\DoxyCodeLine{5337    sz = stbi\_\_get8(s);   \textcolor{comment}{//   bits per pixel}}
\DoxyCodeLine{5338    \textcolor{keywordflow}{if} ( (tga\_color\_type == 1) \&\& (sz != 8) \&\& (sz != 16) ) \textcolor{keywordflow}{goto} errorEnd; \textcolor{comment}{// for colormapped images, bpp is size of an index}}
\DoxyCodeLine{5339    \textcolor{keywordflow}{if} ( (sz != 8) \&\& (sz != 15) \&\& (sz != 16) \&\& (sz != 24) \&\& (sz != 32) ) \textcolor{keywordflow}{goto} errorEnd;}
\DoxyCodeLine{5340 }
\DoxyCodeLine{5341    res = 1; \textcolor{comment}{// if we got this far, everything's good and we can return 1 instead of 0}}
\DoxyCodeLine{5342 }
\DoxyCodeLine{5343 errorEnd:}
\DoxyCodeLine{5344    stbi\_\_rewind(s);}
\DoxyCodeLine{5345    \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{5346 \}}
\DoxyCodeLine{5347 }
\DoxyCodeLine{5348 \textcolor{comment}{// read 16bit value and convert to 24bit RGB}}
\DoxyCodeLine{5349 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_tga\_read\_rgb16(stbi\_\_context *s, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}* out)}
\DoxyCodeLine{5350 \{}
\DoxyCodeLine{5351    stbi\_\_uint16 px = (stbi\_\_uint16)stbi\_\_get16le(s);}
\DoxyCodeLine{5352    stbi\_\_uint16 fiveBitMask = 31;}
\DoxyCodeLine{5353    \textcolor{comment}{// we have 3 channels with 5bits each}}
\DoxyCodeLine{5354    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = (px >> 10) \& fiveBitMask;}
\DoxyCodeLine{5355    \textcolor{keywordtype}{int} \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = (px >> 5) \& fiveBitMask;}
\DoxyCodeLine{5356    \textcolor{keywordtype}{int} b = px \& fiveBitMask;}
\DoxyCodeLine{5357    \textcolor{comment}{// Note that this saves the data in RGB(A) order, so it doesn't need to be swapped later}}
\DoxyCodeLine{5358    out[0] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})((\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} * 255)/31);}
\DoxyCodeLine{5359    out[1] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})((\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} * 255)/31);}
\DoxyCodeLine{5360    out[2] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})((b * 255)/31);}
\DoxyCodeLine{5361 }
\DoxyCodeLine{5362    \textcolor{comment}{// some people claim that the most significant bit might be used for alpha}}
\DoxyCodeLine{5363    \textcolor{comment}{// (possibly if an alpha-\/bit is set in the "{}image descriptor byte"{})}}
\DoxyCodeLine{5364    \textcolor{comment}{// but that only made 16bit test images completely translucent..}}
\DoxyCodeLine{5365    \textcolor{comment}{// so let's treat all 15 and 16bit TGAs as RGB with no alpha.}}
\DoxyCodeLine{5366 \}}
\DoxyCodeLine{5367 }
\DoxyCodeLine{5368 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_tga\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{5369 \{}
\DoxyCodeLine{5370    \textcolor{comment}{//   read in the TGA header stuff}}
\DoxyCodeLine{5371    \textcolor{keywordtype}{int} tga\_offset = stbi\_\_get8(s);}
\DoxyCodeLine{5372    \textcolor{keywordtype}{int} tga\_indexed = stbi\_\_get8(s);}
\DoxyCodeLine{5373    \textcolor{keywordtype}{int} tga\_image\_type = stbi\_\_get8(s);}
\DoxyCodeLine{5374    \textcolor{keywordtype}{int} tga\_is\_RLE = 0;}
\DoxyCodeLine{5375    \textcolor{keywordtype}{int} tga\_palette\_start = stbi\_\_get16le(s);}
\DoxyCodeLine{5376    \textcolor{keywordtype}{int} tga\_palette\_len = stbi\_\_get16le(s);}
\DoxyCodeLine{5377    \textcolor{keywordtype}{int} tga\_palette\_bits = stbi\_\_get8(s);}
\DoxyCodeLine{5378    \textcolor{keywordtype}{int} tga\_x\_origin = stbi\_\_get16le(s);}
\DoxyCodeLine{5379    \textcolor{keywordtype}{int} tga\_y\_origin = stbi\_\_get16le(s);}
\DoxyCodeLine{5380    \textcolor{keywordtype}{int} tga\_width = stbi\_\_get16le(s);}
\DoxyCodeLine{5381    \textcolor{keywordtype}{int} tga\_height = stbi\_\_get16le(s);}
\DoxyCodeLine{5382    \textcolor{keywordtype}{int} tga\_bits\_per\_pixel = stbi\_\_get8(s);}
\DoxyCodeLine{5383    \textcolor{keywordtype}{int} tga\_comp, tga\_rgb16=0;}
\DoxyCodeLine{5384    \textcolor{keywordtype}{int} tga\_inverted = stbi\_\_get8(s);}
\DoxyCodeLine{5385    \textcolor{comment}{// int tga\_alpha\_bits = tga\_inverted \& 15; // the 4 lowest bits -\/ unused (useless?)}}
\DoxyCodeLine{5386    \textcolor{comment}{//   image data}}
\DoxyCodeLine{5387    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *tga\_data;}
\DoxyCodeLine{5388    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *tga\_palette = NULL;}
\DoxyCodeLine{5389    \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{5390    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} raw\_data[4] = \{0\};}
\DoxyCodeLine{5391    \textcolor{keywordtype}{int} RLE\_count = 0;}
\DoxyCodeLine{5392    \textcolor{keywordtype}{int} RLE\_repeating = 0;}
\DoxyCodeLine{5393    \textcolor{keywordtype}{int} read\_next\_pixel = 1;}
\DoxyCodeLine{5394    STBI\_NOTUSED(ri);}
\DoxyCodeLine{5395 }
\DoxyCodeLine{5396    \textcolor{comment}{//   do a tiny bit of precessing}}
\DoxyCodeLine{5397    \textcolor{keywordflow}{if} ( tga\_image\_type >= 8 )}
\DoxyCodeLine{5398    \{}
\DoxyCodeLine{5399       tga\_image\_type -\/= 8;}
\DoxyCodeLine{5400       tga\_is\_RLE = 1;}
\DoxyCodeLine{5401    \}}
\DoxyCodeLine{5402    tga\_inverted = 1 -\/ ((tga\_inverted >> 5) \& 1);}
\DoxyCodeLine{5403 }
\DoxyCodeLine{5404    \textcolor{comment}{//   If I'm paletted, then I'll use the number of bits from the palette}}
\DoxyCodeLine{5405    \textcolor{keywordflow}{if} ( tga\_indexed ) tga\_comp = stbi\_\_tga\_get\_comp(tga\_palette\_bits, 0, \&tga\_rgb16);}
\DoxyCodeLine{5406    \textcolor{keywordflow}{else} tga\_comp = stbi\_\_tga\_get\_comp(tga\_bits\_per\_pixel, (tga\_image\_type == 3), \&tga\_rgb16);}
\DoxyCodeLine{5407 }
\DoxyCodeLine{5408    \textcolor{keywordflow}{if}(!tga\_comp) \textcolor{comment}{// shouldn't really happen, stbi\_\_tga\_test() should have ensured basic consistency}}
\DoxyCodeLine{5409       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad format"{}}, \textcolor{stringliteral}{"{}Can't find out TGA pixelformat"{}});}
\DoxyCodeLine{5410 }
\DoxyCodeLine{5411    \textcolor{comment}{//   tga info}}
\DoxyCodeLine{5412    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = tga\_width;}
\DoxyCodeLine{5413    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = tga\_height;}
\DoxyCodeLine{5414    \textcolor{keywordflow}{if} (comp) *comp = tga\_comp;}
\DoxyCodeLine{5415 }
\DoxyCodeLine{5416    \textcolor{keywordflow}{if} (!stbi\_\_mad3sizes\_valid(tga\_width, tga\_height, tga\_comp, 0))}
\DoxyCodeLine{5417       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}Corrupt TGA"{}});}
\DoxyCodeLine{5418 }
\DoxyCodeLine{5419    tga\_data = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*)stbi\_\_malloc\_mad3(tga\_width, tga\_height, tga\_comp, 0);}
\DoxyCodeLine{5420    \textcolor{keywordflow}{if} (!tga\_data) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{5421 }
\DoxyCodeLine{5422    \textcolor{comment}{// skip to the data's starting position (offset usually = 0)}}
\DoxyCodeLine{5423    stbi\_\_skip(s, tga\_offset );}
\DoxyCodeLine{5424 }
\DoxyCodeLine{5425    \textcolor{keywordflow}{if} ( !tga\_indexed \&\& !tga\_is\_RLE \&\& !tga\_rgb16 ) \{}
\DoxyCodeLine{5426       \textcolor{keywordflow}{for} (i=0; i < tga\_height; ++i) \{}
\DoxyCodeLine{5427          \textcolor{keywordtype}{int} row = tga\_inverted ? tga\_height -\/i -\/ 1 : i;}
\DoxyCodeLine{5428          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *tga\_row = tga\_data + row*tga\_width*tga\_comp;}
\DoxyCodeLine{5429          stbi\_\_getn(s, tga\_row, tga\_width * tga\_comp);}
\DoxyCodeLine{5430       \}}
\DoxyCodeLine{5431    \} \textcolor{keywordflow}{else}  \{}
\DoxyCodeLine{5432       \textcolor{comment}{//   do I need to load a palette?}}
\DoxyCodeLine{5433       \textcolor{keywordflow}{if} ( tga\_indexed)}
\DoxyCodeLine{5434       \{}
\DoxyCodeLine{5435          \textcolor{comment}{//   any data to skip? (offset usually = 0)}}
\DoxyCodeLine{5436          stbi\_\_skip(s, tga\_palette\_start );}
\DoxyCodeLine{5437          \textcolor{comment}{//   load the palette}}
\DoxyCodeLine{5438          tga\_palette = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*)stbi\_\_malloc\_mad2(tga\_palette\_len, tga\_comp, 0);}
\DoxyCodeLine{5439          \textcolor{keywordflow}{if} (!tga\_palette) \{}
\DoxyCodeLine{5440             STBI\_FREE(tga\_data);}
\DoxyCodeLine{5441             \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{5442          \}}
\DoxyCodeLine{5443          \textcolor{keywordflow}{if} (tga\_rgb16) \{}
\DoxyCodeLine{5444             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pal\_entry = tga\_palette;}
\DoxyCodeLine{5445             STBI\_ASSERT(tga\_comp == \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06caa59123e5d0af25f9b1539f5cf1facddf}{STBI\_rgb}});}
\DoxyCodeLine{5446             \textcolor{keywordflow}{for} (i=0; i < tga\_palette\_len; ++i) \{}
\DoxyCodeLine{5447                stbi\_\_tga\_read\_rgb16(s, pal\_entry);}
\DoxyCodeLine{5448                pal\_entry += tga\_comp;}
\DoxyCodeLine{5449             \}}
\DoxyCodeLine{5450          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!stbi\_\_getn(s, tga\_palette, tga\_palette\_len * tga\_comp)) \{}
\DoxyCodeLine{5451                STBI\_FREE(tga\_data);}
\DoxyCodeLine{5452                STBI\_FREE(tga\_palette);}
\DoxyCodeLine{5453                \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad palette"{}}, \textcolor{stringliteral}{"{}Corrupt TGA"{}});}
\DoxyCodeLine{5454          \}}
\DoxyCodeLine{5455       \}}
\DoxyCodeLine{5456       \textcolor{comment}{//   load the data}}
\DoxyCodeLine{5457       \textcolor{keywordflow}{for} (i=0; i < tga\_width * tga\_height; ++i)}
\DoxyCodeLine{5458       \{}
\DoxyCodeLine{5459          \textcolor{comment}{//   if I'm in RLE mode, do I need to get a RLE stbi\_\_pngchunk?}}
\DoxyCodeLine{5460          \textcolor{keywordflow}{if} ( tga\_is\_RLE )}
\DoxyCodeLine{5461          \{}
\DoxyCodeLine{5462             \textcolor{keywordflow}{if} ( RLE\_count == 0 )}
\DoxyCodeLine{5463             \{}
\DoxyCodeLine{5464                \textcolor{comment}{//   yep, get the next byte as a RLE command}}
\DoxyCodeLine{5465                \textcolor{keywordtype}{int} RLE\_cmd = stbi\_\_get8(s);}
\DoxyCodeLine{5466                RLE\_count = 1 + (RLE\_cmd \& 127);}
\DoxyCodeLine{5467                RLE\_repeating = RLE\_cmd >> 7;}
\DoxyCodeLine{5468                read\_next\_pixel = 1;}
\DoxyCodeLine{5469             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( !RLE\_repeating )}
\DoxyCodeLine{5470             \{}
\DoxyCodeLine{5471                read\_next\_pixel = 1;}
\DoxyCodeLine{5472             \}}
\DoxyCodeLine{5473          \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{5474          \{}
\DoxyCodeLine{5475             read\_next\_pixel = 1;}
\DoxyCodeLine{5476          \}}
\DoxyCodeLine{5477          \textcolor{comment}{//   OK, if I need to read a pixel, do it now}}
\DoxyCodeLine{5478          \textcolor{keywordflow}{if} ( read\_next\_pixel )}
\DoxyCodeLine{5479          \{}
\DoxyCodeLine{5480             \textcolor{comment}{//   load however much data we did have}}
\DoxyCodeLine{5481             \textcolor{keywordflow}{if} ( tga\_indexed )}
\DoxyCodeLine{5482             \{}
\DoxyCodeLine{5483                \textcolor{comment}{// read in index, then perform the lookup}}
\DoxyCodeLine{5484                \textcolor{keywordtype}{int} pal\_idx = (tga\_bits\_per\_pixel == 8) ? stbi\_\_get8(s) : stbi\_\_get16le(s);}
\DoxyCodeLine{5485                \textcolor{keywordflow}{if} ( pal\_idx >= tga\_palette\_len ) \{}
\DoxyCodeLine{5486                   \textcolor{comment}{// invalid index}}
\DoxyCodeLine{5487                   pal\_idx = 0;}
\DoxyCodeLine{5488                \}}
\DoxyCodeLine{5489                pal\_idx *= tga\_comp;}
\DoxyCodeLine{5490                \textcolor{keywordflow}{for} (j = 0; j < tga\_comp; ++j) \{}
\DoxyCodeLine{5491                   raw\_data[j] = tga\_palette[pal\_idx+j];}
\DoxyCodeLine{5492                \}}
\DoxyCodeLine{5493             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(tga\_rgb16) \{}
\DoxyCodeLine{5494                STBI\_ASSERT(tga\_comp == \mbox{\hyperlink{stb__image_8h_adc29c2ff13d900c2f185ee95427fb06caa59123e5d0af25f9b1539f5cf1facddf}{STBI\_rgb}});}
\DoxyCodeLine{5495                stbi\_\_tga\_read\_rgb16(s, raw\_data);}
\DoxyCodeLine{5496             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5497                \textcolor{comment}{//   read in the data raw}}
\DoxyCodeLine{5498                \textcolor{keywordflow}{for} (j = 0; j < tga\_comp; ++j) \{}
\DoxyCodeLine{5499                   raw\_data[j] = stbi\_\_get8(s);}
\DoxyCodeLine{5500                \}}
\DoxyCodeLine{5501             \}}
\DoxyCodeLine{5502             \textcolor{comment}{//   clear the reading flag for the next pixel}}
\DoxyCodeLine{5503             read\_next\_pixel = 0;}
\DoxyCodeLine{5504          \} \textcolor{comment}{// end of reading a pixel}}
\DoxyCodeLine{5505 }
\DoxyCodeLine{5506          \textcolor{comment}{// copy data}}
\DoxyCodeLine{5507          \textcolor{keywordflow}{for} (j = 0; j < tga\_comp; ++j)}
\DoxyCodeLine{5508            tga\_data[i*tga\_comp+j] = raw\_data[j];}
\DoxyCodeLine{5509 }
\DoxyCodeLine{5510          \textcolor{comment}{//   in case we're in RLE mode, keep counting down}}
\DoxyCodeLine{5511          -\/-\/RLE\_count;}
\DoxyCodeLine{5512       \}}
\DoxyCodeLine{5513       \textcolor{comment}{//   do I need to invert the image?}}
\DoxyCodeLine{5514       \textcolor{keywordflow}{if} ( tga\_inverted )}
\DoxyCodeLine{5515       \{}
\DoxyCodeLine{5516          \textcolor{keywordflow}{for} (j = 0; j*2 < tga\_height; ++j)}
\DoxyCodeLine{5517          \{}
\DoxyCodeLine{5518             \textcolor{keywordtype}{int} index1 = j * tga\_width * tga\_comp;}
\DoxyCodeLine{5519             \textcolor{keywordtype}{int} index2 = (tga\_height -\/ 1 -\/ j) * tga\_width * tga\_comp;}
\DoxyCodeLine{5520             \textcolor{keywordflow}{for} (i = tga\_width * tga\_comp; i > 0; -\/-\/i)}
\DoxyCodeLine{5521             \{}
\DoxyCodeLine{5522                \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} temp = tga\_data[index1];}
\DoxyCodeLine{5523                tga\_data[index1] = tga\_data[index2];}
\DoxyCodeLine{5524                tga\_data[index2] = temp;}
\DoxyCodeLine{5525                ++index1;}
\DoxyCodeLine{5526                ++index2;}
\DoxyCodeLine{5527             \}}
\DoxyCodeLine{5528          \}}
\DoxyCodeLine{5529       \}}
\DoxyCodeLine{5530       \textcolor{comment}{//   clear my palette, if I had one}}
\DoxyCodeLine{5531       \textcolor{keywordflow}{if} ( tga\_palette != NULL )}
\DoxyCodeLine{5532       \{}
\DoxyCodeLine{5533          STBI\_FREE( tga\_palette );}
\DoxyCodeLine{5534       \}}
\DoxyCodeLine{5535    \}}
\DoxyCodeLine{5536 }
\DoxyCodeLine{5537    \textcolor{comment}{// swap RGB -\/ if the source data was RGB16, it already is in the right order}}
\DoxyCodeLine{5538    \textcolor{keywordflow}{if} (tga\_comp >= 3 \&\& !tga\_rgb16)}
\DoxyCodeLine{5539    \{}
\DoxyCodeLine{5540       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* tga\_pixel = tga\_data;}
\DoxyCodeLine{5541       \textcolor{keywordflow}{for} (i=0; i < tga\_width * tga\_height; ++i)}
\DoxyCodeLine{5542       \{}
\DoxyCodeLine{5543          \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} temp = tga\_pixel[0];}
\DoxyCodeLine{5544          tga\_pixel[0] = tga\_pixel[2];}
\DoxyCodeLine{5545          tga\_pixel[2] = temp;}
\DoxyCodeLine{5546          tga\_pixel += tga\_comp;}
\DoxyCodeLine{5547       \}}
\DoxyCodeLine{5548    \}}
\DoxyCodeLine{5549 }
\DoxyCodeLine{5550    \textcolor{comment}{// convert to target component count}}
\DoxyCodeLine{5551    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != tga\_comp)}
\DoxyCodeLine{5552       tga\_data = stbi\_\_convert\_format(tga\_data, tga\_comp, req\_comp, tga\_width, tga\_height);}
\DoxyCodeLine{5553 }
\DoxyCodeLine{5554    \textcolor{comment}{//   the things I do to get rid of an error message, and yet keep}}
\DoxyCodeLine{5555    \textcolor{comment}{//   Microsoft's C compilers happy... [8\string^(}}
\DoxyCodeLine{5556    tga\_palette\_start = tga\_palette\_len = tga\_palette\_bits =}
\DoxyCodeLine{5557          tga\_x\_origin = tga\_y\_origin = 0;}
\DoxyCodeLine{5558    \textcolor{comment}{//   OK, done}}
\DoxyCodeLine{5559    \textcolor{keywordflow}{return} tga\_data;}
\DoxyCodeLine{5560 \}}
\DoxyCodeLine{5561 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{5562 }
\DoxyCodeLine{5563 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{5564 \textcolor{comment}{// Photoshop PSD loader -\/-\/ PD by Thatcher Ulrich, integration by Nicolas Schulz, tweaked by STB}}
\DoxyCodeLine{5565 }
\DoxyCodeLine{5566 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{5567 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_psd\_test(stbi\_\_context *s)}
\DoxyCodeLine{5568 \{}
\DoxyCodeLine{5569    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = (stbi\_\_get32be(s) == 0x38425053);}
\DoxyCodeLine{5570    stbi\_\_rewind(s);}
\DoxyCodeLine{5571    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{5572 \}}
\DoxyCodeLine{5573 }
\DoxyCodeLine{5574 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_psd\_decode\_rle(stbi\_\_context *s, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p, \textcolor{keywordtype}{int} pixelCount)}
\DoxyCodeLine{5575 \{}
\DoxyCodeLine{5576    \textcolor{keywordtype}{int} count, nleft, \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{5577 }
\DoxyCodeLine{5578    count = 0;}
\DoxyCodeLine{5579    \textcolor{keywordflow}{while} ((nleft = pixelCount -\/ count) > 0) \{}
\DoxyCodeLine{5580       \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = stbi\_\_get8(s);}
\DoxyCodeLine{5581       \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} == 128) \{}
\DoxyCodeLine{5582          \textcolor{comment}{// No-\/op.}}
\DoxyCodeLine{5583       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} < 128) \{}
\DoxyCodeLine{5584          \textcolor{comment}{// Copy next len+1 bytes literally.}}
\DoxyCodeLine{5585          \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}++;}
\DoxyCodeLine{5586          \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} > nleft) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// corrupt data}}
\DoxyCodeLine{5587          count += \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{5588          \textcolor{keywordflow}{while} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}) \{}
\DoxyCodeLine{5589             *p = stbi\_\_get8(s);}
\DoxyCodeLine{5590             p += 4;}
\DoxyCodeLine{5591             \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}-\/-\/;}
\DoxyCodeLine{5592          \}}
\DoxyCodeLine{5593       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} > 128) \{}
\DoxyCodeLine{5594          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}   val;}
\DoxyCodeLine{5595          \textcolor{comment}{// Next -\/len+1 bytes in the dest are replicated from next source byte.}}
\DoxyCodeLine{5596          \textcolor{comment}{// (Interpret len as a negative 8-\/bit int.)}}
\DoxyCodeLine{5597          \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = 257 -\/ \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{5598          \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} > nleft) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// corrupt data}}
\DoxyCodeLine{5599          val = stbi\_\_get8(s);}
\DoxyCodeLine{5600          count += \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{5601          \textcolor{keywordflow}{while} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}) \{}
\DoxyCodeLine{5602             *p = val;}
\DoxyCodeLine{5603             p += 4;}
\DoxyCodeLine{5604             \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}-\/-\/;}
\DoxyCodeLine{5605          \}}
\DoxyCodeLine{5606       \}}
\DoxyCodeLine{5607    \}}
\DoxyCodeLine{5608 }
\DoxyCodeLine{5609    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5610 \}}
\DoxyCodeLine{5611 }
\DoxyCodeLine{5612 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_psd\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri, \textcolor{keywordtype}{int} bpc)}
\DoxyCodeLine{5613 \{}
\DoxyCodeLine{5614    \textcolor{keywordtype}{int} pixelCount;}
\DoxyCodeLine{5615    \textcolor{keywordtype}{int} channelCount, compression;}
\DoxyCodeLine{5616    \textcolor{keywordtype}{int} channel, i;}
\DoxyCodeLine{5617    \textcolor{keywordtype}{int} bitdepth;}
\DoxyCodeLine{5618    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}},h;}
\DoxyCodeLine{5619    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out;}
\DoxyCodeLine{5620    STBI\_NOTUSED(ri);}
\DoxyCodeLine{5621 }
\DoxyCodeLine{5622    \textcolor{comment}{// Check identifier}}
\DoxyCodeLine{5623    \textcolor{keywordflow}{if} (stbi\_\_get32be(s) != 0x38425053)   \textcolor{comment}{// "{}8BPS"{}}}
\DoxyCodeLine{5624       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}not PSD"{}}, \textcolor{stringliteral}{"{}Corrupt PSD image"{}});}
\DoxyCodeLine{5625 }
\DoxyCodeLine{5626    \textcolor{comment}{// Check file type version.}}
\DoxyCodeLine{5627    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 1)}
\DoxyCodeLine{5628       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}wrong version"{}}, \textcolor{stringliteral}{"{}Unsupported version of PSD image"{}});}
\DoxyCodeLine{5629 }
\DoxyCodeLine{5630    \textcolor{comment}{// Skip 6 reserved bytes.}}
\DoxyCodeLine{5631    stbi\_\_skip(s, 6 );}
\DoxyCodeLine{5632 }
\DoxyCodeLine{5633    \textcolor{comment}{// Read the number of channels (R, G, B, A, etc).}}
\DoxyCodeLine{5634    channelCount = stbi\_\_get16be(s);}
\DoxyCodeLine{5635    \textcolor{keywordflow}{if} (channelCount < 0 || channelCount > 16)}
\DoxyCodeLine{5636       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}wrong channel count"{}}, \textcolor{stringliteral}{"{}Unsupported number of channels in PSD image"{}});}
\DoxyCodeLine{5637 }
\DoxyCodeLine{5638    \textcolor{comment}{// Read the rows and columns of the image.}}
\DoxyCodeLine{5639    h = stbi\_\_get32be(s);}
\DoxyCodeLine{5640    \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} = stbi\_\_get32be(s);}
\DoxyCodeLine{5641 }
\DoxyCodeLine{5642    \textcolor{comment}{// Make sure the depth is 8 bits.}}
\DoxyCodeLine{5643    bitdepth = stbi\_\_get16be(s);}
\DoxyCodeLine{5644    \textcolor{keywordflow}{if} (bitdepth != 8 \&\& bitdepth != 16)}
\DoxyCodeLine{5645       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}unsupported bit depth"{}}, \textcolor{stringliteral}{"{}PSD bit depth is not 8 or 16 bit"{}});}
\DoxyCodeLine{5646 }
\DoxyCodeLine{5647    \textcolor{comment}{// Make sure the color mode is RGB.}}
\DoxyCodeLine{5648    \textcolor{comment}{// Valid options are:}}
\DoxyCodeLine{5649    \textcolor{comment}{//   0: Bitmap}}
\DoxyCodeLine{5650    \textcolor{comment}{//   1: Grayscale}}
\DoxyCodeLine{5651    \textcolor{comment}{//   2: Indexed color}}
\DoxyCodeLine{5652    \textcolor{comment}{//   3: RGB color}}
\DoxyCodeLine{5653    \textcolor{comment}{//   4: CMYK color}}
\DoxyCodeLine{5654    \textcolor{comment}{//   7: Multichannel}}
\DoxyCodeLine{5655    \textcolor{comment}{//   8: Duotone}}
\DoxyCodeLine{5656    \textcolor{comment}{//   9: Lab color}}
\DoxyCodeLine{5657    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 3)}
\DoxyCodeLine{5658       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}wrong color format"{}}, \textcolor{stringliteral}{"{}PSD is not in RGB color format"{}});}
\DoxyCodeLine{5659 }
\DoxyCodeLine{5660    \textcolor{comment}{// Skip the Mode Data.  (It's the palette for indexed color; other info for other modes.)}}
\DoxyCodeLine{5661    stbi\_\_skip(s,stbi\_\_get32be(s) );}
\DoxyCodeLine{5662 }
\DoxyCodeLine{5663    \textcolor{comment}{// Skip the image resources.  (resolution, pen tool paths, etc)}}
\DoxyCodeLine{5664    stbi\_\_skip(s, stbi\_\_get32be(s) );}
\DoxyCodeLine{5665 }
\DoxyCodeLine{5666    \textcolor{comment}{// Skip the reserved data.}}
\DoxyCodeLine{5667    stbi\_\_skip(s, stbi\_\_get32be(s) );}
\DoxyCodeLine{5668 }
\DoxyCodeLine{5669    \textcolor{comment}{// Find out if the data is compressed.}}
\DoxyCodeLine{5670    \textcolor{comment}{// Known values:}}
\DoxyCodeLine{5671    \textcolor{comment}{//   0: no compression}}
\DoxyCodeLine{5672    \textcolor{comment}{//   1: RLE compressed}}
\DoxyCodeLine{5673    compression = stbi\_\_get16be(s);}
\DoxyCodeLine{5674    \textcolor{keywordflow}{if} (compression > 1)}
\DoxyCodeLine{5675       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad compression"{}}, \textcolor{stringliteral}{"{}PSD has an unknown compression format"{}});}
\DoxyCodeLine{5676 }
\DoxyCodeLine{5677    \textcolor{comment}{// Check size}}
\DoxyCodeLine{5678    \textcolor{keywordflow}{if} (!stbi\_\_mad3sizes\_valid(4, \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, h, 0))}
\DoxyCodeLine{5679       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}Corrupt PSD"{}});}
\DoxyCodeLine{5680 }
\DoxyCodeLine{5681    \textcolor{comment}{// Create the destination image.}}
\DoxyCodeLine{5682 }
\DoxyCodeLine{5683    \textcolor{keywordflow}{if} (!compression \&\& bitdepth == 16 \&\& bpc == 16) \{}
\DoxyCodeLine{5684       out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(8, \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, h, 0);}
\DoxyCodeLine{5685       ri-\/>bits\_per\_channel = 16;}
\DoxyCodeLine{5686    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{5687       out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(4 * \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}*h);}
\DoxyCodeLine{5688 }
\DoxyCodeLine{5689    \textcolor{keywordflow}{if} (!out) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{5690    pixelCount = \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}*h;}
\DoxyCodeLine{5691 }
\DoxyCodeLine{5692    \textcolor{comment}{// Initialize the data to zero.}}
\DoxyCodeLine{5693    \textcolor{comment}{//memset( out, 0, pixelCount * 4 );}}
\DoxyCodeLine{5694 }
\DoxyCodeLine{5695    \textcolor{comment}{// Finally, the image data.}}
\DoxyCodeLine{5696    \textcolor{keywordflow}{if} (compression) \{}
\DoxyCodeLine{5697       \textcolor{comment}{// RLE as used by .PSD and .TIFF}}
\DoxyCodeLine{5698       \textcolor{comment}{// Loop until you get the number of unpacked bytes you are expecting:}}
\DoxyCodeLine{5699       \textcolor{comment}{//     Read the next source byte into n.}}
\DoxyCodeLine{5700       \textcolor{comment}{//     If n is between 0 and 127 inclusive, copy the next n+1 bytes literally.}}
\DoxyCodeLine{5701       \textcolor{comment}{//     Else if n is between -\/127 and -\/1 inclusive, copy the next byte -\/n+1 times.}}
\DoxyCodeLine{5702       \textcolor{comment}{//     Else if n is 128, noop.}}
\DoxyCodeLine{5703       \textcolor{comment}{// Endloop}}
\DoxyCodeLine{5704 }
\DoxyCodeLine{5705       \textcolor{comment}{// The RLE-\/compressed data is preceeded by a 2-\/byte data count for each row in the data,}}
\DoxyCodeLine{5706       \textcolor{comment}{// which we're going to just skip.}}
\DoxyCodeLine{5707       stbi\_\_skip(s, h * channelCount * 2 );}
\DoxyCodeLine{5708 }
\DoxyCodeLine{5709       \textcolor{comment}{// Read the RLE data by channel.}}
\DoxyCodeLine{5710       \textcolor{keywordflow}{for} (channel = 0; channel < 4; channel++) \{}
\DoxyCodeLine{5711          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p;}
\DoxyCodeLine{5712 }
\DoxyCodeLine{5713          p = out+channel;}
\DoxyCodeLine{5714          \textcolor{keywordflow}{if} (channel >= channelCount) \{}
\DoxyCodeLine{5715             \textcolor{comment}{// Fill this channel with default data.}}
\DoxyCodeLine{5716             \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, p += 4)}
\DoxyCodeLine{5717                *p = (channel == 3 ? 255 : 0);}
\DoxyCodeLine{5718          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5719             \textcolor{comment}{// Read the RLE data.}}
\DoxyCodeLine{5720             \textcolor{keywordflow}{if} (!stbi\_\_psd\_decode\_rle(s, p, pixelCount)) \{}
\DoxyCodeLine{5721                STBI\_FREE(out);}
\DoxyCodeLine{5722                \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}corrupt"{}}, \textcolor{stringliteral}{"{}bad RLE data"{}});}
\DoxyCodeLine{5723             \}}
\DoxyCodeLine{5724          \}}
\DoxyCodeLine{5725       \}}
\DoxyCodeLine{5726 }
\DoxyCodeLine{5727    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5728       \textcolor{comment}{// We're at the raw image data.  It's each channel in order (Red, Green, Blue, Alpha, ...)}}
\DoxyCodeLine{5729       \textcolor{comment}{// where each channel consists of an 8-\/bit (or 16-\/bit) value for each pixel in the image.}}
\DoxyCodeLine{5730 }
\DoxyCodeLine{5731       \textcolor{comment}{// Read the data by channel.}}
\DoxyCodeLine{5732       \textcolor{keywordflow}{for} (channel = 0; channel < 4; channel++) \{}
\DoxyCodeLine{5733          \textcolor{keywordflow}{if} (channel >= channelCount) \{}
\DoxyCodeLine{5734             \textcolor{comment}{// Fill this channel with default data.}}
\DoxyCodeLine{5735             \textcolor{keywordflow}{if} (bitdepth == 16 \&\& bpc == 16) \{}
\DoxyCodeLine{5736                stbi\_\_uint16 *q = ((stbi\_\_uint16 *) out) + channel;}
\DoxyCodeLine{5737                stbi\_\_uint16 val = channel == 3 ? 65535 : 0;}
\DoxyCodeLine{5738                \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, q += 4)}
\DoxyCodeLine{5739                   *q = val;}
\DoxyCodeLine{5740             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5741                \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p = out+channel;}
\DoxyCodeLine{5742                \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} val = channel == 3 ? 255 : 0;}
\DoxyCodeLine{5743                \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, p += 4)}
\DoxyCodeLine{5744                   *p = val;}
\DoxyCodeLine{5745             \}}
\DoxyCodeLine{5746          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5747             \textcolor{keywordflow}{if} (ri-\/>bits\_per\_channel == 16) \{    \textcolor{comment}{// output bpc}}
\DoxyCodeLine{5748                stbi\_\_uint16 *q = ((stbi\_\_uint16 *) out) + channel;}
\DoxyCodeLine{5749                \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, q += 4)}
\DoxyCodeLine{5750                   *q = (stbi\_\_uint16) stbi\_\_get16be(s);}
\DoxyCodeLine{5751             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5752                \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p = out+channel;}
\DoxyCodeLine{5753                \textcolor{keywordflow}{if} (bitdepth == 16) \{  \textcolor{comment}{// input bpc}}
\DoxyCodeLine{5754                   \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, p += 4)}
\DoxyCodeLine{5755                      *p = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (stbi\_\_get16be(s) >> 8);}
\DoxyCodeLine{5756                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5757                   \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, p += 4)}
\DoxyCodeLine{5758                      *p = stbi\_\_get8(s);}
\DoxyCodeLine{5759                \}}
\DoxyCodeLine{5760             \}}
\DoxyCodeLine{5761          \}}
\DoxyCodeLine{5762       \}}
\DoxyCodeLine{5763    \}}
\DoxyCodeLine{5764 }
\DoxyCodeLine{5765    \textcolor{comment}{// remove weird white matte from PSD}}
\DoxyCodeLine{5766    \textcolor{keywordflow}{if} (channelCount >= 4) \{}
\DoxyCodeLine{5767       \textcolor{keywordflow}{if} (ri-\/>bits\_per\_channel == 16) \{}
\DoxyCodeLine{5768          \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}*h; ++i) \{}
\DoxyCodeLine{5769             stbi\_\_uint16 *pixel = (stbi\_\_uint16 *) out + 4*i;}
\DoxyCodeLine{5770             \textcolor{keywordflow}{if} (pixel[3] != 0 \&\& pixel[3] != 65535) \{}
\DoxyCodeLine{5771                \textcolor{keywordtype}{float} a = pixel[3] / 65535.0f;}
\DoxyCodeLine{5772                \textcolor{keywordtype}{float} ra = 1.0f / a;}
\DoxyCodeLine{5773                \textcolor{keywordtype}{float} inv\_a = 65535.0f * (1 -\/ ra);}
\DoxyCodeLine{5774                pixel[0] = (stbi\_\_uint16) (pixel[0]*ra + inv\_a);}
\DoxyCodeLine{5775                pixel[1] = (stbi\_\_uint16) (pixel[1]*ra + inv\_a);}
\DoxyCodeLine{5776                pixel[2] = (stbi\_\_uint16) (pixel[2]*ra + inv\_a);}
\DoxyCodeLine{5777             \}}
\DoxyCodeLine{5778          \}}
\DoxyCodeLine{5779       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5780          \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}*h; ++i) \{}
\DoxyCodeLine{5781             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixel = out + 4*i;}
\DoxyCodeLine{5782             \textcolor{keywordflow}{if} (pixel[3] != 0 \&\& pixel[3] != 255) \{}
\DoxyCodeLine{5783                \textcolor{keywordtype}{float} a = pixel[3] / 255.0f;}
\DoxyCodeLine{5784                \textcolor{keywordtype}{float} ra = 1.0f / a;}
\DoxyCodeLine{5785                \textcolor{keywordtype}{float} inv\_a = 255.0f * (1 -\/ ra);}
\DoxyCodeLine{5786                pixel[0] = (\textcolor{keywordtype}{unsigned} char) (pixel[0]*ra + inv\_a);}
\DoxyCodeLine{5787                pixel[1] = (\textcolor{keywordtype}{unsigned} char) (pixel[1]*ra + inv\_a);}
\DoxyCodeLine{5788                pixel[2] = (\textcolor{keywordtype}{unsigned} char) (pixel[2]*ra + inv\_a);}
\DoxyCodeLine{5789             \}}
\DoxyCodeLine{5790          \}}
\DoxyCodeLine{5791       \}}
\DoxyCodeLine{5792    \}}
\DoxyCodeLine{5793 }
\DoxyCodeLine{5794    \textcolor{comment}{// convert to desired output format}}
\DoxyCodeLine{5795    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != 4) \{}
\DoxyCodeLine{5796       \textcolor{keywordflow}{if} (ri-\/>bits\_per\_channel == 16)}
\DoxyCodeLine{5797          out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_convert\_format16((stbi\_\_uint16 *) out, 4, req\_comp, \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, h);}
\DoxyCodeLine{5798       \textcolor{keywordflow}{else}}
\DoxyCodeLine{5799          out = stbi\_\_convert\_format(out, 4, req\_comp, \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, h);}
\DoxyCodeLine{5800       \textcolor{keywordflow}{if} (out == NULL) \textcolor{keywordflow}{return} out; \textcolor{comment}{// stbi\_\_convert\_format frees input on failure}}
\DoxyCodeLine{5801    \}}
\DoxyCodeLine{5802 }
\DoxyCodeLine{5803    \textcolor{keywordflow}{if} (comp) *comp = 4;}
\DoxyCodeLine{5804    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = h;}
\DoxyCodeLine{5805    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}};}
\DoxyCodeLine{5806 }
\DoxyCodeLine{5807    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{5808 \}}
\DoxyCodeLine{5809 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{5810 }
\DoxyCodeLine{5811 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{5812 \textcolor{comment}{// Softimage PIC loader}}
\DoxyCodeLine{5813 \textcolor{comment}{// by Tom Seddon}}
\DoxyCodeLine{5814 \textcolor{comment}{//}}
\DoxyCodeLine{5815 \textcolor{comment}{// See http://softimage.wiki.softimage.com/index.php/INFO:\_PIC\_file\_format}}
\DoxyCodeLine{5816 \textcolor{comment}{// See http://ozviz.wasp.uwa.edu.au/\string~pbourke/dataformats/softimagepic/}}
\DoxyCodeLine{5817 }
\DoxyCodeLine{5818 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{5819 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_pic\_is4(stbi\_\_context *s,\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classstr}{str}})}
\DoxyCodeLine{5820 \{}
\DoxyCodeLine{5821    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{5822    \textcolor{keywordflow}{for} (i=0; i<4; ++i)}
\DoxyCodeLine{5823       \textcolor{keywordflow}{if} (stbi\_\_get8(s) != (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})\mbox{\hyperlink{classstr}{str}}[i])}
\DoxyCodeLine{5824          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5825 }
\DoxyCodeLine{5826    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5827 \}}
\DoxyCodeLine{5828 }
\DoxyCodeLine{5829 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_pic\_test\_core(stbi\_\_context *s)}
\DoxyCodeLine{5830 \{}
\DoxyCodeLine{5831    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{5832 }
\DoxyCodeLine{5833    \textcolor{keywordflow}{if} (!stbi\_\_pic\_is4(s,\textcolor{stringliteral}{"{}\(\backslash\)x53\(\backslash\)x80\(\backslash\)xF6\(\backslash\)x34"{}}))}
\DoxyCodeLine{5834       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5835 }
\DoxyCodeLine{5836    \textcolor{keywordflow}{for}(i=0;i<84;++i)}
\DoxyCodeLine{5837       stbi\_\_get8(s);}
\DoxyCodeLine{5838 }
\DoxyCodeLine{5839    \textcolor{keywordflow}{if} (!stbi\_\_pic\_is4(s,\textcolor{stringliteral}{"{}PICT"{}}))}
\DoxyCodeLine{5840       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5841 }
\DoxyCodeLine{5842    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5843 \}}
\DoxyCodeLine{5844 }
\DoxyCodeLine{5845 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{5846 \{}
\DoxyCodeLine{5847    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} size,type,channel;}
\DoxyCodeLine{5848 \} stbi\_\_pic\_packet;}
\DoxyCodeLine{5849 }
\DoxyCodeLine{5850 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_readval(stbi\_\_context *s, \textcolor{keywordtype}{int} channel, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *dest)}
\DoxyCodeLine{5851 \{}
\DoxyCodeLine{5852    \textcolor{keywordtype}{int} mask=0x80, i;}
\DoxyCodeLine{5853 }
\DoxyCodeLine{5854    \textcolor{keywordflow}{for} (i=0; i<4; ++i, mask>>=1) \{}
\DoxyCodeLine{5855       \textcolor{keywordflow}{if} (channel \& mask) \{}
\DoxyCodeLine{5856          \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s)) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}PIC file too short"{}});}
\DoxyCodeLine{5857          dest[i]=stbi\_\_get8(s);}
\DoxyCodeLine{5858       \}}
\DoxyCodeLine{5859    \}}
\DoxyCodeLine{5860 }
\DoxyCodeLine{5861    \textcolor{keywordflow}{return} dest;}
\DoxyCodeLine{5862 \}}
\DoxyCodeLine{5863 }
\DoxyCodeLine{5864 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_copyval(\textcolor{keywordtype}{int} channel,\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *dest,\textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *src)}
\DoxyCodeLine{5865 \{}
\DoxyCodeLine{5866    \textcolor{keywordtype}{int} mask=0x80,i;}
\DoxyCodeLine{5867 }
\DoxyCodeLine{5868    \textcolor{keywordflow}{for} (i=0;i<4; ++i, mask>>=1)}
\DoxyCodeLine{5869       \textcolor{keywordflow}{if} (channel\&mask)}
\DoxyCodeLine{5870          dest[i]=src[i];}
\DoxyCodeLine{5871 \}}
\DoxyCodeLine{5872 }
\DoxyCodeLine{5873 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pic\_load\_core(stbi\_\_context *s,\textcolor{keywordtype}{int} width,\textcolor{keywordtype}{int} height,\textcolor{keywordtype}{int} *comp, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *result)}
\DoxyCodeLine{5874 \{}
\DoxyCodeLine{5875    \textcolor{keywordtype}{int} act\_comp=0,num\_packets=0,\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},chained;}
\DoxyCodeLine{5876    stbi\_\_pic\_packet packets[10];}
\DoxyCodeLine{5877 }
\DoxyCodeLine{5878    \textcolor{comment}{// this will (should...) cater for even some bizarre stuff like having data}}
\DoxyCodeLine{5879     \textcolor{comment}{// for the same channel in multiple packets.}}
\DoxyCodeLine{5880    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{5881       stbi\_\_pic\_packet *packet;}
\DoxyCodeLine{5882 }
\DoxyCodeLine{5883       \textcolor{keywordflow}{if} (num\_packets==\textcolor{keyword}{sizeof}(packets)/\textcolor{keyword}{sizeof}(packets[0]))}
\DoxyCodeLine{5884          \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad format"{}},\textcolor{stringliteral}{"{}too many packets"{}});}
\DoxyCodeLine{5885 }
\DoxyCodeLine{5886       packet = \&packets[num\_packets++];}
\DoxyCodeLine{5887 }
\DoxyCodeLine{5888       chained = stbi\_\_get8(s);}
\DoxyCodeLine{5889       packet-\/>size    = stbi\_\_get8(s);}
\DoxyCodeLine{5890       packet-\/>type    = stbi\_\_get8(s);}
\DoxyCodeLine{5891       packet-\/>channel = stbi\_\_get8(s);}
\DoxyCodeLine{5892 }
\DoxyCodeLine{5893       act\_comp |= packet-\/>channel;}
\DoxyCodeLine{5894 }
\DoxyCodeLine{5895       \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s))          \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}file too short (reading packets)"{}});}
\DoxyCodeLine{5896       \textcolor{keywordflow}{if} (packet-\/>size != 8)  \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad format"{}},\textcolor{stringliteral}{"{}packet isn't 8bpp"{}});}
\DoxyCodeLine{5897    \} \textcolor{keywordflow}{while} (chained);}
\DoxyCodeLine{5898 }
\DoxyCodeLine{5899    *comp = (act\_comp \& 0x10 ? 4 : 3); \textcolor{comment}{// has alpha channel?}}
\DoxyCodeLine{5900 }
\DoxyCodeLine{5901    \textcolor{keywordflow}{for}(\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}=0; \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}<height; ++\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) \{}
\DoxyCodeLine{5902       \textcolor{keywordtype}{int} packet\_idx;}
\DoxyCodeLine{5903 }
\DoxyCodeLine{5904       \textcolor{keywordflow}{for}(packet\_idx=0; packet\_idx < num\_packets; ++packet\_idx) \{}
\DoxyCodeLine{5905          stbi\_\_pic\_packet *packet = \&packets[packet\_idx];}
\DoxyCodeLine{5906          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *dest = result+\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}*width*4;}
\DoxyCodeLine{5907 }
\DoxyCodeLine{5908          \textcolor{keywordflow}{switch} (packet-\/>type) \{}
\DoxyCodeLine{5909             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{5910                \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad format"{}},\textcolor{stringliteral}{"{}packet has bad compression type"{}});}
\DoxyCodeLine{5911 }
\DoxyCodeLine{5912             \textcolor{keywordflow}{case} 0: \{\textcolor{comment}{//uncompressed}}
\DoxyCodeLine{5913                \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}};}
\DoxyCodeLine{5914 }
\DoxyCodeLine{5915                \textcolor{keywordflow}{for}(\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}=0;\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}<width;++\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, dest+=4)}
\DoxyCodeLine{5916                   \textcolor{keywordflow}{if} (!stbi\_\_readval(s,packet-\/>channel,dest))}
\DoxyCodeLine{5917                      \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5918                \textcolor{keywordflow}{break};}
\DoxyCodeLine{5919             \}}
\DoxyCodeLine{5920 }
\DoxyCodeLine{5921             \textcolor{keywordflow}{case} 1:\textcolor{comment}{//Pure RLE}}
\DoxyCodeLine{5922                \{}
\DoxyCodeLine{5923                   \textcolor{keywordtype}{int} left=width, i;}
\DoxyCodeLine{5924 }
\DoxyCodeLine{5925                   \textcolor{keywordflow}{while} (left>0) \{}
\DoxyCodeLine{5926                      \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} count,value[4];}
\DoxyCodeLine{5927 }
\DoxyCodeLine{5928                      count=stbi\_\_get8(s);}
\DoxyCodeLine{5929                      \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s))   \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}file too short (pure read count)"{}});}
\DoxyCodeLine{5930 }
\DoxyCodeLine{5931                      \textcolor{keywordflow}{if} (count > left)}
\DoxyCodeLine{5932                         count = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) left;}
\DoxyCodeLine{5933 }
\DoxyCodeLine{5934                      \textcolor{keywordflow}{if} (!stbi\_\_readval(s,packet-\/>channel,value))  \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5935 }
\DoxyCodeLine{5936                      \textcolor{keywordflow}{for}(i=0; i<count; ++i,dest+=4)}
\DoxyCodeLine{5937                         stbi\_\_copyval(packet-\/>channel,dest,value);}
\DoxyCodeLine{5938                      left -\/= count;}
\DoxyCodeLine{5939                   \}}
\DoxyCodeLine{5940                \}}
\DoxyCodeLine{5941                \textcolor{keywordflow}{break};}
\DoxyCodeLine{5942 }
\DoxyCodeLine{5943             \textcolor{keywordflow}{case} 2: \{\textcolor{comment}{//Mixed RLE}}
\DoxyCodeLine{5944                \textcolor{keywordtype}{int} left=width;}
\DoxyCodeLine{5945                \textcolor{keywordflow}{while} (left>0) \{}
\DoxyCodeLine{5946                   \textcolor{keywordtype}{int} count = stbi\_\_get8(s), i;}
\DoxyCodeLine{5947                   \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s))  \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}file too short (mixed read count)"{}});}
\DoxyCodeLine{5948 }
\DoxyCodeLine{5949                   \textcolor{keywordflow}{if} (count >= 128) \{ \textcolor{comment}{// Repeated}}
\DoxyCodeLine{5950                      \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} value[4];}
\DoxyCodeLine{5951 }
\DoxyCodeLine{5952                      \textcolor{keywordflow}{if} (count==128)}
\DoxyCodeLine{5953                         count = stbi\_\_get16be(s);}
\DoxyCodeLine{5954                      \textcolor{keywordflow}{else}}
\DoxyCodeLine{5955                         count -\/= 127;}
\DoxyCodeLine{5956                      \textcolor{keywordflow}{if} (count > left)}
\DoxyCodeLine{5957                         \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}scanline overrun"{}});}
\DoxyCodeLine{5958 }
\DoxyCodeLine{5959                      \textcolor{keywordflow}{if} (!stbi\_\_readval(s,packet-\/>channel,value))}
\DoxyCodeLine{5960                         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5961 }
\DoxyCodeLine{5962                      \textcolor{keywordflow}{for}(i=0;i<count;++i, dest += 4)}
\DoxyCodeLine{5963                         stbi\_\_copyval(packet-\/>channel,dest,value);}
\DoxyCodeLine{5964                   \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// Raw}}
\DoxyCodeLine{5965                      ++count;}
\DoxyCodeLine{5966                      \textcolor{keywordflow}{if} (count>left) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}scanline overrun"{}});}
\DoxyCodeLine{5967 }
\DoxyCodeLine{5968                      \textcolor{keywordflow}{for}(i=0;i<count;++i, dest+=4)}
\DoxyCodeLine{5969                         \textcolor{keywordflow}{if} (!stbi\_\_readval(s,packet-\/>channel,dest))}
\DoxyCodeLine{5970                            \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5971                   \}}
\DoxyCodeLine{5972                   left-\/=count;}
\DoxyCodeLine{5973                \}}
\DoxyCodeLine{5974                \textcolor{keywordflow}{break};}
\DoxyCodeLine{5975             \}}
\DoxyCodeLine{5976          \}}
\DoxyCodeLine{5977       \}}
\DoxyCodeLine{5978    \}}
\DoxyCodeLine{5979 }
\DoxyCodeLine{5980    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{5981 \}}
\DoxyCodeLine{5982 }
\DoxyCodeLine{5983 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_pic\_load(stbi\_\_context *s,\textcolor{keywordtype}{int} *px,\textcolor{keywordtype}{int} *\mbox{\hyperlink{namespacepybind11}{py}},\textcolor{keywordtype}{int} *comp,\textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{5984 \{}
\DoxyCodeLine{5985    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *result;}
\DoxyCodeLine{5986    \textcolor{keywordtype}{int} i, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, internal\_comp;}
\DoxyCodeLine{5987    STBI\_NOTUSED(ri);}
\DoxyCodeLine{5988 }
\DoxyCodeLine{5989    \textcolor{keywordflow}{if} (!comp) comp = \&internal\_comp;}
\DoxyCodeLine{5990 }
\DoxyCodeLine{5991    \textcolor{keywordflow}{for} (i=0; i<92; ++i)}
\DoxyCodeLine{5992       stbi\_\_get8(s);}
\DoxyCodeLine{5993 }
\DoxyCodeLine{5994    \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = stbi\_\_get16be(s);}
\DoxyCodeLine{5995    \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = stbi\_\_get16be(s);}
\DoxyCodeLine{5996    \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s))  \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}file too short (pic header)"{}});}
\DoxyCodeLine{5997    \textcolor{keywordflow}{if} (!stbi\_\_mad3sizes\_valid(\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, 4, 0)) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}PIC image too large to decode"{}});}
\DoxyCodeLine{5998 }
\DoxyCodeLine{5999    stbi\_\_get32be(s); \textcolor{comment}{//skip `ratio'}}
\DoxyCodeLine{6000    stbi\_\_get16be(s); \textcolor{comment}{//skip `fields'}}
\DoxyCodeLine{6001    stbi\_\_get16be(s); \textcolor{comment}{//skip `pad'}}
\DoxyCodeLine{6002 }
\DoxyCodeLine{6003    \textcolor{comment}{// intermediate buffer is RGBA}}
\DoxyCodeLine{6004    result = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, 4, 0);}
\DoxyCodeLine{6005    memset(result, 0xff, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}*\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}*4);}
\DoxyCodeLine{6006 }
\DoxyCodeLine{6007    \textcolor{keywordflow}{if} (!stbi\_\_pic\_load\_core(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp, result)) \{}
\DoxyCodeLine{6008       STBI\_FREE(result);}
\DoxyCodeLine{6009       result=0;}
\DoxyCodeLine{6010    \}}
\DoxyCodeLine{6011    *px = \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}};}
\DoxyCodeLine{6012    *\mbox{\hyperlink{namespacepybind11}{py}} = \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}};}
\DoxyCodeLine{6013    \textcolor{keywordflow}{if} (req\_comp == 0) req\_comp = *comp;}
\DoxyCodeLine{6014    result=stbi\_\_convert\_format(result,4,req\_comp,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}});}
\DoxyCodeLine{6015 }
\DoxyCodeLine{6016    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{6017 \}}
\DoxyCodeLine{6018 }
\DoxyCodeLine{6019 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_pic\_test(stbi\_\_context *s)}
\DoxyCodeLine{6020 \{}
\DoxyCodeLine{6021    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_pic\_test\_core(s);}
\DoxyCodeLine{6022    stbi\_\_rewind(s);}
\DoxyCodeLine{6023    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{6024 \}}
\DoxyCodeLine{6025 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6026 }
\DoxyCodeLine{6027 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{6028 \textcolor{comment}{// GIF loader -\/-\/ public domain by Jean-\/Marc Lienher -\/-\/ simplified/shrunk by stb}}
\DoxyCodeLine{6029 }
\DoxyCodeLine{6030 \textcolor{preprocessor}{\#ifndef STBI\_NO\_GIF}}
\DoxyCodeLine{6031 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{6032 \{}
\DoxyCodeLine{6033    stbi\_\_int16 prefix;}
\DoxyCodeLine{6034    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}};}
\DoxyCodeLine{6035    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} suffix;}
\DoxyCodeLine{6036 \} stbi\_\_gif\_lzw;}
\DoxyCodeLine{6037 }
\DoxyCodeLine{6038 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{6039 \{}
\DoxyCodeLine{6040    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}},h;}
\DoxyCodeLine{6041    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, *old\_out;             \textcolor{comment}{// output buffer (always 4 components)}}
\DoxyCodeLine{6042    \textcolor{keywordtype}{int} flags, bgindex, ratio, transparent, eflags, delay;}
\DoxyCodeLine{6043    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  pal[256][4];}
\DoxyCodeLine{6044    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} lpal[256][4];}
\DoxyCodeLine{6045    stbi\_\_gif\_lzw codes[4096];}
\DoxyCodeLine{6046    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *color\_table;}
\DoxyCodeLine{6047    \textcolor{keywordtype}{int} parse, step;}
\DoxyCodeLine{6048    \textcolor{keywordtype}{int} lflags;}
\DoxyCodeLine{6049    \textcolor{keywordtype}{int} start\_x, start\_y;}
\DoxyCodeLine{6050    \textcolor{keywordtype}{int} max\_x, max\_y;}
\DoxyCodeLine{6051    \textcolor{keywordtype}{int} cur\_x, cur\_y;}
\DoxyCodeLine{6052    \textcolor{keywordtype}{int} line\_size;}
\DoxyCodeLine{6053 \} stbi\_\_gif;}
\DoxyCodeLine{6054 }
\DoxyCodeLine{6055 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_test\_raw(stbi\_\_context *s)}
\DoxyCodeLine{6056 \{}
\DoxyCodeLine{6057    \textcolor{keywordtype}{int} sz;}
\DoxyCodeLine{6058    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'G'} || stbi\_\_get8(s) != \textcolor{charliteral}{'I'} || stbi\_\_get8(s) != \textcolor{charliteral}{'F'} || stbi\_\_get8(s) != \textcolor{charliteral}{'8'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6059    sz = stbi\_\_get8(s);}
\DoxyCodeLine{6060    \textcolor{keywordflow}{if} (sz != \textcolor{charliteral}{'9'} \&\& sz != \textcolor{charliteral}{'7'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6061    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'a'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6062    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6063 \}}
\DoxyCodeLine{6064 }
\DoxyCodeLine{6065 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_test(stbi\_\_context *s)}
\DoxyCodeLine{6066 \{}
\DoxyCodeLine{6067    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_gif\_test\_raw(s);}
\DoxyCodeLine{6068    stbi\_\_rewind(s);}
\DoxyCodeLine{6069    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{6070 \}}
\DoxyCodeLine{6071 }
\DoxyCodeLine{6072 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_gif\_parse\_colortable(stbi\_\_context *s, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} pal[256][4], \textcolor{keywordtype}{int} num\_entries, \textcolor{keywordtype}{int} transp)}
\DoxyCodeLine{6073 \{}
\DoxyCodeLine{6074    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{6075    \textcolor{keywordflow}{for} (i=0; i < num\_entries; ++i) \{}
\DoxyCodeLine{6076       pal[i][2] = stbi\_\_get8(s);}
\DoxyCodeLine{6077       pal[i][1] = stbi\_\_get8(s);}
\DoxyCodeLine{6078       pal[i][0] = stbi\_\_get8(s);}
\DoxyCodeLine{6079       pal[i][3] = transp == i ? 0 : 255;}
\DoxyCodeLine{6080    \}}
\DoxyCodeLine{6081 \}}
\DoxyCodeLine{6082 }
\DoxyCodeLine{6083 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_header(stbi\_\_context *s, stbi\_\_gif *\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} is\_info)}
\DoxyCodeLine{6084 \{}
\DoxyCodeLine{6085    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} version;}
\DoxyCodeLine{6086    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'G'} || stbi\_\_get8(s) != \textcolor{charliteral}{'I'} || stbi\_\_get8(s) != \textcolor{charliteral}{'F'} || stbi\_\_get8(s) != \textcolor{charliteral}{'8'})}
\DoxyCodeLine{6087       \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}not GIF"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6088 }
\DoxyCodeLine{6089    version = stbi\_\_get8(s);}
\DoxyCodeLine{6090    \textcolor{keywordflow}{if} (version != \textcolor{charliteral}{'7'} \&\& version != \textcolor{charliteral}{'9'})    \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}not GIF"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6091    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'a'})                \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}not GIF"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6092 }
\DoxyCodeLine{6093    stbi\_\_g\_failure\_reason = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{6094    \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w = stbi\_\_get16le(s);}
\DoxyCodeLine{6095    \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h = stbi\_\_get16le(s);}
\DoxyCodeLine{6096    \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>flags = stbi\_\_get8(s);}
\DoxyCodeLine{6097    \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>bgindex = stbi\_\_get8(s);}
\DoxyCodeLine{6098    \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>ratio = stbi\_\_get8(s);}
\DoxyCodeLine{6099    \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>transparent = -\/1;}
\DoxyCodeLine{6100 }
\DoxyCodeLine{6101    \textcolor{keywordflow}{if} (comp != 0) *comp = 4;  \textcolor{comment}{// can't actually tell whether it's 3 or 4 until we parse the comments}}
\DoxyCodeLine{6102 }
\DoxyCodeLine{6103    \textcolor{keywordflow}{if} (is\_info) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6104 }
\DoxyCodeLine{6105    \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>flags \& 0x80)}
\DoxyCodeLine{6106       stbi\_\_gif\_parse\_colortable(s,\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>pal, 2 << (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>flags \& 7), -\/1);}
\DoxyCodeLine{6107 }
\DoxyCodeLine{6108    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6109 \}}
\DoxyCodeLine{6110 }
\DoxyCodeLine{6111 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_info\_raw(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6112 \{}
\DoxyCodeLine{6113    stbi\_\_gif* \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = (stbi\_\_gif*) stbi\_\_malloc(\textcolor{keyword}{sizeof}(stbi\_\_gif));}
\DoxyCodeLine{6114    \textcolor{keywordflow}{if} (!stbi\_\_gif\_header(s, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, comp, 1)) \{}
\DoxyCodeLine{6115       STBI\_FREE(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}});}
\DoxyCodeLine{6116       stbi\_\_rewind( s );}
\DoxyCodeLine{6117       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6118    \}}
\DoxyCodeLine{6119    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w;}
\DoxyCodeLine{6120    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h;}
\DoxyCodeLine{6121    STBI\_FREE(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}});}
\DoxyCodeLine{6122    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6123 \}}
\DoxyCodeLine{6124 }
\DoxyCodeLine{6125 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_out\_gif\_code(stbi\_\_gif *\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, stbi\_\_uint16 code)}
\DoxyCodeLine{6126 \{}
\DoxyCodeLine{6127    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p, *c;}
\DoxyCodeLine{6128 }
\DoxyCodeLine{6129    \textcolor{comment}{// recurse to decode the prefixes, since the linked-\/list is backwards,}}
\DoxyCodeLine{6130    \textcolor{comment}{// and working backwards through an interleaved image would be nasty}}
\DoxyCodeLine{6131    \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[code].prefix >= 0)}
\DoxyCodeLine{6132       stbi\_\_out\_gif\_code(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[code].prefix);}
\DoxyCodeLine{6133 }
\DoxyCodeLine{6134    \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_y >= \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>max\_y) \textcolor{keywordflow}{return};}
\DoxyCodeLine{6135 }
\DoxyCodeLine{6136    p = \&\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out[\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_x + \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_y];}
\DoxyCodeLine{6137    c = \&\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>color\_table[\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[code].suffix * 4];}
\DoxyCodeLine{6138 }
\DoxyCodeLine{6139    \textcolor{keywordflow}{if} (c[3] >= 128) \{}
\DoxyCodeLine{6140       p[0] = c[2];}
\DoxyCodeLine{6141       p[1] = c[1];}
\DoxyCodeLine{6142       p[2] = c[0];}
\DoxyCodeLine{6143       p[3] = c[3];}
\DoxyCodeLine{6144    \}}
\DoxyCodeLine{6145    \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_x += 4;}
\DoxyCodeLine{6146 }
\DoxyCodeLine{6147    \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_x >= \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>max\_x) \{}
\DoxyCodeLine{6148       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_x = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_x;}
\DoxyCodeLine{6149       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_y += \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>step;}
\DoxyCodeLine{6150 }
\DoxyCodeLine{6151       \textcolor{keywordflow}{while} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_y >= \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>max\_y \&\& \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>parse > 0) \{}
\DoxyCodeLine{6152          \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>step = (1 << \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>parse) * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>line\_size;}
\DoxyCodeLine{6153          \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_y = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_y + (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>step >> 1);}
\DoxyCodeLine{6154          -\/-\/\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>parse;}
\DoxyCodeLine{6155       \}}
\DoxyCodeLine{6156    \}}
\DoxyCodeLine{6157 \}}
\DoxyCodeLine{6158 }
\DoxyCodeLine{6159 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_process\_gif\_raster(stbi\_\_context *s, stbi\_\_gif *\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}})}
\DoxyCodeLine{6160 \{}
\DoxyCodeLine{6161    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} lzw\_cs;}
\DoxyCodeLine{6162    stbi\_\_int32 \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, init\_code;}
\DoxyCodeLine{6163    stbi\_\_uint32 \mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}};}
\DoxyCodeLine{6164    stbi\_\_int32 codesize, codemask, avail, oldcode, bits, valid\_bits, clear;}
\DoxyCodeLine{6165    stbi\_\_gif\_lzw *p;}
\DoxyCodeLine{6166 }
\DoxyCodeLine{6167    lzw\_cs = stbi\_\_get8(s);}
\DoxyCodeLine{6168    \textcolor{keywordflow}{if} (lzw\_cs > 12) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{6169    clear = 1 << lzw\_cs;}
\DoxyCodeLine{6170    \mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}} = 1;}
\DoxyCodeLine{6171    codesize = lzw\_cs + 1;}
\DoxyCodeLine{6172    codemask = (1 << codesize) -\/ 1;}
\DoxyCodeLine{6173    bits = 0;}
\DoxyCodeLine{6174    valid\_bits = 0;}
\DoxyCodeLine{6175    \textcolor{keywordflow}{for} (init\_code = 0; init\_code < clear; init\_code++) \{}
\DoxyCodeLine{6176       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[init\_code].prefix = -\/1;}
\DoxyCodeLine{6177       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[init\_code].first = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) init\_code;}
\DoxyCodeLine{6178       \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[init\_code].suffix = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) init\_code;}
\DoxyCodeLine{6179    \}}
\DoxyCodeLine{6180 }
\DoxyCodeLine{6181    \textcolor{comment}{// support no starting clear code}}
\DoxyCodeLine{6182    avail = clear+2;}
\DoxyCodeLine{6183    oldcode = -\/1;}
\DoxyCodeLine{6184 }
\DoxyCodeLine{6185    \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = 0;}
\DoxyCodeLine{6186    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{6187       \textcolor{keywordflow}{if} (valid\_bits < codesize) \{}
\DoxyCodeLine{6188          \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} == 0) \{}
\DoxyCodeLine{6189             \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = stbi\_\_get8(s); \textcolor{comment}{// start new block}}
\DoxyCodeLine{6190             \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} == 0)}
\DoxyCodeLine{6191                \textcolor{keywordflow}{return} \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out;}
\DoxyCodeLine{6192          \}}
\DoxyCodeLine{6193          -\/-\/\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{6194          bits |= (stbi\_\_int32) stbi\_\_get8(s) << valid\_bits;}
\DoxyCodeLine{6195          valid\_bits += 8;}
\DoxyCodeLine{6196       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6197          stbi\_\_int32 code = bits \& codemask;}
\DoxyCodeLine{6198          bits >>= codesize;}
\DoxyCodeLine{6199          valid\_bits -\/= codesize;}
\DoxyCodeLine{6200          \textcolor{comment}{// @OPTIMIZE: is there some way we can accelerate the non-\/clear path?}}
\DoxyCodeLine{6201          \textcolor{keywordflow}{if} (code == clear) \{  \textcolor{comment}{// clear code}}
\DoxyCodeLine{6202             codesize = lzw\_cs + 1;}
\DoxyCodeLine{6203             codemask = (1 << codesize) -\/ 1;}
\DoxyCodeLine{6204             avail = clear + 2;}
\DoxyCodeLine{6205             oldcode = -\/1;}
\DoxyCodeLine{6206             \mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}} = 0;}
\DoxyCodeLine{6207          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (code == clear + 1) \{ \textcolor{comment}{// end of stream code}}
\DoxyCodeLine{6208             stbi\_\_skip(s, \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{6209             \textcolor{keywordflow}{while} ((\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = stbi\_\_get8(s)) > 0)}
\DoxyCodeLine{6210                stbi\_\_skip(s,\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{6211             \textcolor{keywordflow}{return} \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out;}
\DoxyCodeLine{6212          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (code <= avail) \{}
\DoxyCodeLine{6213             \textcolor{keywordflow}{if} (\mbox{\hyperlink{detail_2common_8h_a71226eea81f24762754f1413e2ead78f}{first}}) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}no clear code"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6214 }
\DoxyCodeLine{6215             \textcolor{keywordflow}{if} (oldcode >= 0) \{}
\DoxyCodeLine{6216                p = \&\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[avail++];}
\DoxyCodeLine{6217                \textcolor{keywordflow}{if} (avail > 4096)        \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}too many codes"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6218                p-\/>prefix = (stbi\_\_int16) oldcode;}
\DoxyCodeLine{6219                p-\/>first = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[oldcode].first;}
\DoxyCodeLine{6220                p-\/>suffix = (code == avail) ? p-\/>first : \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>codes[code].first;}
\DoxyCodeLine{6221             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (code == avail)}
\DoxyCodeLine{6222                \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}illegal code in raster"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6223 }
\DoxyCodeLine{6224             stbi\_\_out\_gif\_code(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, (stbi\_\_uint16) code);}
\DoxyCodeLine{6225 }
\DoxyCodeLine{6226             \textcolor{keywordflow}{if} ((avail \& codemask) == 0 \&\& avail <= 0x0FFF) \{}
\DoxyCodeLine{6227                codesize++;}
\DoxyCodeLine{6228                codemask = (1 << codesize) -\/ 1;}
\DoxyCodeLine{6229             \}}
\DoxyCodeLine{6230 }
\DoxyCodeLine{6231             oldcode = code;}
\DoxyCodeLine{6232          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6233             \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}illegal code in raster"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6234          \}}
\DoxyCodeLine{6235       \}}
\DoxyCodeLine{6236    \}}
\DoxyCodeLine{6237 \}}
\DoxyCodeLine{6238 }
\DoxyCodeLine{6239 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_fill\_gif\_background(stbi\_\_gif *\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, \textcolor{keywordtype}{int} x0, \textcolor{keywordtype}{int} y0, \textcolor{keywordtype}{int} x1, \textcolor{keywordtype}{int} y1)}
\DoxyCodeLine{6240 \{}
\DoxyCodeLine{6241    \textcolor{keywordtype}{int} \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}};}
\DoxyCodeLine{6242    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *c = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>pal[\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>bgindex];}
\DoxyCodeLine{6243    \textcolor{keywordflow}{for} (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = y0; \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} < y1; \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} += 4 * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w) \{}
\DoxyCodeLine{6244       \textcolor{keywordflow}{for} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = x0; \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} < x1; \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} += 4) \{}
\DoxyCodeLine{6245          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p  = \&\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out[\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} + \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}];}
\DoxyCodeLine{6246          p[0] = c[2];}
\DoxyCodeLine{6247          p[1] = c[1];}
\DoxyCodeLine{6248          p[2] = c[0];}
\DoxyCodeLine{6249          p[3] = 0;}
\DoxyCodeLine{6250       \}}
\DoxyCodeLine{6251    \}}
\DoxyCodeLine{6252 \}}
\DoxyCodeLine{6253 }
\DoxyCodeLine{6254 \textcolor{comment}{// this function is designed to support animated gifs, although stb\_image doesn't support it}}
\DoxyCodeLine{6255 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_gif\_load\_next(stbi\_\_context *s, stbi\_\_gif *\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{6256 \{}
\DoxyCodeLine{6257    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{6258    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *prev\_out = 0;}
\DoxyCodeLine{6259 }
\DoxyCodeLine{6260    \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out == 0 \&\& !stbi\_\_gif\_header(s, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, comp,0))}
\DoxyCodeLine{6261       \textcolor{keywordflow}{return} 0; \textcolor{comment}{// stbi\_\_g\_failure\_reason set by stbi\_\_gif\_header}}
\DoxyCodeLine{6262 }
\DoxyCodeLine{6263    \textcolor{keywordflow}{if} (!stbi\_\_mad3sizes\_valid(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h, 4, 0))}
\DoxyCodeLine{6264       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}GIF too large"{}});}
\DoxyCodeLine{6265 }
\DoxyCodeLine{6266    prev\_out = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out;}
\DoxyCodeLine{6267    \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(4, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h, 0);}
\DoxyCodeLine{6268    \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out == 0) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{6269 }
\DoxyCodeLine{6270    \textcolor{keywordflow}{switch} ((\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>eflags \& 0x1C) >> 2) \{}
\DoxyCodeLine{6271       \textcolor{keywordflow}{case} 0: \textcolor{comment}{// unspecified (also always used on 1st frame)}}
\DoxyCodeLine{6272          stbi\_\_fill\_gif\_background(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, 0, 0, 4 * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w, 4 * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h);}
\DoxyCodeLine{6273          \textcolor{keywordflow}{break};}
\DoxyCodeLine{6274       \textcolor{keywordflow}{case} 1: \textcolor{comment}{// do not dispose}}
\DoxyCodeLine{6275          \textcolor{keywordflow}{if} (prev\_out) memcpy(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out, prev\_out, 4 * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h);}
\DoxyCodeLine{6276          \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>old\_out = prev\_out;}
\DoxyCodeLine{6277          \textcolor{keywordflow}{break};}
\DoxyCodeLine{6278       \textcolor{keywordflow}{case} 2: \textcolor{comment}{// dispose to background}}
\DoxyCodeLine{6279          \textcolor{keywordflow}{if} (prev\_out) memcpy(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out, prev\_out, 4 * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h);}
\DoxyCodeLine{6280          stbi\_\_fill\_gif\_background(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_x, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_y, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>max\_x, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>max\_y);}
\DoxyCodeLine{6281          \textcolor{keywordflow}{break};}
\DoxyCodeLine{6282       \textcolor{keywordflow}{case} 3: \textcolor{comment}{// dispose to previous}}
\DoxyCodeLine{6283          \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>old\_out) \{}
\DoxyCodeLine{6284             \textcolor{keywordflow}{for} (i = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_y; i < g-\/>max\_y; i += 4 * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w)}
\DoxyCodeLine{6285                memcpy(\&\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out[i + \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_x], \&\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>old\_out[i + \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_x], \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>max\_x -\/ \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_x);}
\DoxyCodeLine{6286          \}}
\DoxyCodeLine{6287          \textcolor{keywordflow}{break};}
\DoxyCodeLine{6288    \}}
\DoxyCodeLine{6289 }
\DoxyCodeLine{6290    \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{6291       \textcolor{keywordflow}{switch} (stbi\_\_get8(s)) \{}
\DoxyCodeLine{6292          \textcolor{keywordflow}{case} 0x2C: \textcolor{comment}{/* Image Descriptor */}}
\DoxyCodeLine{6293          \{}
\DoxyCodeLine{6294             \textcolor{keywordtype}{int} prev\_trans = -\/1;}
\DoxyCodeLine{6295             stbi\_\_int32 \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}, h;}
\DoxyCodeLine{6296             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *o;}
\DoxyCodeLine{6297 }
\DoxyCodeLine{6298             \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = stbi\_\_get16le(s);}
\DoxyCodeLine{6299             \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = stbi\_\_get16le(s);}
\DoxyCodeLine{6300             \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} = stbi\_\_get16le(s);}
\DoxyCodeLine{6301             h = stbi\_\_get16le(s);}
\DoxyCodeLine{6302             \textcolor{keywordflow}{if} (((\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} + \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}}) > (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w)) || ((\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} + h) > (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h)))}
\DoxyCodeLine{6303                \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}bad Image Descriptor"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6304 }
\DoxyCodeLine{6305             \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>line\_size = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w * 4;}
\DoxyCodeLine{6306             \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_x = \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} * 4;}
\DoxyCodeLine{6307             \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_y = \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>line\_size;}
\DoxyCodeLine{6308             \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>max\_x   = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_x + \mbox{\hyperlink{namespacenvinfer1_abbfdeb9b425ae9b70088a3d288670867}{w}} * 4;}
\DoxyCodeLine{6309             \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>max\_y   = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_y + h * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>line\_size;}
\DoxyCodeLine{6310             \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_x   = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_x;}
\DoxyCodeLine{6311             \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>cur\_y   = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>start\_y;}
\DoxyCodeLine{6312 }
\DoxyCodeLine{6313             \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>lflags = stbi\_\_get8(s);}
\DoxyCodeLine{6314 }
\DoxyCodeLine{6315             \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>lflags \& 0x40) \{}
\DoxyCodeLine{6316                \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>step = 8 * \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>line\_size; \textcolor{comment}{// first interlaced spacing}}
\DoxyCodeLine{6317                \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>parse = 3;}
\DoxyCodeLine{6318             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6319                \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>step = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>line\_size;}
\DoxyCodeLine{6320                \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>parse = 0;}
\DoxyCodeLine{6321             \}}
\DoxyCodeLine{6322 }
\DoxyCodeLine{6323             \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>lflags \& 0x80) \{}
\DoxyCodeLine{6324                stbi\_\_gif\_parse\_colortable(s,\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>lpal, 2 << (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>lflags \& 7), \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>eflags \& 0x01 ? \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>transparent : -\/1);}
\DoxyCodeLine{6325                \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>color\_table = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>lpal;}
\DoxyCodeLine{6326             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>flags \& 0x80) \{}
\DoxyCodeLine{6327                \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>transparent >= 0 \&\& (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>eflags \& 0x01)) \{}
\DoxyCodeLine{6328                   prev\_trans = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>pal[\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>transparent][3];}
\DoxyCodeLine{6329                   \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>pal[\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>transparent][3] = 0;}
\DoxyCodeLine{6330                \}}
\DoxyCodeLine{6331                \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>color\_table = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>pal;}
\DoxyCodeLine{6332             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{6333                \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}missing color table"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6334 }
\DoxyCodeLine{6335             o = stbi\_\_process\_gif\_raster(s, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}});}
\DoxyCodeLine{6336             \textcolor{keywordflow}{if} (o == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{6337 }
\DoxyCodeLine{6338             \textcolor{keywordflow}{if} (prev\_trans != -\/1)}
\DoxyCodeLine{6339                \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>pal[\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>transparent][3] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) prev\_trans;}
\DoxyCodeLine{6340 }
\DoxyCodeLine{6341             \textcolor{keywordflow}{return} o;}
\DoxyCodeLine{6342          \}}
\DoxyCodeLine{6343 }
\DoxyCodeLine{6344          \textcolor{keywordflow}{case} 0x21: \textcolor{comment}{// Comment Extension.}}
\DoxyCodeLine{6345          \{}
\DoxyCodeLine{6346             \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{6347             \textcolor{keywordflow}{if} (stbi\_\_get8(s) == 0xF9) \{ \textcolor{comment}{// Graphic Control Extension.}}
\DoxyCodeLine{6348                \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = stbi\_\_get8(s);}
\DoxyCodeLine{6349                \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} == 4) \{}
\DoxyCodeLine{6350                   \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>eflags = stbi\_\_get8(s);}
\DoxyCodeLine{6351                   \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>delay = stbi\_\_get16le(s);}
\DoxyCodeLine{6352                   \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>transparent = stbi\_\_get8(s);}
\DoxyCodeLine{6353                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6354                   stbi\_\_skip(s, \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{6355                   \textcolor{keywordflow}{break};}
\DoxyCodeLine{6356                \}}
\DoxyCodeLine{6357             \}}
\DoxyCodeLine{6358             \textcolor{keywordflow}{while} ((\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = stbi\_\_get8(s)) != 0)}
\DoxyCodeLine{6359                stbi\_\_skip(s, \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{6360             \textcolor{keywordflow}{break};}
\DoxyCodeLine{6361          \}}
\DoxyCodeLine{6362 }
\DoxyCodeLine{6363          \textcolor{keywordflow}{case} 0x3B: \textcolor{comment}{// gif stream termination code}}
\DoxyCodeLine{6364             \textcolor{keywordflow}{return} (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) s; \textcolor{comment}{// using '1' causes warning on some compilers}}
\DoxyCodeLine{6365 }
\DoxyCodeLine{6366          \textcolor{keywordflow}{default}:}
\DoxyCodeLine{6367             \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}unknown code"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{6368       \}}
\DoxyCodeLine{6369    \}}
\DoxyCodeLine{6370 }
\DoxyCodeLine{6371    STBI\_NOTUSED(req\_comp);}
\DoxyCodeLine{6372 \}}
\DoxyCodeLine{6373 }
\DoxyCodeLine{6374 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_gif\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{6375 \{}
\DoxyCodeLine{6376    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *u = 0;}
\DoxyCodeLine{6377    stbi\_\_gif* \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}} = (stbi\_\_gif*) stbi\_\_malloc(\textcolor{keyword}{sizeof}(stbi\_\_gif));}
\DoxyCodeLine{6378    memset(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, 0, \textcolor{keyword}{sizeof}(*\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}));}
\DoxyCodeLine{6379    STBI\_NOTUSED(ri);}
\DoxyCodeLine{6380 }
\DoxyCodeLine{6381    u = stbi\_\_gif\_load\_next(s, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}, comp, req\_comp);}
\DoxyCodeLine{6382    \textcolor{keywordflow}{if} (u == (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) s) u = 0;  \textcolor{comment}{// end of animated gif marker}}
\DoxyCodeLine{6383    \textcolor{keywordflow}{if} (u) \{}
\DoxyCodeLine{6384       *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w;}
\DoxyCodeLine{6385       *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h;}
\DoxyCodeLine{6386       \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != 4)}
\DoxyCodeLine{6387          u = stbi\_\_convert\_format(u, 4, req\_comp, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>w, \mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>h);}
\DoxyCodeLine{6388    \}}
\DoxyCodeLine{6389    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out)}
\DoxyCodeLine{6390       STBI\_FREE(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}}-\/>out);}
\DoxyCodeLine{6391    STBI\_FREE(\mbox{\hyperlink{rings_8cpp_aa9df5aa3976a89a96a5f1c7611d42938}{g}});}
\DoxyCodeLine{6392    \textcolor{keywordflow}{return} u;}
\DoxyCodeLine{6393 \}}
\DoxyCodeLine{6394 }
\DoxyCodeLine{6395 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6396 \{}
\DoxyCodeLine{6397    \textcolor{keywordflow}{return} stbi\_\_gif\_info\_raw(s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp);}
\DoxyCodeLine{6398 \}}
\DoxyCodeLine{6399 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6400 }
\DoxyCodeLine{6401 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{6402 \textcolor{comment}{// Radiance RGBE HDR loader}}
\DoxyCodeLine{6403 \textcolor{comment}{// originally by Nicolas Schulz}}
\DoxyCodeLine{6404 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{6405 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_hdr\_test\_core(stbi\_\_context *s, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *signature)}
\DoxyCodeLine{6406 \{}
\DoxyCodeLine{6407    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{6408    \textcolor{keywordflow}{for} (i=0; signature[i]; ++i)}
\DoxyCodeLine{6409       \textcolor{keywordflow}{if} (stbi\_\_get8(s) != signature[i])}
\DoxyCodeLine{6410           \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6411    stbi\_\_rewind(s);}
\DoxyCodeLine{6412    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6413 \}}
\DoxyCodeLine{6414 }
\DoxyCodeLine{6415 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_hdr\_test(stbi\_\_context* s)}
\DoxyCodeLine{6416 \{}
\DoxyCodeLine{6417    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_hdr\_test\_core(s, \textcolor{stringliteral}{"{}\#?RADIANCE\(\backslash\)n"{}});}
\DoxyCodeLine{6418    stbi\_\_rewind(s);}
\DoxyCodeLine{6419    \textcolor{keywordflow}{if}(!\mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}}) \{}
\DoxyCodeLine{6420        \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_hdr\_test\_core(s, \textcolor{stringliteral}{"{}\#?RGBE\(\backslash\)n"{}});}
\DoxyCodeLine{6421        stbi\_\_rewind(s);}
\DoxyCodeLine{6422    \}}
\DoxyCodeLine{6423    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{6424 \}}
\DoxyCodeLine{6425 }
\DoxyCodeLine{6426 \textcolor{preprocessor}{\#define STBI\_\_HDR\_BUFLEN  1024}}
\DoxyCodeLine{6427 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stbi\_\_hdr\_gettoken(stbi\_\_context *\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}, \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}})}
\DoxyCodeLine{6428 \{}
\DoxyCodeLine{6429    \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}=0;}
\DoxyCodeLine{6430    \textcolor{keywordtype}{char} c = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{6431 }
\DoxyCodeLine{6432    c = (char) stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{6433 }
\DoxyCodeLine{6434    \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}) \&\& c != \textcolor{charliteral}{'\(\backslash\)n'}) \{}
\DoxyCodeLine{6435       \mbox{\hyperlink{classbuffer}{buffer}}[\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}++] = c;}
\DoxyCodeLine{6436       \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} == STBI\_\_HDR\_BUFLEN-\/1) \{}
\DoxyCodeLine{6437          \textcolor{comment}{// flush to end of line}}
\DoxyCodeLine{6438          \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}) \&\& stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}}) != \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{6439             ;}
\DoxyCodeLine{6440          \textcolor{keywordflow}{break};}
\DoxyCodeLine{6441       \}}
\DoxyCodeLine{6442       c = (char) stbi\_\_get8(\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}});}
\DoxyCodeLine{6443    \}}
\DoxyCodeLine{6444 }
\DoxyCodeLine{6445    \mbox{\hyperlink{classbuffer}{buffer}}[\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}] = 0;}
\DoxyCodeLine{6446    \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{6447 \}}
\DoxyCodeLine{6448 }
\DoxyCodeLine{6449 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_hdr\_convert(\textcolor{keywordtype}{float} *output, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *input, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{6450 \{}
\DoxyCodeLine{6451    \textcolor{keywordflow}{if} ( input[3] != 0 ) \{}
\DoxyCodeLine{6452       \textcolor{keywordtype}{float} f1;}
\DoxyCodeLine{6453       \textcolor{comment}{// Exponent}}
\DoxyCodeLine{6454       f1 = (float) ldexp(1.0f, input[3] -\/ (\textcolor{keywordtype}{int})(128 + 8));}
\DoxyCodeLine{6455       \textcolor{keywordflow}{if} (req\_comp <= 2)}
\DoxyCodeLine{6456          output[0] = (input[0] + input[1] + input[2]) * f1 / 3;}
\DoxyCodeLine{6457       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6458          output[0] = input[0] * f1;}
\DoxyCodeLine{6459          output[1] = input[1] * f1;}
\DoxyCodeLine{6460          output[2] = input[2] * f1;}
\DoxyCodeLine{6461       \}}
\DoxyCodeLine{6462       \textcolor{keywordflow}{if} (req\_comp == 2) output[1] = 1;}
\DoxyCodeLine{6463       \textcolor{keywordflow}{if} (req\_comp == 4) output[3] = 1;}
\DoxyCodeLine{6464    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6465       \textcolor{keywordflow}{switch} (req\_comp) \{}
\DoxyCodeLine{6466          \textcolor{keywordflow}{case} 4: output[3] = 1; \textcolor{comment}{/* fallthrough */}}
\DoxyCodeLine{6467          \textcolor{keywordflow}{case} 3: output[0] = output[1] = output[2] = 0;}
\DoxyCodeLine{6468                  \textcolor{keywordflow}{break};}
\DoxyCodeLine{6469          \textcolor{keywordflow}{case} 2: output[1] = 1; \textcolor{comment}{/* fallthrough */}}
\DoxyCodeLine{6470          \textcolor{keywordflow}{case} 1: output[0] = 0;}
\DoxyCodeLine{6471                  \textcolor{keywordflow}{break};}
\DoxyCodeLine{6472       \}}
\DoxyCodeLine{6473    \}}
\DoxyCodeLine{6474 \}}
\DoxyCodeLine{6475 }
\DoxyCodeLine{6476 \textcolor{keyword}{static} \textcolor{keywordtype}{float} *stbi\_\_hdr\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{6477 \{}
\DoxyCodeLine{6478    \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[STBI\_\_HDR\_BUFLEN];}
\DoxyCodeLine{6479    \textcolor{keywordtype}{char} *token;}
\DoxyCodeLine{6480    \textcolor{keywordtype}{int} valid = 0;}
\DoxyCodeLine{6481    \textcolor{keywordtype}{int} width, height;}
\DoxyCodeLine{6482    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *scanline;}
\DoxyCodeLine{6483    \textcolor{keywordtype}{float} *hdr\_data;}
\DoxyCodeLine{6484    \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{6485    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} count, value;}
\DoxyCodeLine{6486    \textcolor{keywordtype}{int} i, j, k, c1,c2, \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}};}
\DoxyCodeLine{6487    \textcolor{keyword}{const} \textcolor{keywordtype}{char} *headerToken;}
\DoxyCodeLine{6488    STBI\_NOTUSED(ri);}
\DoxyCodeLine{6489 }
\DoxyCodeLine{6490    \textcolor{comment}{// Check identifier}}
\DoxyCodeLine{6491    headerToken = stbi\_\_hdr\_gettoken(s,\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{6492    \textcolor{keywordflow}{if} (strcmp(headerToken, \textcolor{stringliteral}{"{}\#?RADIANCE"{}}) != 0 \&\& strcmp(headerToken, \textcolor{stringliteral}{"{}\#?RGBE"{}}) != 0)}
\DoxyCodeLine{6493       \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}not HDR"{}}, \textcolor{stringliteral}{"{}Corrupt HDR image"{}});}
\DoxyCodeLine{6494 }
\DoxyCodeLine{6495    \textcolor{comment}{// Parse header}}
\DoxyCodeLine{6496    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{6497       token = stbi\_\_hdr\_gettoken(s,\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{6498       \textcolor{keywordflow}{if} (token[0] == 0) \textcolor{keywordflow}{break};}
\DoxyCodeLine{6499       \textcolor{keywordflow}{if} (strcmp(token, \textcolor{stringliteral}{"{}FORMAT=32-\/bit\_rle\_rgbe"{}}) == 0) valid = 1;}
\DoxyCodeLine{6500    \}}
\DoxyCodeLine{6501 }
\DoxyCodeLine{6502    \textcolor{keywordflow}{if} (!valid)    \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}unsupported format"{}}, \textcolor{stringliteral}{"{}Unsupported HDR format"{}});}
\DoxyCodeLine{6503 }
\DoxyCodeLine{6504    \textcolor{comment}{// Parse width and height}}
\DoxyCodeLine{6505    \textcolor{comment}{// can't use sscanf() if we're not using stdio!}}
\DoxyCodeLine{6506    token = stbi\_\_hdr\_gettoken(s,\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{6507    \textcolor{keywordflow}{if} (strncmp(token, \textcolor{stringliteral}{"{}-\/Y "{}}, 3))  \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}unsupported data layout"{}}, \textcolor{stringliteral}{"{}Unsupported HDR format"{}});}
\DoxyCodeLine{6508    token += 3;}
\DoxyCodeLine{6509    height = (int) strtol(token, \&token, 10);}
\DoxyCodeLine{6510    \textcolor{keywordflow}{while} (*token == \textcolor{charliteral}{' '}) ++token;}
\DoxyCodeLine{6511    \textcolor{keywordflow}{if} (strncmp(token, \textcolor{stringliteral}{"{}+X "{}}, 3))  \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}unsupported data layout"{}}, \textcolor{stringliteral}{"{}Unsupported HDR format"{}});}
\DoxyCodeLine{6512    token += 3;}
\DoxyCodeLine{6513    width = (int) strtol(token, NULL, 10);}
\DoxyCodeLine{6514 }
\DoxyCodeLine{6515    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = width;}
\DoxyCodeLine{6516    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = height;}
\DoxyCodeLine{6517 }
\DoxyCodeLine{6518    \textcolor{keywordflow}{if} (comp) *comp = 3;}
\DoxyCodeLine{6519    \textcolor{keywordflow}{if} (req\_comp == 0) req\_comp = 3;}
\DoxyCodeLine{6520 }
\DoxyCodeLine{6521    \textcolor{keywordflow}{if} (!stbi\_\_mad4sizes\_valid(width, height, req\_comp, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}), 0))}
\DoxyCodeLine{6522       \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}HDR image is too large"{}});}
\DoxyCodeLine{6523 }
\DoxyCodeLine{6524    \textcolor{comment}{// Read data}}
\DoxyCodeLine{6525    hdr\_data = (\textcolor{keywordtype}{float} *) stbi\_\_malloc\_mad4(width, height, req\_comp, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}), 0);}
\DoxyCodeLine{6526    \textcolor{keywordflow}{if} (!hdr\_data)}
\DoxyCodeLine{6527       \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{6528 }
\DoxyCodeLine{6529    \textcolor{comment}{// Load image data}}
\DoxyCodeLine{6530    \textcolor{comment}{// image data is stored as some number of sca}}
\DoxyCodeLine{6531    \textcolor{keywordflow}{if} ( width < 8 || width >= 32768) \{}
\DoxyCodeLine{6532       \textcolor{comment}{// Read flat data}}
\DoxyCodeLine{6533       \textcolor{keywordflow}{for} (j=0; j < height; ++j) \{}
\DoxyCodeLine{6534          \textcolor{keywordflow}{for} (i=0; i < width; ++i) \{}
\DoxyCodeLine{6535             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} rgbe[4];}
\DoxyCodeLine{6536            main\_decode\_loop:}
\DoxyCodeLine{6537             stbi\_\_getn(s, rgbe, 4);}
\DoxyCodeLine{6538             stbi\_\_hdr\_convert(hdr\_data + j * width * req\_comp + i * req\_comp, rgbe, req\_comp);}
\DoxyCodeLine{6539          \}}
\DoxyCodeLine{6540       \}}
\DoxyCodeLine{6541    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6542       \textcolor{comment}{// Read RLE-\/encoded data}}
\DoxyCodeLine{6543       scanline = NULL;}
\DoxyCodeLine{6544 }
\DoxyCodeLine{6545       \textcolor{keywordflow}{for} (j = 0; j < height; ++j) \{}
\DoxyCodeLine{6546          c1 = stbi\_\_get8(s);}
\DoxyCodeLine{6547          c2 = stbi\_\_get8(s);}
\DoxyCodeLine{6548          \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} = stbi\_\_get8(s);}
\DoxyCodeLine{6549          \textcolor{keywordflow}{if} (c1 != 2 || c2 != 2 || (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} \& 0x80)) \{}
\DoxyCodeLine{6550             \textcolor{comment}{// not run-\/length encoded, so we have to actually use THIS data as a decoded}}
\DoxyCodeLine{6551             \textcolor{comment}{// pixel (note this can't be a valid pixel-\/-\/one of RGB must be >= 128)}}
\DoxyCodeLine{6552             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} rgbe[4];}
\DoxyCodeLine{6553             rgbe[0] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) c1;}
\DoxyCodeLine{6554             rgbe[1] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) c2;}
\DoxyCodeLine{6555             rgbe[2] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}};}
\DoxyCodeLine{6556             rgbe[3] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) stbi\_\_get8(s);}
\DoxyCodeLine{6557             stbi\_\_hdr\_convert(hdr\_data, rgbe, req\_comp);}
\DoxyCodeLine{6558             i = 1;}
\DoxyCodeLine{6559             j = 0;}
\DoxyCodeLine{6560             STBI\_FREE(scanline);}
\DoxyCodeLine{6561             \textcolor{keywordflow}{goto} main\_decode\_loop; \textcolor{comment}{// yes, this makes no sense}}
\DoxyCodeLine{6562          \}}
\DoxyCodeLine{6563          \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} <<= 8;}
\DoxyCodeLine{6564          \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} |= stbi\_\_get8(s);}
\DoxyCodeLine{6565          \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}} != width) \{ STBI\_FREE(hdr\_data); STBI\_FREE(scanline); \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}invalid decoded scanline length"{}}, \textcolor{stringliteral}{"{}corrupt HDR"{}}); \}}
\DoxyCodeLine{6566          \textcolor{keywordflow}{if} (scanline == NULL) \{}
\DoxyCodeLine{6567             scanline = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad2(width, 4, 0);}
\DoxyCodeLine{6568             \textcolor{keywordflow}{if} (!scanline) \{}
\DoxyCodeLine{6569                STBI\_FREE(hdr\_data);}
\DoxyCodeLine{6570                \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{6571             \}}
\DoxyCodeLine{6572          \}}
\DoxyCodeLine{6573 }
\DoxyCodeLine{6574          \textcolor{keywordflow}{for} (k = 0; k < 4; ++k) \{}
\DoxyCodeLine{6575             \textcolor{keywordtype}{int} nleft;}
\DoxyCodeLine{6576             i = 0;}
\DoxyCodeLine{6577             \textcolor{keywordflow}{while} ((nleft = width -\/ i) > 0) \{}
\DoxyCodeLine{6578                count = stbi\_\_get8(s);}
\DoxyCodeLine{6579                \textcolor{keywordflow}{if} (count > 128) \{}
\DoxyCodeLine{6580                   \textcolor{comment}{// Run}}
\DoxyCodeLine{6581                   value = stbi\_\_get8(s);}
\DoxyCodeLine{6582                   count -\/= 128;}
\DoxyCodeLine{6583                   \textcolor{keywordflow}{if} (count > nleft) \{ STBI\_FREE(hdr\_data); STBI\_FREE(scanline); \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}corrupt"{}}, \textcolor{stringliteral}{"{}bad RLE data in HDR"{}}); \}}
\DoxyCodeLine{6584                   \textcolor{keywordflow}{for} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = 0; \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} < count; ++\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{6585                      scanline[i++ * 4 + k] = value;}
\DoxyCodeLine{6586                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6587                   \textcolor{comment}{// Dump}}
\DoxyCodeLine{6588                   \textcolor{keywordflow}{if} (count > nleft) \{ STBI\_FREE(hdr\_data); STBI\_FREE(scanline); \textcolor{keywordflow}{return} stbi\_\_errpf(\textcolor{stringliteral}{"{}corrupt"{}}, \textcolor{stringliteral}{"{}bad RLE data in HDR"{}}); \}}
\DoxyCodeLine{6589                   \textcolor{keywordflow}{for} (\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} = 0; \mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}} < count; ++\mbox{\hyperlink{utils_8c_a3d99b005d0fb73033dce14d4a135d01f}{z}})}
\DoxyCodeLine{6590                      scanline[i++ * 4 + k] = stbi\_\_get8(s);}
\DoxyCodeLine{6591                \}}
\DoxyCodeLine{6592             \}}
\DoxyCodeLine{6593          \}}
\DoxyCodeLine{6594          \textcolor{keywordflow}{for} (i=0; i < width; ++i)}
\DoxyCodeLine{6595             stbi\_\_hdr\_convert(hdr\_data+(j*width + i)*req\_comp, scanline + i*4, req\_comp);}
\DoxyCodeLine{6596       \}}
\DoxyCodeLine{6597       \textcolor{keywordflow}{if} (scanline)}
\DoxyCodeLine{6598          STBI\_FREE(scanline);}
\DoxyCodeLine{6599    \}}
\DoxyCodeLine{6600 }
\DoxyCodeLine{6601    \textcolor{keywordflow}{return} hdr\_data;}
\DoxyCodeLine{6602 \}}
\DoxyCodeLine{6603 }
\DoxyCodeLine{6604 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_hdr\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6605 \{}
\DoxyCodeLine{6606    \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[STBI\_\_HDR\_BUFLEN];}
\DoxyCodeLine{6607    \textcolor{keywordtype}{char} *token;}
\DoxyCodeLine{6608    \textcolor{keywordtype}{int} valid = 0;}
\DoxyCodeLine{6609    \textcolor{keywordtype}{int} dummy;}
\DoxyCodeLine{6610 }
\DoxyCodeLine{6611    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = \&dummy;}
\DoxyCodeLine{6612    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = \&dummy;}
\DoxyCodeLine{6613    \textcolor{keywordflow}{if} (!comp) comp = \&dummy;}
\DoxyCodeLine{6614 }
\DoxyCodeLine{6615    \textcolor{keywordflow}{if} (stbi\_\_hdr\_test(s) == 0) \{}
\DoxyCodeLine{6616        stbi\_\_rewind( s );}
\DoxyCodeLine{6617        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6618    \}}
\DoxyCodeLine{6619 }
\DoxyCodeLine{6620    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{6621       token = stbi\_\_hdr\_gettoken(s,\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{6622       \textcolor{keywordflow}{if} (token[0] == 0) \textcolor{keywordflow}{break};}
\DoxyCodeLine{6623       \textcolor{keywordflow}{if} (strcmp(token, \textcolor{stringliteral}{"{}FORMAT=32-\/bit\_rle\_rgbe"{}}) == 0) valid = 1;}
\DoxyCodeLine{6624    \}}
\DoxyCodeLine{6625 }
\DoxyCodeLine{6626    \textcolor{keywordflow}{if} (!valid) \{}
\DoxyCodeLine{6627        stbi\_\_rewind( s );}
\DoxyCodeLine{6628        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6629    \}}
\DoxyCodeLine{6630    token = stbi\_\_hdr\_gettoken(s,\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{6631    \textcolor{keywordflow}{if} (strncmp(token, \textcolor{stringliteral}{"{}-\/Y "{}}, 3)) \{}
\DoxyCodeLine{6632        stbi\_\_rewind( s );}
\DoxyCodeLine{6633        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6634    \}}
\DoxyCodeLine{6635    token += 3;}
\DoxyCodeLine{6636    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = (int) strtol(token, \&token, 10);}
\DoxyCodeLine{6637    \textcolor{keywordflow}{while} (*token == \textcolor{charliteral}{' '}) ++token;}
\DoxyCodeLine{6638    \textcolor{keywordflow}{if} (strncmp(token, \textcolor{stringliteral}{"{}+X "{}}, 3)) \{}
\DoxyCodeLine{6639        stbi\_\_rewind( s );}
\DoxyCodeLine{6640        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6641    \}}
\DoxyCodeLine{6642    token += 3;}
\DoxyCodeLine{6643    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = (int) strtol(token, NULL, 10);}
\DoxyCodeLine{6644    *comp = 3;}
\DoxyCodeLine{6645    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6646 \}}
\DoxyCodeLine{6647 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_HDR}}
\DoxyCodeLine{6648 }
\DoxyCodeLine{6649 \textcolor{preprocessor}{\#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{6650 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bmp\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6651 \{}
\DoxyCodeLine{6652    \textcolor{keywordtype}{void} *p;}
\DoxyCodeLine{6653    stbi\_\_bmp\_data \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}};}
\DoxyCodeLine{6654 }
\DoxyCodeLine{6655    \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.all\_a = 255;}
\DoxyCodeLine{6656    p = stbi\_\_bmp\_parse\_header(s, \&\mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}});}
\DoxyCodeLine{6657    stbi\_\_rewind( s );}
\DoxyCodeLine{6658    \textcolor{keywordflow}{if} (p == NULL)}
\DoxyCodeLine{6659       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6660    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = s-\/>img\_x;}
\DoxyCodeLine{6661    \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = s-\/>img\_y;}
\DoxyCodeLine{6662    \textcolor{keywordflow}{if} (comp) *comp = \mbox{\hyperlink{ndarray__converter_8cpp_a74d46cdd5cb355d922d75d4156cc1524}{info}}.ma ? 4 : 3;}
\DoxyCodeLine{6663    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6664 \}}
\DoxyCodeLine{6665 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6666 }
\DoxyCodeLine{6667 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{6668 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_psd\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6669 \{}
\DoxyCodeLine{6670    \textcolor{keywordtype}{int} channelCount, dummy;}
\DoxyCodeLine{6671    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = \&dummy;}
\DoxyCodeLine{6672    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = \&dummy;}
\DoxyCodeLine{6673    \textcolor{keywordflow}{if} (!comp) comp = \&dummy;}
\DoxyCodeLine{6674    \textcolor{keywordflow}{if} (stbi\_\_get32be(s) != 0x38425053) \{}
\DoxyCodeLine{6675        stbi\_\_rewind( s );}
\DoxyCodeLine{6676        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6677    \}}
\DoxyCodeLine{6678    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 1) \{}
\DoxyCodeLine{6679        stbi\_\_rewind( s );}
\DoxyCodeLine{6680        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6681    \}}
\DoxyCodeLine{6682    stbi\_\_skip(s, 6);}
\DoxyCodeLine{6683    channelCount = stbi\_\_get16be(s);}
\DoxyCodeLine{6684    \textcolor{keywordflow}{if} (channelCount < 0 || channelCount > 16) \{}
\DoxyCodeLine{6685        stbi\_\_rewind( s );}
\DoxyCodeLine{6686        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6687    \}}
\DoxyCodeLine{6688    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = stbi\_\_get32be(s);}
\DoxyCodeLine{6689    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = stbi\_\_get32be(s);}
\DoxyCodeLine{6690    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 8) \{}
\DoxyCodeLine{6691        stbi\_\_rewind( s );}
\DoxyCodeLine{6692        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6693    \}}
\DoxyCodeLine{6694    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 3) \{}
\DoxyCodeLine{6695        stbi\_\_rewind( s );}
\DoxyCodeLine{6696        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6697    \}}
\DoxyCodeLine{6698    *comp = 4;}
\DoxyCodeLine{6699    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6700 \}}
\DoxyCodeLine{6701 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6702 }
\DoxyCodeLine{6703 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{6704 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_pic\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6705 \{}
\DoxyCodeLine{6706    \textcolor{keywordtype}{int} act\_comp=0,num\_packets=0,chained,dummy;}
\DoxyCodeLine{6707    stbi\_\_pic\_packet packets[10];}
\DoxyCodeLine{6708 }
\DoxyCodeLine{6709    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = \&dummy;}
\DoxyCodeLine{6710    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = \&dummy;}
\DoxyCodeLine{6711    \textcolor{keywordflow}{if} (!comp) comp = \&dummy;}
\DoxyCodeLine{6712 }
\DoxyCodeLine{6713    \textcolor{keywordflow}{if} (!stbi\_\_pic\_is4(s,\textcolor{stringliteral}{"{}\(\backslash\)x53\(\backslash\)x80\(\backslash\)xF6\(\backslash\)x34"{}})) \{}
\DoxyCodeLine{6714       stbi\_\_rewind(s);}
\DoxyCodeLine{6715       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6716    \}}
\DoxyCodeLine{6717 }
\DoxyCodeLine{6718    stbi\_\_skip(s, 88);}
\DoxyCodeLine{6719 }
\DoxyCodeLine{6720    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = stbi\_\_get16be(s);}
\DoxyCodeLine{6721    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = stbi\_\_get16be(s);}
\DoxyCodeLine{6722    \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s)) \{}
\DoxyCodeLine{6723       stbi\_\_rewind( s);}
\DoxyCodeLine{6724       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6725    \}}
\DoxyCodeLine{6726    \textcolor{keywordflow}{if} ( (*\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) != 0 \&\& (1 << 28) / (*\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) < (*\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}})) \{}
\DoxyCodeLine{6727       stbi\_\_rewind( s );}
\DoxyCodeLine{6728       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6729    \}}
\DoxyCodeLine{6730 }
\DoxyCodeLine{6731    stbi\_\_skip(s, 8);}
\DoxyCodeLine{6732 }
\DoxyCodeLine{6733    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{6734       stbi\_\_pic\_packet *packet;}
\DoxyCodeLine{6735 }
\DoxyCodeLine{6736       \textcolor{keywordflow}{if} (num\_packets==\textcolor{keyword}{sizeof}(packets)/\textcolor{keyword}{sizeof}(packets[0]))}
\DoxyCodeLine{6737          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6738 }
\DoxyCodeLine{6739       packet = \&packets[num\_packets++];}
\DoxyCodeLine{6740       chained = stbi\_\_get8(s);}
\DoxyCodeLine{6741       packet-\/>size    = stbi\_\_get8(s);}
\DoxyCodeLine{6742       packet-\/>type    = stbi\_\_get8(s);}
\DoxyCodeLine{6743       packet-\/>channel = stbi\_\_get8(s);}
\DoxyCodeLine{6744       act\_comp |= packet-\/>channel;}
\DoxyCodeLine{6745 }
\DoxyCodeLine{6746       \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s)) \{}
\DoxyCodeLine{6747           stbi\_\_rewind( s );}
\DoxyCodeLine{6748           \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6749       \}}
\DoxyCodeLine{6750       \textcolor{keywordflow}{if} (packet-\/>size != 8) \{}
\DoxyCodeLine{6751           stbi\_\_rewind( s );}
\DoxyCodeLine{6752           \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6753       \}}
\DoxyCodeLine{6754    \} \textcolor{keywordflow}{while} (chained);}
\DoxyCodeLine{6755 }
\DoxyCodeLine{6756    *comp = (act\_comp \& 0x10 ? 4 : 3);}
\DoxyCodeLine{6757 }
\DoxyCodeLine{6758    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6759 \}}
\DoxyCodeLine{6760 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6761 }
\DoxyCodeLine{6762 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{6763 \textcolor{comment}{// Portable Gray Map and Portable Pixel Map loader}}
\DoxyCodeLine{6764 \textcolor{comment}{// by Ken Miller}}
\DoxyCodeLine{6765 \textcolor{comment}{//}}
\DoxyCodeLine{6766 \textcolor{comment}{// PGM: http://netpbm.sourceforge.net/doc/pgm.html}}
\DoxyCodeLine{6767 \textcolor{comment}{// PPM: http://netpbm.sourceforge.net/doc/ppm.html}}
\DoxyCodeLine{6768 \textcolor{comment}{//}}
\DoxyCodeLine{6769 \textcolor{comment}{// Known limitations:}}
\DoxyCodeLine{6770 \textcolor{comment}{//    Does not support comments in the header section}}
\DoxyCodeLine{6771 \textcolor{comment}{//    Does not support ASCII image data (formats P2 and P3)}}
\DoxyCodeLine{6772 \textcolor{comment}{//    Does not support 16-\/bit-\/per-\/channel}}
\DoxyCodeLine{6773 }
\DoxyCodeLine{6774 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{6775 }
\DoxyCodeLine{6776 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_test(stbi\_\_context *s)}
\DoxyCodeLine{6777 \{}
\DoxyCodeLine{6778    \textcolor{keywordtype}{char} p, t;}
\DoxyCodeLine{6779    p = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6780    t = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6781    \textcolor{keywordflow}{if} (p != \textcolor{charliteral}{'P'} || (t != \textcolor{charliteral}{'5'} \&\& t != \textcolor{charliteral}{'6'})) \{}
\DoxyCodeLine{6782        stbi\_\_rewind( s );}
\DoxyCodeLine{6783        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6784    \}}
\DoxyCodeLine{6785    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6786 \}}
\DoxyCodeLine{6787 }
\DoxyCodeLine{6788 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_pnm\_load(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp, stbi\_\_result\_info *ri)}
\DoxyCodeLine{6789 \{}
\DoxyCodeLine{6790    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out;}
\DoxyCodeLine{6791    STBI\_NOTUSED(ri);}
\DoxyCodeLine{6792 }
\DoxyCodeLine{6793    \textcolor{keywordflow}{if} (!stbi\_\_pnm\_info(s, (\textcolor{keywordtype}{int} *)\&s-\/>img\_x, (\textcolor{keywordtype}{int} *)\&s-\/>img\_y, (\textcolor{keywordtype}{int} *)\&s-\/>img\_n))}
\DoxyCodeLine{6794       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6795 }
\DoxyCodeLine{6796    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = s-\/>img\_x;}
\DoxyCodeLine{6797    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = s-\/>img\_y;}
\DoxyCodeLine{6798    \textcolor{keywordflow}{if} (comp) *comp = s-\/>img\_n;}
\DoxyCodeLine{6799 }
\DoxyCodeLine{6800    \textcolor{keywordflow}{if} (!stbi\_\_mad3sizes\_valid(s-\/>img\_n, s-\/>img\_x, s-\/>img\_y, 0))}
\DoxyCodeLine{6801       \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}PNM too large"{}});}
\DoxyCodeLine{6802 }
\DoxyCodeLine{6803    out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc\_mad3(s-\/>img\_n, s-\/>img\_x, s-\/>img\_y, 0);}
\DoxyCodeLine{6804    \textcolor{keywordflow}{if} (!out) \textcolor{keywordflow}{return} stbi\_\_errpuc(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{6805    stbi\_\_getn(s, out, s-\/>img\_n * s-\/>img\_x * s-\/>img\_y);}
\DoxyCodeLine{6806 }
\DoxyCodeLine{6807    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != s-\/>img\_n) \{}
\DoxyCodeLine{6808       out = stbi\_\_convert\_format(out, s-\/>img\_n, req\_comp, s-\/>img\_x, s-\/>img\_y);}
\DoxyCodeLine{6809       \textcolor{keywordflow}{if} (out == NULL) \textcolor{keywordflow}{return} out; \textcolor{comment}{// stbi\_\_convert\_format frees input on failure}}
\DoxyCodeLine{6810    \}}
\DoxyCodeLine{6811    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{6812 \}}
\DoxyCodeLine{6813 }
\DoxyCodeLine{6814 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_isspace(\textcolor{keywordtype}{char} c)}
\DoxyCodeLine{6815 \{}
\DoxyCodeLine{6816    \textcolor{keywordflow}{return} c == \textcolor{charliteral}{' '} || c == \textcolor{charliteral}{'\(\backslash\)t'} || c == \textcolor{charliteral}{'\(\backslash\)n'} || c == \textcolor{charliteral}{'\(\backslash\)v'} || c == \textcolor{charliteral}{'\(\backslash\)f'} || c == \textcolor{charliteral}{'\(\backslash\)r'};}
\DoxyCodeLine{6817 \}}
\DoxyCodeLine{6818 }
\DoxyCodeLine{6819 \textcolor{keyword}{static} \textcolor{keywordtype}{void}     stbi\_\_pnm\_skip\_whitespace(stbi\_\_context *s, \textcolor{keywordtype}{char} *c)}
\DoxyCodeLine{6820 \{}
\DoxyCodeLine{6821    \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{6822       \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(s) \&\& stbi\_\_pnm\_isspace(*c))}
\DoxyCodeLine{6823          *c = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6824 }
\DoxyCodeLine{6825       \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s) || *c != \textcolor{charliteral}{'\#'})}
\DoxyCodeLine{6826          \textcolor{keywordflow}{break};}
\DoxyCodeLine{6827 }
\DoxyCodeLine{6828       \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(s) \&\& *c != \textcolor{charliteral}{'\(\backslash\)n'} \&\& *c != \textcolor{charliteral}{'\(\backslash\)r'} )}
\DoxyCodeLine{6829          *c = (\textcolor{keywordtype}{char}) stbi\_\_get8(s);}
\DoxyCodeLine{6830    \}}
\DoxyCodeLine{6831 \}}
\DoxyCodeLine{6832 }
\DoxyCodeLine{6833 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_isdigit(\textcolor{keywordtype}{char} c)}
\DoxyCodeLine{6834 \{}
\DoxyCodeLine{6835    \textcolor{keywordflow}{return} c >= \textcolor{charliteral}{'0'} \&\& c <= \textcolor{charliteral}{'9'};}
\DoxyCodeLine{6836 \}}
\DoxyCodeLine{6837 }
\DoxyCodeLine{6838 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_getinteger(stbi\_\_context *s, \textcolor{keywordtype}{char} *c)}
\DoxyCodeLine{6839 \{}
\DoxyCodeLine{6840    \textcolor{keywordtype}{int} value = 0;}
\DoxyCodeLine{6841 }
\DoxyCodeLine{6842    \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(s) \&\& stbi\_\_pnm\_isdigit(*c)) \{}
\DoxyCodeLine{6843       value = value*10 + (*c -\/ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{6844       *c = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6845    \}}
\DoxyCodeLine{6846 }
\DoxyCodeLine{6847    \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{6848 \}}
\DoxyCodeLine{6849 }
\DoxyCodeLine{6850 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_info(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6851 \{}
\DoxyCodeLine{6852    \textcolor{keywordtype}{int} maxv, dummy;}
\DoxyCodeLine{6853    \textcolor{keywordtype}{char} c, p, t;}
\DoxyCodeLine{6854 }
\DoxyCodeLine{6855    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}) \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = \&dummy;}
\DoxyCodeLine{6856    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}) \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = \&dummy;}
\DoxyCodeLine{6857    \textcolor{keywordflow}{if} (!comp) comp = \&dummy;}
\DoxyCodeLine{6858 }
\DoxyCodeLine{6859    stbi\_\_rewind(s);}
\DoxyCodeLine{6860 }
\DoxyCodeLine{6861    \textcolor{comment}{// Get identifier}}
\DoxyCodeLine{6862    p = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6863    t = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6864    \textcolor{keywordflow}{if} (p != \textcolor{charliteral}{'P'} || (t != \textcolor{charliteral}{'5'} \&\& t != \textcolor{charliteral}{'6'})) \{}
\DoxyCodeLine{6865        stbi\_\_rewind(s);}
\DoxyCodeLine{6866        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6867    \}}
\DoxyCodeLine{6868 }
\DoxyCodeLine{6869    *comp = (t == \textcolor{charliteral}{'6'}) ? 3 : 1;  \textcolor{comment}{// '5' is 1-\/component .pgm; '6' is 3-\/component .ppm}}
\DoxyCodeLine{6870 }
\DoxyCodeLine{6871    c = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6872    stbi\_\_pnm\_skip\_whitespace(s, \&c);}
\DoxyCodeLine{6873 }
\DoxyCodeLine{6874    *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}} = stbi\_\_pnm\_getinteger(s, \&c); \textcolor{comment}{// read width}}
\DoxyCodeLine{6875    stbi\_\_pnm\_skip\_whitespace(s, \&c);}
\DoxyCodeLine{6876 }
\DoxyCodeLine{6877    *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}} = stbi\_\_pnm\_getinteger(s, \&c); \textcolor{comment}{// read height}}
\DoxyCodeLine{6878    stbi\_\_pnm\_skip\_whitespace(s, \&c);}
\DoxyCodeLine{6879 }
\DoxyCodeLine{6880    maxv = stbi\_\_pnm\_getinteger(s, \&c);  \textcolor{comment}{// read max value}}
\DoxyCodeLine{6881 }
\DoxyCodeLine{6882    \textcolor{keywordflow}{if} (maxv > 255)}
\DoxyCodeLine{6883       \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}max value > 255"{}}, \textcolor{stringliteral}{"{}PPM image not 8-\/bit"{}});}
\DoxyCodeLine{6884    \textcolor{keywordflow}{else}}
\DoxyCodeLine{6885       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6886 \}}
\DoxyCodeLine{6887 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6888 }
\DoxyCodeLine{6889 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_info\_main(stbi\_\_context *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6890 \{}
\DoxyCodeLine{6891 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_JPEG}}
\DoxyCodeLine{6892    \textcolor{keywordflow}{if} (stbi\_\_jpeg\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp)) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6893 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6894 }
\DoxyCodeLine{6895 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PNG}}
\DoxyCodeLine{6896    \textcolor{keywordflow}{if} (stbi\_\_png\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6897 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6898 }
\DoxyCodeLine{6899 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_GIF}}
\DoxyCodeLine{6900    \textcolor{keywordflow}{if} (stbi\_\_gif\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6901 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6902 }
\DoxyCodeLine{6903 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{6904    \textcolor{keywordflow}{if} (stbi\_\_bmp\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6905 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6906 }
\DoxyCodeLine{6907 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{6908    \textcolor{keywordflow}{if} (stbi\_\_psd\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6909 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6910 }
\DoxyCodeLine{6911 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{6912    \textcolor{keywordflow}{if} (stbi\_\_pic\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6913 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6914 }
\DoxyCodeLine{6915 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{6916    \textcolor{keywordflow}{if} (stbi\_\_pnm\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6917 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6918 }
\DoxyCodeLine{6919 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{6920    \textcolor{keywordflow}{if} (stbi\_\_hdr\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6921 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6922 }
\DoxyCodeLine{6923    \textcolor{comment}{// test tga last because it's a crappy test!}}
\DoxyCodeLine{6924 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_TGA}}
\DoxyCodeLine{6925    \textcolor{keywordflow}{if} (stbi\_\_tga\_info(s, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp))}
\DoxyCodeLine{6926        \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6927 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6928    \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}unknown image type"{}}, \textcolor{stringliteral}{"{}Image not of any known type, or corrupt"{}});}
\DoxyCodeLine{6929 \}}
\DoxyCodeLine{6930 }
\DoxyCodeLine{6931 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{6932 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_aede708cca1304520b2afcf4d5eb61d70}{stbi\_info}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6933 \{}
\DoxyCodeLine{6934     FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}} = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{6935     \textcolor{keywordtype}{int} result;}
\DoxyCodeLine{6936     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}) \textcolor{keywordflow}{return} stbi\_\_err(\textcolor{stringliteral}{"{}can't fopen"{}}, \textcolor{stringliteral}{"{}Unable to open file"{}});}
\DoxyCodeLine{6937     result = \mbox{\hyperlink{stb__image_8h_a28abedef4a0a93909332080df6be0021}{stbi\_info\_from\_file}}(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, \mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, comp);}
\DoxyCodeLine{6938     fclose(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{6939     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{6940 \}}
\DoxyCodeLine{6941 }
\DoxyCodeLine{6942 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_a28abedef4a0a93909332080df6be0021}{stbi\_info\_from\_file}}(FILE *\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6943 \{}
\DoxyCodeLine{6944    \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{6945    stbi\_\_context s;}
\DoxyCodeLine{6946    \textcolor{keywordtype}{long} pos = ftell(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{6947    stbi\_\_start\_file(\&s, \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}});}
\DoxyCodeLine{6948    \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}} = stbi\_\_info\_main(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp);}
\DoxyCodeLine{6949    fseek(\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}},pos,SEEK\_SET);}
\DoxyCodeLine{6950    \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacenvinfer1_ad3e635d1f15cdaca5d23251c775ef725}{r}};}
\DoxyCodeLine{6951 \}}
\DoxyCodeLine{6952 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_STDIO}}
\DoxyCodeLine{6953 }
\DoxyCodeLine{6954 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_acfef077febce3bc3f1f339de478f3315}{stbi\_info\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6955 \{}
\DoxyCodeLine{6956    stbi\_\_context s;}
\DoxyCodeLine{6957    stbi\_\_start\_mem(\&s,\mbox{\hyperlink{classbuffer}{buffer}},\mbox{\hyperlink{group__python__builtins_gaeff368081ac50b8fe2cc0230d96e3acb}{len}});}
\DoxyCodeLine{6958    \textcolor{keywordflow}{return} stbi\_\_info\_main(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp);}
\DoxyCodeLine{6959 \}}
\DoxyCodeLine{6960 }
\DoxyCodeLine{6961 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_a86291c64cb663f41a34647d5e1abf363}{stbi\_info\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *c, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}}, \textcolor{keywordtype}{int} *\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}}, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6962 \{}
\DoxyCodeLine{6963    stbi\_\_context s;}
\DoxyCodeLine{6964    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *) c, user);}
\DoxyCodeLine{6965    \textcolor{keywordflow}{return} stbi\_\_info\_main(\&s,\mbox{\hyperlink{utils_8c_a676e0da0ef83bbbdf42538e54b97506b}{x}},\mbox{\hyperlink{utils_8c_ac30de26db5f6d1c18c63913729adca7d}{y}},comp);}
\DoxyCodeLine{6966 \}}
\DoxyCodeLine{6967 }
\DoxyCodeLine{6968 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{6969 }
\DoxyCodeLine{6970 \textcolor{comment}{/*}}
\DoxyCodeLine{6971 \textcolor{comment}{   revision history:}}
\DoxyCodeLine{6972 \textcolor{comment}{      2.16  (2017-\/07-\/23) all functions have 16-\/bit variants;}}
\DoxyCodeLine{6973 \textcolor{comment}{                         STBI\_NO\_STDIO works again;}}
\DoxyCodeLine{6974 \textcolor{comment}{                         compilation fixes;}}
\DoxyCodeLine{6975 \textcolor{comment}{                         fix rounding in unpremultiply;}}
\DoxyCodeLine{6976 \textcolor{comment}{                         optimize vertical flip;}}
\DoxyCodeLine{6977 \textcolor{comment}{                         disable raw\_len validation;}}
\DoxyCodeLine{6978 \textcolor{comment}{                         documentation fixes}}
\DoxyCodeLine{6979 \textcolor{comment}{      2.15  (2017-\/03-\/18) fix png-\/1,2,4 bug; now all Imagenet JPGs decode;}}
\DoxyCodeLine{6980 \textcolor{comment}{                         warning fixes; disable run-\/time SSE detection on gcc;}}
\DoxyCodeLine{6981 \textcolor{comment}{                         uniform handling of optional "{}return"{} values;}}
\DoxyCodeLine{6982 \textcolor{comment}{                         thread-\/safe initialization of zlib tables}}
\DoxyCodeLine{6983 \textcolor{comment}{      2.14  (2017-\/03-\/03) remove deprecated STBI\_JPEG\_OLD; fixes for Imagenet JPGs}}
\DoxyCodeLine{6984 \textcolor{comment}{      2.13  (2016-\/11-\/29) add 16-\/bit API, only supported for PNG right now}}
\DoxyCodeLine{6985 \textcolor{comment}{      2.12  (2016-\/04-\/02) fix typo in 2.11 PSD fix that caused crashes}}
\DoxyCodeLine{6986 \textcolor{comment}{      2.11  (2016-\/04-\/02) allocate large structures on the stack}}
\DoxyCodeLine{6987 \textcolor{comment}{                         remove white matting for transparent PSD}}
\DoxyCodeLine{6988 \textcolor{comment}{                         fix reported channel count for PNG \& BMP}}
\DoxyCodeLine{6989 \textcolor{comment}{                         re-\/enable SSE2 in non-\/gcc 64-\/bit}}
\DoxyCodeLine{6990 \textcolor{comment}{                         support RGB-\/formatted JPEG}}
\DoxyCodeLine{6991 \textcolor{comment}{                         read 16-\/bit PNGs (only as 8-\/bit)}}
\DoxyCodeLine{6992 \textcolor{comment}{      2.10  (2016-\/01-\/22) avoid warning introduced in 2.09 by STBI\_REALLOC\_SIZED}}
\DoxyCodeLine{6993 \textcolor{comment}{      2.09  (2016-\/01-\/16) allow comments in PNM files}}
\DoxyCodeLine{6994 \textcolor{comment}{                         16-\/bit-\/per-\/pixel TGA (not bit-\/per-\/component)}}
\DoxyCodeLine{6995 \textcolor{comment}{                         info() for TGA could break due to .hdr handling}}
\DoxyCodeLine{6996 \textcolor{comment}{                         info() for BMP to shares code instead of sloppy parse}}
\DoxyCodeLine{6997 \textcolor{comment}{                         can use STBI\_REALLOC\_SIZED if allocator doesn't support realloc}}
\DoxyCodeLine{6998 \textcolor{comment}{                         code cleanup}}
\DoxyCodeLine{6999 \textcolor{comment}{      2.08  (2015-\/09-\/13) fix to 2.07 cleanup, reading RGB PSD as RGBA}}
\DoxyCodeLine{7000 \textcolor{comment}{      2.07  (2015-\/09-\/13) fix compiler warnings}}
\DoxyCodeLine{7001 \textcolor{comment}{                         partial animated GIF support}}
\DoxyCodeLine{7002 \textcolor{comment}{                         limited 16-\/bpc PSD support}}
\DoxyCodeLine{7003 \textcolor{comment}{                         \#ifdef unused functions}}
\DoxyCodeLine{7004 \textcolor{comment}{                         bug with < 92 byte PIC,PNM,HDR,TGA}}
\DoxyCodeLine{7005 \textcolor{comment}{      2.06  (2015-\/04-\/19) fix bug where PSD returns wrong '*comp' value}}
\DoxyCodeLine{7006 \textcolor{comment}{      2.05  (2015-\/04-\/19) fix bug in progressive JPEG handling, fix warning}}
\DoxyCodeLine{7007 \textcolor{comment}{      2.04  (2015-\/04-\/15) try to re-\/enable SIMD on MinGW 64-\/bit}}
\DoxyCodeLine{7008 \textcolor{comment}{      2.03  (2015-\/04-\/12) extra corruption checking (mmozeiko)}}
\DoxyCodeLine{7009 \textcolor{comment}{                         stbi\_set\_flip\_vertically\_on\_load (nguillemot)}}
\DoxyCodeLine{7010 \textcolor{comment}{                         fix NEON support; fix mingw support}}
\DoxyCodeLine{7011 \textcolor{comment}{      2.02  (2015-\/01-\/19) fix incorrect assert, fix warning}}
\DoxyCodeLine{7012 \textcolor{comment}{      2.01  (2015-\/01-\/17) fix various warnings; suppress SIMD on gcc 32-\/bit without -\/msse2}}
\DoxyCodeLine{7013 \textcolor{comment}{      2.00b (2014-\/12-\/25) fix STBI\_MALLOC in progressive JPEG}}
\DoxyCodeLine{7014 \textcolor{comment}{      2.00  (2014-\/12-\/25) optimize JPG, including x86 SSE2 \& NEON SIMD (ryg)}}
\DoxyCodeLine{7015 \textcolor{comment}{                         progressive JPEG (stb)}}
\DoxyCodeLine{7016 \textcolor{comment}{                         PGM/PPM support (Ken Miller)}}
\DoxyCodeLine{7017 \textcolor{comment}{                         STBI\_MALLOC,STBI\_REALLOC,STBI\_FREE}}
\DoxyCodeLine{7018 \textcolor{comment}{                         GIF bugfix -\/-\/ seemingly never worked}}
\DoxyCodeLine{7019 \textcolor{comment}{                         STBI\_NO\_*, STBI\_ONLY\_*}}
\DoxyCodeLine{7020 \textcolor{comment}{      1.48  (2014-\/12-\/14) fix incorrectly-\/named assert()}}
\DoxyCodeLine{7021 \textcolor{comment}{      1.47  (2014-\/12-\/14) 1/2/4-\/bit PNG support, both direct and paletted (Omar Cornut \& stb)}}
\DoxyCodeLine{7022 \textcolor{comment}{                         optimize PNG (ryg)}}
\DoxyCodeLine{7023 \textcolor{comment}{                         fix bug in interlaced PNG with user-\/specified channel count (stb)}}
\DoxyCodeLine{7024 \textcolor{comment}{      1.46  (2014-\/08-\/26)}}
\DoxyCodeLine{7025 \textcolor{comment}{              fix broken tRNS chunk (colorkey-\/style transparency) in non-\/paletted PNG}}
\DoxyCodeLine{7026 \textcolor{comment}{      1.45  (2014-\/08-\/16)}}
\DoxyCodeLine{7027 \textcolor{comment}{              fix MSVC-\/ARM internal compiler error by wrapping malloc}}
\DoxyCodeLine{7028 \textcolor{comment}{      1.44  (2014-\/08-\/07)}}
\DoxyCodeLine{7029 \textcolor{comment}{              various warning fixes from Ronny Chevalier}}
\DoxyCodeLine{7030 \textcolor{comment}{      1.43  (2014-\/07-\/15)}}
\DoxyCodeLine{7031 \textcolor{comment}{              fix MSVC-\/only compiler problem in code changed in 1.42}}
\DoxyCodeLine{7032 \textcolor{comment}{      1.42  (2014-\/07-\/09)}}
\DoxyCodeLine{7033 \textcolor{comment}{              don't define \_CRT\_SECURE\_NO\_WARNINGS (affects user code)}}
\DoxyCodeLine{7034 \textcolor{comment}{              fixes to stbi\_\_cleanup\_jpeg path}}
\DoxyCodeLine{7035 \textcolor{comment}{              added STBI\_ASSERT to avoid requiring assert.h}}
\DoxyCodeLine{7036 \textcolor{comment}{      1.41  (2014-\/06-\/25)}}
\DoxyCodeLine{7037 \textcolor{comment}{              fix search\&replace from 1.36 that messed up comments/error messages}}
\DoxyCodeLine{7038 \textcolor{comment}{      1.40  (2014-\/06-\/22)}}
\DoxyCodeLine{7039 \textcolor{comment}{              fix gcc struct-\/initialization warning}}
\DoxyCodeLine{7040 \textcolor{comment}{      1.39  (2014-\/06-\/15)}}
\DoxyCodeLine{7041 \textcolor{comment}{              fix to TGA optimization when req\_comp != number of components in TGA;}}
\DoxyCodeLine{7042 \textcolor{comment}{              fix to GIF loading because BMP wasn't rewinding (whoops, no GIFs in my test suite)}}
\DoxyCodeLine{7043 \textcolor{comment}{              add support for BMP version 5 (more ignored fields)}}
\DoxyCodeLine{7044 \textcolor{comment}{      1.38  (2014-\/06-\/06)}}
\DoxyCodeLine{7045 \textcolor{comment}{              suppress MSVC warnings on integer casts truncating values}}
\DoxyCodeLine{7046 \textcolor{comment}{              fix accidental rename of 'skip' field of I/O}}
\DoxyCodeLine{7047 \textcolor{comment}{      1.37  (2014-\/06-\/04)}}
\DoxyCodeLine{7048 \textcolor{comment}{              remove duplicate typedef}}
\DoxyCodeLine{7049 \textcolor{comment}{      1.36  (2014-\/06-\/03)}}
\DoxyCodeLine{7050 \textcolor{comment}{              convert to header file single-\/file library}}
\DoxyCodeLine{7051 \textcolor{comment}{              if de-\/iphone isn't set, load iphone images color-\/swapped instead of returning NULL}}
\DoxyCodeLine{7052 \textcolor{comment}{      1.35  (2014-\/05-\/27)}}
\DoxyCodeLine{7053 \textcolor{comment}{              various warnings}}
\DoxyCodeLine{7054 \textcolor{comment}{              fix broken STBI\_SIMD path}}
\DoxyCodeLine{7055 \textcolor{comment}{              fix bug where stbi\_load\_from\_file no longer left file pointer in correct place}}
\DoxyCodeLine{7056 \textcolor{comment}{              fix broken non-\/easy path for 32-\/bit BMP (possibly never used)}}
\DoxyCodeLine{7057 \textcolor{comment}{              TGA optimization by Arseny Kapoulkine}}
\DoxyCodeLine{7058 \textcolor{comment}{      1.34  (unknown)}}
\DoxyCodeLine{7059 \textcolor{comment}{              use STBI\_NOTUSED in stbi\_\_resample\_row\_generic(), fix one more leak in tga failure case}}
\DoxyCodeLine{7060 \textcolor{comment}{      1.33  (2011-\/07-\/14)}}
\DoxyCodeLine{7061 \textcolor{comment}{              make stbi\_is\_hdr work in STBI\_NO\_HDR (as specified), minor compiler-\/friendly improvements}}
\DoxyCodeLine{7062 \textcolor{comment}{      1.32  (2011-\/07-\/13)}}
\DoxyCodeLine{7063 \textcolor{comment}{              support for "{}info"{} function for all supported filetypes (SpartanJ)}}
\DoxyCodeLine{7064 \textcolor{comment}{      1.31  (2011-\/06-\/20)}}
\DoxyCodeLine{7065 \textcolor{comment}{              a few more leak fixes, bug in PNG handling (SpartanJ)}}
\DoxyCodeLine{7066 \textcolor{comment}{      1.30  (2011-\/06-\/11)}}
\DoxyCodeLine{7067 \textcolor{comment}{              added ability to load files via callbacks to accomidate custom input streams (Ben Wenger)}}
\DoxyCodeLine{7068 \textcolor{comment}{              removed deprecated format-\/specific test/load functions}}
\DoxyCodeLine{7069 \textcolor{comment}{              removed support for installable file formats (stbi\_loader) -\/-\/ would have been broken for IO callbacks anyway}}
\DoxyCodeLine{7070 \textcolor{comment}{              error cases in bmp and tga give messages and don't leak (Raymond Barbiero, grisha)}}
\DoxyCodeLine{7071 \textcolor{comment}{              fix inefficiency in decoding 32-\/bit BMP (David Woo)}}
\DoxyCodeLine{7072 \textcolor{comment}{      1.29  (2010-\/08-\/16)}}
\DoxyCodeLine{7073 \textcolor{comment}{              various warning fixes from Aurelien Pocheville}}
\DoxyCodeLine{7074 \textcolor{comment}{      1.28  (2010-\/08-\/01)}}
\DoxyCodeLine{7075 \textcolor{comment}{              fix bug in GIF palette transparency (SpartanJ)}}
\DoxyCodeLine{7076 \textcolor{comment}{      1.27  (2010-\/08-\/01)}}
\DoxyCodeLine{7077 \textcolor{comment}{              cast-\/to-\/stbi\_uc to fix warnings}}
\DoxyCodeLine{7078 \textcolor{comment}{      1.26  (2010-\/07-\/24)}}
\DoxyCodeLine{7079 \textcolor{comment}{              fix bug in file buffering for PNG reported by SpartanJ}}
\DoxyCodeLine{7080 \textcolor{comment}{      1.25  (2010-\/07-\/17)}}
\DoxyCodeLine{7081 \textcolor{comment}{              refix trans\_data warning (Won Chun)}}
\DoxyCodeLine{7082 \textcolor{comment}{      1.24  (2010-\/07-\/12)}}
\DoxyCodeLine{7083 \textcolor{comment}{              perf improvements reading from files on platforms with lock-\/heavy fgetc()}}
\DoxyCodeLine{7084 \textcolor{comment}{              minor perf improvements for jpeg}}
\DoxyCodeLine{7085 \textcolor{comment}{              deprecated type-\/specific functions so we'll get feedback if they're needed}}
\DoxyCodeLine{7086 \textcolor{comment}{              attempt to fix trans\_data warning (Won Chun)}}
\DoxyCodeLine{7087 \textcolor{comment}{      1.23    fixed bug in iPhone support}}
\DoxyCodeLine{7088 \textcolor{comment}{      1.22  (2010-\/07-\/10)}}
\DoxyCodeLine{7089 \textcolor{comment}{              removed image *writing* support}}
\DoxyCodeLine{7090 \textcolor{comment}{              stbi\_info support from Jetro Lauha}}
\DoxyCodeLine{7091 \textcolor{comment}{              GIF support from Jean-\/Marc Lienher}}
\DoxyCodeLine{7092 \textcolor{comment}{              iPhone PNG-\/extensions from James Brown}}
\DoxyCodeLine{7093 \textcolor{comment}{              warning-\/fixes from Nicolas Schulz and Janez Zemva (i.stbi\_\_err. Janez (U+017D)emva)}}
\DoxyCodeLine{7094 \textcolor{comment}{      1.21    fix use of 'stbi\_uc' in header (reported by jon blow)}}
\DoxyCodeLine{7095 \textcolor{comment}{      1.20    added support for Softimage PIC, by Tom Seddon}}
\DoxyCodeLine{7096 \textcolor{comment}{      1.19    bug in interlaced PNG corruption check (found by ryg)}}
\DoxyCodeLine{7097 \textcolor{comment}{      1.18  (2008-\/08-\/02)}}
\DoxyCodeLine{7098 \textcolor{comment}{              fix a threading bug (local mutable static)}}
\DoxyCodeLine{7099 \textcolor{comment}{      1.17    support interlaced PNG}}
\DoxyCodeLine{7100 \textcolor{comment}{      1.16    major bugfix -\/ stbi\_\_convert\_format converted one too many pixels}}
\DoxyCodeLine{7101 \textcolor{comment}{      1.15    initialize some fields for thread safety}}
\DoxyCodeLine{7102 \textcolor{comment}{      1.14    fix threadsafe conversion bug}}
\DoxyCodeLine{7103 \textcolor{comment}{              header-\/file-\/only version (\#define STBI\_HEADER\_FILE\_ONLY before including)}}
\DoxyCodeLine{7104 \textcolor{comment}{      1.13    threadsafe}}
\DoxyCodeLine{7105 \textcolor{comment}{      1.12    const qualifiers in the API}}
\DoxyCodeLine{7106 \textcolor{comment}{      1.11    Support installable IDCT, colorspace conversion routines}}
\DoxyCodeLine{7107 \textcolor{comment}{      1.10    Fixes for 64-\/bit (don't use "{}unsigned long"{})}}
\DoxyCodeLine{7108 \textcolor{comment}{              optimized upsampling by Fabian "{}ryg"{} Giesen}}
\DoxyCodeLine{7109 \textcolor{comment}{      1.09    Fix format-\/conversion for PSD code (bad global variables!)}}
\DoxyCodeLine{7110 \textcolor{comment}{      1.08    Thatcher Ulrich's PSD code integrated by Nicolas Schulz}}
\DoxyCodeLine{7111 \textcolor{comment}{      1.07    attempt to fix C++ warning/errors again}}
\DoxyCodeLine{7112 \textcolor{comment}{      1.06    attempt to fix C++ warning/errors again}}
\DoxyCodeLine{7113 \textcolor{comment}{      1.05    fix TGA loading to return correct *comp and use good luminance calc}}
\DoxyCodeLine{7114 \textcolor{comment}{      1.04    default float alpha is 1, not 255; use 'void *' for stbi\_image\_free}}
\DoxyCodeLine{7115 \textcolor{comment}{      1.03    bugfixes to STBI\_NO\_STDIO, STBI\_NO\_HDR}}
\DoxyCodeLine{7116 \textcolor{comment}{      1.02    support for (subset of) HDR files, float interface for preferred access to them}}
\DoxyCodeLine{7117 \textcolor{comment}{      1.01    fix bug: possible bug in handling right-\/side up bmps... not sure}}
\DoxyCodeLine{7118 \textcolor{comment}{              fix bug: the stbi\_\_bmp\_load() and stbi\_\_tga\_load() functions didn't work at all}}
\DoxyCodeLine{7119 \textcolor{comment}{      1.00    interface to zlib that skips zlib header}}
\DoxyCodeLine{7120 \textcolor{comment}{      0.99    correct handling of alpha in palette}}
\DoxyCodeLine{7121 \textcolor{comment}{      0.98    TGA loader by lonesock; dynamically add loaders (untested)}}
\DoxyCodeLine{7122 \textcolor{comment}{      0.97    jpeg errors on too large a file; also catch another malloc failure}}
\DoxyCodeLine{7123 \textcolor{comment}{      0.96    fix detection of invalid v value -\/ particleman@mollyrocket forum}}
\DoxyCodeLine{7124 \textcolor{comment}{      0.95    during header scan, seek to markers in case of padding}}
\DoxyCodeLine{7125 \textcolor{comment}{      0.94    STBI\_NO\_STDIO to disable stdio usage; rename all \#defines the same}}
\DoxyCodeLine{7126 \textcolor{comment}{      0.93    handle jpegtran output; verbose errors}}
\DoxyCodeLine{7127 \textcolor{comment}{      0.92    read 4,8,16,24,32-\/bit BMP files of several formats}}
\DoxyCodeLine{7128 \textcolor{comment}{      0.91    output 24-\/bit Windows 3.0 BMP files}}
\DoxyCodeLine{7129 \textcolor{comment}{      0.90    fix a few more warnings; bump version number to approach 1.0}}
\DoxyCodeLine{7130 \textcolor{comment}{      0.61    bugfixes due to Marc LeBlanc, Christopher Lloyd}}
\DoxyCodeLine{7131 \textcolor{comment}{      0.60    fix compiling as c++}}
\DoxyCodeLine{7132 \textcolor{comment}{      0.59    fix warnings: merge Dave Moore's -\/Wall fixes}}
\DoxyCodeLine{7133 \textcolor{comment}{      0.58    fix bug: zlib uncompressed mode len/nlen was wrong endian}}
\DoxyCodeLine{7134 \textcolor{comment}{      0.57    fix bug: jpg last huffman symbol before marker was >9 bits but less than 16 available}}
\DoxyCodeLine{7135 \textcolor{comment}{      0.56    fix bug: zlib uncompressed mode len vs. nlen}}
\DoxyCodeLine{7136 \textcolor{comment}{      0.55    fix bug: restart\_interval not initialized to 0}}
\DoxyCodeLine{7137 \textcolor{comment}{      0.54    allow NULL for 'int *comp'}}
\DoxyCodeLine{7138 \textcolor{comment}{      0.53    fix bug in png 3-\/>4; speedup png decoding}}
\DoxyCodeLine{7139 \textcolor{comment}{      0.52    png handles req\_comp=3,4 directly; minor cleanup; jpeg comments}}
\DoxyCodeLine{7140 \textcolor{comment}{      0.51    obey req\_comp requests, 1-\/component jpegs return as 1-\/component,}}
\DoxyCodeLine{7141 \textcolor{comment}{              on 'test' only check type, not whether we support this variant}}
\DoxyCodeLine{7142 \textcolor{comment}{      0.50  (2006-\/11-\/19)}}
\DoxyCodeLine{7143 \textcolor{comment}{              first released version}}
\DoxyCodeLine{7144 \textcolor{comment}{*/}}
\DoxyCodeLine{7145 }
\DoxyCodeLine{7146 }
\DoxyCodeLine{7147 \textcolor{comment}{/*}}
\DoxyCodeLine{7148 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{7149 \textcolor{comment}{This software is available under 2 licenses -\/-\/ choose whichever you prefer.}}
\DoxyCodeLine{7150 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{7151 \textcolor{comment}{ALTERNATIVE A -\/ MIT License}}
\DoxyCodeLine{7152 \textcolor{comment}{Copyright (c) 2017 Sean Barrett}}
\DoxyCodeLine{7153 \textcolor{comment}{Permission is hereby granted, free of charge, to any person obtaining a copy of}}
\DoxyCodeLine{7154 \textcolor{comment}{this software and associated documentation files (the "{}Software"{}), to deal in}}
\DoxyCodeLine{7155 \textcolor{comment}{the Software without restriction, including without limitation the rights to}}
\DoxyCodeLine{7156 \textcolor{comment}{use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies}}
\DoxyCodeLine{7157 \textcolor{comment}{of the Software, and to permit persons to whom the Software is furnished to do}}
\DoxyCodeLine{7158 \textcolor{comment}{so, subject to the following conditions:}}
\DoxyCodeLine{7159 \textcolor{comment}{The above copyright notice and this permission notice shall be included in all}}
\DoxyCodeLine{7160 \textcolor{comment}{copies or substantial portions of the Software.}}
\DoxyCodeLine{7161 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{7162 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{7163 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}}
\DoxyCodeLine{7164 \textcolor{comment}{AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}}
\DoxyCodeLine{7165 \textcolor{comment}{LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}}
\DoxyCodeLine{7166 \textcolor{comment}{OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE}}
\DoxyCodeLine{7167 \textcolor{comment}{SOFTWARE.}}
\DoxyCodeLine{7168 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{7169 \textcolor{comment}{ALTERNATIVE B -\/ Public Domain (www.unlicense.org)}}
\DoxyCodeLine{7170 \textcolor{comment}{This is free and unencumbered software released into the public domain.}}
\DoxyCodeLine{7171 \textcolor{comment}{Anyone is free to copy, modify, publish, use, compile, sell, or distribute this}}
\DoxyCodeLine{7172 \textcolor{comment}{software, either in source code form or as a compiled binary, for any purpose,}}
\DoxyCodeLine{7173 \textcolor{comment}{commercial or non-\/commercial, and by any means.}}
\DoxyCodeLine{7174 \textcolor{comment}{In jurisdictions that recognize copyright laws, the author or authors of this}}
\DoxyCodeLine{7175 \textcolor{comment}{software dedicate any and all copyright interest in the software to the public}}
\DoxyCodeLine{7176 \textcolor{comment}{domain. We make this dedication for the benefit of the public at large and to}}
\DoxyCodeLine{7177 \textcolor{comment}{the detriment of our heirs and successors. We intend this dedication to be an}}
\DoxyCodeLine{7178 \textcolor{comment}{overt act of relinquishment in perpetuity of all present and future rights to}}
\DoxyCodeLine{7179 \textcolor{comment}{this software under copyright law.}}
\DoxyCodeLine{7180 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{7181 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{7182 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}}
\DoxyCodeLine{7183 \textcolor{comment}{AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN}}
\DoxyCodeLine{7184 \textcolor{comment}{ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION}}
\DoxyCodeLine{7185 \textcolor{comment}{WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.}}
\DoxyCodeLine{7186 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{7187 \textcolor{comment}{*/}}

\end{DoxyCode}
